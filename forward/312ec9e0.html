<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>Linux åŸºç¡€çŸ¥è¯† [å·²å®Œç»“] | Maxbit</title><meta name="author" content="é¥¼é“›"><meta name="copyright" content="é¥¼é“›"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="å®ç”¨çš„LinuxåŸºç¡€æ€»ç»“ï¼ŒBash Shellå¥‡æ·«æŠ€å·§ç­‰">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux åŸºç¡€çŸ¥è¯† [å·²å®Œç»“]">
<meta property="og:url" content="https://cakepanit.com/forward/312ec9e0.html">
<meta property="og:site_name" content="Maxbit">
<meta property="og:description" content="å®ç”¨çš„LinuxåŸºç¡€æ€»ç»“ï¼ŒBash Shellå¥‡æ·«æŠ€å·§ç­‰">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cakepanit.com/images/img-75.png">
<meta property="article:published_time" content="2019-04-03T11:38:00.000Z">
<meta property="article:modified_time" content="2026-02-15T15:09:41.578Z">
<meta property="article:author" content="é¥¼é“›">
<meta property="article:tag" content="OPS">
<meta property="article:tag" content="SHELL">
<meta property="article:tag" content="RAID">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://cakepanit.com/images/img-75.png">
<meta name="twitter:site" content="@maxbit_tech"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://cakepanit.com/forward/312ec9e0.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/css/fei/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="/css/fei/fancybox.min.css" media="print" onload="this.media='all'"><script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: 'ca-pub-1372389585456420',
  enable_page_level_ads: 'true'
});</script><script data-pjax="" defer="" async="async" src="https://www.googletagmanager.com/gtag/js?id=G-0MFDY8HY5K"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-0MFDY8HY5K');
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":false,"languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç°¡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":300},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: {"limitCount":100,"languages":{"author":"ä½œè€…: é¥¼é“›","link":"é“¾æ¥: ","source":"æ¥æº: Maxbit","info":"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: '/css/fei/fjGallery.min.js',
      css: '/css/fei/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Linux åŸºç¡€çŸ¥è¯† [å·²å®Œç»“]',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2026-02-15 23:09:41'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = url => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      link.onload = () => resolve()
      link.onerror = () => reject()
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="https://s1.hdslb.com/bfs/static/jinkela/long/font/regular.css"><link rel="stylesheet" href="/css/fei/danmaku-tags.css"><link rel="stylesheet" href="/css/fei/tags-fold.css"><link rel="stylesheet" href="/css/fei/swiper-bundle.min.css"><link rel="stylesheet" href="/css/fei/love.css"><link rel="stylesheet" href="/css/fei/theme-transition.css"><link rel="stylesheet" href="/css/fei/greeting.css"><script src="/css/fei/swiper-bundle.min.js"></script><script src="/css/fei/pace.min.js"></script><script src="/css/fei/echarts.min.js"></script><script src="/css/fei/theme-transition.js"></script><script src="/js/fei/greeting.js"></script><style type="text/css"> .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body { left: -66px !important; /* é»˜è®¤æƒ…å†µä¸‹ç¼©è¿›å·¦ä¾§66pxï¼Œåªç•™ä¸€ç‚¹ç®­å¤´éƒ¨åˆ† */ }
.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover { left: 0 !important; /* é¼ æ ‡æ‚¬åœæ˜¯å·¦ä¾§ç¼©è¿›å½’é›¶ï¼Œå®Œå…¨æ˜¾ç¤ºæŒ‰é’® */ } </style><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "Maxbit",
  "url": "https://cakepanit.com",
  "description": "MaxbitæŠ€æœ¯åšå®¢ - åˆ†äº«Kubernetesã€Dockerã€Golangã€MySQLç­‰è¿ç»´å¼€å‘å®æˆ˜æ•™ç¨‹ã€‚æ¶µç›–DevOpsã€äº‘åŸç”Ÿã€Linuxè¿ç»´ã€æ•°æ®åº“ç®¡ç†ï¼ŒåŠ©åŠ›ITå·¥ç¨‹å¸ˆæŠ€æœ¯è¿›é˜¶ï¼",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://cakepanit.com/search?q={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "Maxbit",
  "url": "https://cakepanit.com",
  "logo": "https://cakepanit.com/img/avatar.jpg",
  "sameAs": [
    "https://github.com/bingdang"
  ]
}
</script><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "Linux åŸºç¡€çŸ¥è¯† [å·²å®Œç»“]",
  "description": "å¯åŠ¨è¿‡ç¨‹
ç½‘ç»œè°ƒè¯•ä¸´æ—¶å…³å¯ç½‘å¡12ifup &amp;#123;interface&amp;#125; || ifconfig &amp;#123;interface&amp;#125; upifdown &amp;#123;interface&amp;#125; || ifconfig &amp;#123;interface&amp;#125; down
æ·»åŠ å¤šå—ç½‘å¡1234567891011121314151617181920212223242526272",
  "image": "/images/img-75.png",
  "datePublished": "2019-04-03T11:38:00.000Z",
  "dateModified": "2026-02-15T15:09:41.578Z",
  "author": {
    "@type": "Person",
    "name": "é¥¼é“›"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Maxbit",
    "logo": {
      "@type": "ImageObject",
      "url": "https://cakepanit.com/img/avatar.jpg"
    }
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://cakepanit.com/forward/312ec9e0.html"
  }
}
</script><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {&quot;@type&quot;: &quot;ListItem&quot;, &quot;position&quot;: 1, &quot;name&quot;: &quot;é¦–é¡µ&quot;, &quot;item&quot;: &quot;https://cakepanit.com&quot;},
        {&quot;@type&quot;: &quot;ListItem&quot;, &quot;position&quot;: 2, &quot;name&quot;: &quot;OPS&quot;, &quot;item&quot;: &quot;https://cakepanit.com/categories/OPS/&quot;},
        {&quot;@type&quot;: &quot;ListItem&quot;, &quot;position&quot;: 3, &quot;name&quot;: &quot;Linux åŸºç¡€çŸ¥è¯† [å·²å®Œç»“]&quot;, &quot;item&quot;: &quot;https://cakepanit.com/forward/312ec9e0.html&quot;}
  ]
}</script></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "/img/loading.gif" data-lazy-src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">104</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">89</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">3</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-fw fas fa-book-open"></i><span> æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/" target="_self"><i class="fa-fw fa-fw fas fa-archive"></i><span> æ–‡ç« åˆ—è¡¨</span></a></li><li><a class="site-page child" href="/categories/" target="_self"><i class="fa-fw fa-fw fas fa-shapes"></i><span> å…¨éƒ¨åˆ†ç±»</span></a></li><li><a class="site-page child" href="/tags/" target="_self"><i class="fa-fw fa-fw fas fa-tags"></i><span> æ‰€æœ‰æ ‡ç­¾</span></a></li><li><a class="site-page child" href="javascript:toRandomPost();" target="_self"><i class="fa-fw fa-fw fas fa-random"></i><span> éšä¾¿çœ‹çœ‹</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-fw fas fa-link"></i><span> å¯¼èˆª</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/" target="_self"><i class="fa-fw fa-fw fas fa-child"></i><span> å‹æƒ…é“¾æ¥</span></a></li><li><a class="site-page child" href="/about/" target="_self"><i class="fa-fw fa-fw fas fa-address-card"></i><span> å…³äºæœ¬ç«™</span></a></li><li><a class="site-page child" href="https://pan.cakepanit.com/" target="_blank"><i class="fa-fw fa-fw fas fa-cloud"></i><span> æˆ‘çš„äº‘ç›˜</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> å…¶ä»–</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/gallery/" target="_self"><i class="fa-fw fas fa-file-image"></i><span> æ”¶è—å›¾åº“</span></a></li><li><a class="site-page child" href="/bookshelf/" target="_self"><i class="fa-fw fas fa-bookmark"></i><span> æ”¶è—ä¹¦å•</span></a></li><li><a class="site-page child" href="/music/" target="_blank"><i class="fa-fw fas fa-music"></i><span> å¤©å¤©åŠ¨å¬</span></a></li><li><a class="site-page child" href="/status/" target="_self"><i class="fa-fw fab fa-accessible-icon"></i><span> ç«™ç‚¹ç›‘æ§</span></a></li><li><a class="site-page child" href="https://docs.cakepanit.com/" target="_self"><i class="fa-fw fa fa-tasks"></i><span> å¸®åŠ©æ–‡æ¡£</span></a></li><li><a class="site-page child" href="https://cmd.cakepanit.com/" target="_self"><i class="fa-fw fa fa-sort-alpha-desc"></i><span> å‘½ä»¤æŸ¥è¯¢</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/images/img-75.png')"><nav id="nav"><div id="nav-group"><span id="blog-info"> <a class="site-page" href="/" title="Maxbit"><span class="site-name">Maxbit</span><i class="fas fa-home"></i></a></span><span id="page_name"><a class="site-page" id="page-title" title="å›åˆ°é¡¶éƒ¨" onclick="btf.scrollToDest(0, 500)"><span>Maxbit</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-fw fas fa-book-open"></i><span> æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/" target="_self"><i class="fa-fw fa-fw fas fa-archive"></i><span> æ–‡ç« åˆ—è¡¨</span></a></li><li><a class="site-page child" href="/categories/" target="_self"><i class="fa-fw fa-fw fas fa-shapes"></i><span> å…¨éƒ¨åˆ†ç±»</span></a></li><li><a class="site-page child" href="/tags/" target="_self"><i class="fa-fw fa-fw fas fa-tags"></i><span> æ‰€æœ‰æ ‡ç­¾</span></a></li><li><a class="site-page child" href="javascript:toRandomPost();" target="_self"><i class="fa-fw fa-fw fas fa-random"></i><span> éšä¾¿çœ‹çœ‹</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-fw fas fa-link"></i><span> å¯¼èˆª</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/" target="_self"><i class="fa-fw fa-fw fas fa-child"></i><span> å‹æƒ…é“¾æ¥</span></a></li><li><a class="site-page child" href="/about/" target="_self"><i class="fa-fw fa-fw fas fa-address-card"></i><span> å…³äºæœ¬ç«™</span></a></li><li><a class="site-page child" href="https://pan.cakepanit.com/" target="_blank"><i class="fa-fw fa-fw fas fa-cloud"></i><span> æˆ‘çš„äº‘ç›˜</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> å…¶ä»–</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/gallery/" target="_self"><i class="fa-fw fas fa-file-image"></i><span> æ”¶è—å›¾åº“</span></a></li><li><a class="site-page child" href="/bookshelf/" target="_self"><i class="fa-fw fas fa-bookmark"></i><span> æ”¶è—ä¹¦å•</span></a></li><li><a class="site-page child" href="/music/" target="_blank"><i class="fa-fw fas fa-music"></i><span> å¤©å¤©åŠ¨å¬</span></a></li><li><a class="site-page child" href="/status/" target="_self"><i class="fa-fw fab fa-accessible-icon"></i><span> ç«™ç‚¹ç›‘æ§</span></a></li><li><a class="site-page child" href="https://docs.cakepanit.com/" target="_self"><i class="fa-fw fa fa-tasks"></i><span> å¸®åŠ©æ–‡æ¡£</span></a></li><li><a class="site-page child" href="https://cmd.cakepanit.com/" target="_self"><i class="fa-fw fa fa-sort-alpha-desc"></i><span> å‘½ä»¤æŸ¥è¯¢</span></a></li></ul></div></div></div><div id="hotkey"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="æœç´¢"><i class="fas fa-search fa-fw"></i></a></div><div id="setting-button" onclick="eurkon.switchRightSide();"><a class="site-page" href="javascript:void(0);" title="è®¾ç½®"><i class="fas fa-screwdriver-wrench fa-fw"></i></a></div><div id="admin-button" style="display:none;"><a class="site-page" href="/admin/login/" title="ç™»å½•" target="_blank"><i class="fas fa-user-shield fa-fw"></i></a></div><script>(function(){
  var host = window.location.hostname;
  if (host !== 'cakepanit.com' && host !== 'www.cakepanit.com') {
    var btn = document.getElementById('admin-button');
    if (btn) btn.style.display = '';
  }
})();</script><div id="top-button"><a class="site-page" href="javascript:void(0);" title="å›åˆ°é¡¶éƒ¨" onclick="btf.scrollToDest(0, 500)"><span class="scroll-percent"></span><i class="fas fa-arrow-up fa-fw"></i></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></div></nav><div id="post-cover"><img class="cover" id="post-cover-img" src= "/img/loading.gif" data-lazy-src="/images/img-75.png" alt="cover"></div><div id="post-info"><div id="post-meta"><div class="meta-firstline"><span class="post-meta-categories"><i class="fas fa-shapes fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/OPS/">OPS</a></span><span class="post-meta-tags"><span class="post-meta-separator">|</span><i class="fas fa-tags fa-fw post-meta-icon"></i><a class="post-meta-tags" href="/tags/OPS/">ğŸŒOPS</a><span class="post-meta-separator">â€¢</span><a class="post-meta-tags" href="/tags/SHELL/">SHELL</a><span class="post-meta-separator">â€¢</span><a class="post-meta-tags" href="/tags/RAID/">RAID</a></span></div><h1 class="post-title">Linux åŸºç¡€çŸ¥è¯† [å·²å®Œç»“]</h1><div class="meta-secondline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2019-04-03T11:38:00.000Z" title="å‘è¡¨äº 2019-04-03 19:38:00">2019-04-03</time></span><span class="post-meta-separator">|</span><span class="post-meta-date"><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2026-02-15T15:09:41.578Z" title="æ›´æ–°äº 2026-02-15 23:09:41">2026-02-15</time></span><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">32k</span><span class="post-meta-separator">|</span></span><span class="post-meta-min2read"><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>138åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Linux åŸºç¡€çŸ¥è¯† [å·²å®Œç»“]"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div><div id="post"><article class="post-content" id="article-container"><h1 id="å¯åŠ¨è¿‡ç¨‹"><a href="#å¯åŠ¨è¿‡ç¨‹" class="headerlink" title="å¯åŠ¨è¿‡ç¨‹"></a>å¯åŠ¨è¿‡ç¨‹</h1><p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-186.png" alt="CentOS7å¯åŠ¨è¿‡ç¨‹"></p>
<h1 id="ç½‘ç»œè°ƒè¯•"><a href="#ç½‘ç»œè°ƒè¯•" class="headerlink" title="ç½‘ç»œè°ƒè¯•"></a>ç½‘ç»œè°ƒè¯•</h1><h2 id="ä¸´æ—¶å…³å¯ç½‘å¡"><a href="#ä¸´æ—¶å…³å¯ç½‘å¡" class="headerlink" title="ä¸´æ—¶å…³å¯ç½‘å¡"></a>ä¸´æ—¶å…³å¯ç½‘å¡</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ifup {interface} || ifconfig {interface} up</span><br><span class="line">ifdown {interface} || ifconfig {interface} down</span><br></pre></td></tr></tbody></table></figure>
<h2 id="æ·»åŠ å¤šå—ç½‘å¡"><a href="#æ·»åŠ å¤šå—ç½‘å¡" class="headerlink" title="æ·»åŠ å¤šå—ç½‘å¡"></a>æ·»åŠ å¤šå—ç½‘å¡</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[felix@es-node03 ~]$ <span class="built_in">cat</span> /etc/sysconfig/network-scripts/ifcfg-ens160 </span><br><span class="line">TYPE=Ethernet  <span class="comment">#è®¾å¤‡ç±»å‹ä¸ºä»¥å¤ªç½‘è®¾å¤‡</span></span><br><span class="line">BOOTPROTO=none <span class="comment">#æ˜¯å¦å¯ç”¨è¯¥è®¾å¤‡ staticé™æ€IP æˆ–dhp æˆ–noneæ— ï¼ˆä¸æŒ‡å®šï¼‰ï¼Œå¦‚æ˜¯noneï¼Œé…ä¸ŠIPåœ°å€å’Œ staticæ•ˆæœä¸€æ ·</span></span><br><span class="line">DEFROUTE=<span class="built_in">yes</span></span><br><span class="line">IPV4_FAILURE_FATAL=no</span><br><span class="line">IPV6INIT=<span class="built_in">yes</span></span><br><span class="line">IPV6_AUTOCONF=<span class="built_in">yes</span></span><br><span class="line">IPV6_DEFROUTE=<span class="built_in">yes</span></span><br><span class="line">IPV6_FAILURE_FATAL=no</span><br><span class="line">IPV6_ADDR_GEN_MODE=stable-privacy</span><br><span class="line">NAME=ens160  	<span class="comment">#ç½‘å¡åå­—</span></span><br><span class="line">UUID=6b1f051d-11c8-4d83-ba66-c6d98414ca84 <span class="comment">#ç½‘å¡UUIDï¼Œå…¨çƒå”¯ä¸€</span></span><br><span class="line">DEVICE=ens160	<span class="comment">#è®¾å¤‡åå­—ï¼Œå†å†…æ ¸ä¸­è¯†åˆ«çš„åå­—</span></span><br><span class="line">ONBOOT=<span class="built_in">yes</span>		<span class="comment">#å¯ç”¨è¯¥è®¾å¤‡ï¼Œå¦‚æœnoï¼Œè¡¨ç¤ºä¸å¯åŠ¨æ­¤ç½‘ç»œè®¾å¤‡</span></span><br><span class="line">IPADDR=192.168.200.153	<span class="comment">#IPåœ°å€</span></span><br><span class="line">PREFIX=24		<span class="comment">#å­ç½‘æ©ç ï¼Œ24ç›¸å½“äº255.255.255.0</span></span><br><span class="line">GATEWAY=192.168.200.1	<span class="comment">#ç½‘å…³</span></span><br><span class="line">DNS1=172.18.16.1	<span class="comment">#é¦–é€‰DNS</span></span><br><span class="line">IPV6_PEERDNS=<span class="built_in">yes</span></span><br><span class="line">IPV6_PEERROUTES=<span class="built_in">yes</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cp</span> /etc/sysconfig/network-scripts/ifcfg-ens160 /etc/sysconfig/network-scripts/ifcfg-ens161</span><br><span class="line"><span class="comment">#æ›´æ”¹å†…å®¹ens161</span></span><br><span class="line">NAME=ens161</span><br><span class="line">UUID=6b1f051d-11c8-4d83-ba66-c6d98414ca84 <span class="comment">#åˆ é™¤UUID</span></span><br><span class="line">DEVICE=ens161</span><br><span class="line">IPDADDR=192.168.200.154</span><br><span class="line"></span><br><span class="line">systemctl restart NetworkManager</span><br><span class="line">systemctl restart network</span><br></pre></td></tr></tbody></table></figure>
<h2 id="é…ç½®ä¸´æ—¶IP"><a href="#é…ç½®ä¸´æ—¶IP" class="headerlink" title="é…ç½®ä¸´æ—¶IP"></a>é…ç½®ä¸´æ—¶IP</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig {interface} {ip addr}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="æŸ¥çœ‹ç«¯å£ç›‘å¬çŠ¶æ€"><a href="#æŸ¥çœ‹ç«¯å£ç›‘å¬çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹ç«¯å£ç›‘å¬çŠ¶æ€"></a>æŸ¥çœ‹ç«¯å£ç›‘å¬çŠ¶æ€</h2><p>netstatå‘½ä»¤ï¼šæŸ¥çœ‹ç³»ç»Ÿä¸­ç½‘ç»œè¿æ¥çŠ¶æ€ä¿¡æ¯<br>å¸¸ç”¨çš„å‚æ•°æ ¼å¼ï¼šnetstat- lntup</p>
<ul>
<li>-a -allæ˜¾ç¤ºæœ¬æœºæ‰€æœ‰è¿æ¥å’Œç›‘å¬çš„ç«¯å£</li>
<li>-n --numeric donâ€™t resolve namesä»¥æ•°å­—å½¢å¼æ˜¾ç¤ºå½“å‰å»ºç«‹çš„æœ‰æ•ˆè¿æ¥å’Œç«¯å£</li>
<li>-u æ˜¾ç¤ºudåè®®è¿æ¥</li>
<li>-tæ˜¾ç¤ºtcpåè®®è¿æ¥</li>
<li>-pï¼Œ--programsæ˜¾ç¤ºè¿æ¥å¯¹åº”çš„PIDä¸ç¨‹åºå</li>
<li>-uæ˜¾ç¤ºudpåè®®è¿æ¥</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@es-node03 ~]<span class="comment"># netstat -lntup</span></span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">åè®®  æ¥æ”¶  å‘é€    æœ¬åœ°IPåœ°å€              è¿œç¨‹IPåœ°å€              çŠ¶æ€     PID</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    </span><br><span class="line">tcp        0      0 0.0.0.0:8070            0.0.0.0:*               LISTEN      3790/python3 </span><br></pre></td></tr></tbody></table></figure>
<p><code>LISTEN</code>ï¼š(Listening for a connection.)ä¾¦å¬æ¥è‡ªè¿œæ–¹çš„TCPç«¯å£çš„è¿æ¥è¯·æ±‚<br><code>SYN-SENT</code>ï¼š(Active; sent SYN. Waiting for a matching connection request after having sent a connection request.)å†å‘é€è¿æ¥è¯·æ±‚åç­‰å¾…åŒ¹é…çš„è¿æ¥è¯·æ±‚<br><code>SYN-RECEIVED</code>ï¼š(Sent and received SYN. Waiting for a confirming connection request acknowledgment after having both received and sent connection requests.)å†æ”¶åˆ°å’Œå‘é€ä¸€ä¸ªè¿æ¥è¯·æ±‚åç­‰å¾…å¯¹æ–¹å¯¹è¿æ¥è¯·æ±‚çš„ç¡®è®¤<br><code>ESTABLISHED</code>ï¼š(Connection established.)ä»£è¡¨ä¸€ä¸ªæ‰“å¼€çš„è¿æ¥<br><code>FIN-WAIT-1</code>ï¼š(Closed; sent FIN.)ç­‰å¾…è¿œç¨‹TCPè¿æ¥ä¸­æ–­è¯·æ±‚ï¼Œæˆ–å…ˆå‰çš„è¿æ¥ä¸­æ–­è¯·æ±‚çš„ç¡®è®¤<br><code>FIN-WAIT-2</code>ï¼š(Closed; FIN is acknowledged; awaiting FIN.)ä»è¿œç¨‹TCPç­‰å¾…è¿æ¥ä¸­æ–­è¯·æ±‚<br><code>CLOSE-WAIT</code>ï¼š(Received FIN; waiting to receive CLOSE.)ç­‰å¾…ä»æœ¬åœ°ç”¨æˆ·å‘æ¥çš„è¿æ¥ä¸­æ–­è¯·æ±‚<br><code>CLOSING</code>ï¼š(Closed; exchanged FIN; waiting for FIN.)ç­‰å¾…è¿œç¨‹TCPå¯¹è¿æ¥ä¸­æ–­çš„ç¡®è®¤<br><code>LAST-ACK</code>ï¼š(Received FIN and CLOSE; waiting for FIN ACK.)ç­‰å¾…åŸæ¥çš„å‘å‘è¿œç¨‹TCPçš„è¿æ¥ä¸­æ–­è¯·æ±‚çš„ç¡®è®¤<br><code>TIME-WAIT</code>ï¼š(In 2 MSL (twice the maximum segment length) quiet wait after close. )ç­‰å¾…è¶³å¤Ÿçš„æ—¶é—´ä»¥ç¡®ä¿è¿œç¨‹TCPæ¥æ”¶åˆ°è¿æ¥ä¸­æ–­è¯·æ±‚çš„ç¡®è®¤<br><code>CLOSED</code>ï¼š(Connection is closed.)æ²¡æœ‰ä»»ä½•è¿æ¥çŠ¶æ€</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">æœåŠ¡å™¨ä¸­å­˜åœ¨å¤§é‡</span><br><span class="line">[root@es-node03 ~]<span class="comment"># cat /proc/sys/net/ipv4/tcp_fin_timeout </span></span><br><span class="line">2</span><br><span class="line"><span class="comment">#é€šè¿‡ç¼©çŸ­æ—¶é—´ time waltæ—¶é—´æ¥å¿«é€Ÿé‡Šæ”¾é“¾æ¥</span></span><br><span class="line">vim /etc/sysctl.conf</span><br><span class="line">net.ipv4.tcp_fin_timeout = 2</span><br></pre></td></tr></tbody></table></figure>
<h2 id="DNSç›¸å…³é…ç½®"><a href="#DNSç›¸å…³é…ç½®" class="headerlink" title="DNSç›¸å…³é…ç½®"></a>DNSç›¸å…³é…ç½®</h2><p><code>/etc/hosts</code>æ–‡ä»¶ï¼Œä¼˜å…ˆçº§é«˜äºDNSè§£æ</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /etc/hosts</span><br><span class="line">192.168.200.148  node1</span><br><span class="line">192.168.200.149  node2</span><br><span class="line">192.168.200.153  node3</span><br></pre></td></tr></tbody></table></figure>
<p><code>/etc/resolv.conf</code><br>æ³¨ï¼šåœ¨ centos5ç‰ˆæœ¬ï¼Œé…ç½®dnsç”¨è¿™ä¸ªæ–‡ä»¶ã€‚åœ¨ centos6 7ä»¥åï¼Œç›´æ¥åœ¨ç½‘å¡é…ç½®æ–‡ä»¶ä¸­æŒ‡å®š<code>DNS1=192168.1.1</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@es-node03 ~]<span class="comment"># cat /etc/resolv.conf </span></span><br><span class="line"><span class="comment"># Generated by NetworkManager</span></span><br><span class="line">nameserver 172.18.16.1</span><br></pre></td></tr></tbody></table></figure>
<p>é—®ï¼šä¸ºä»€ä¹ˆhostsä¼˜å…ˆçº§é«˜äºdns</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@es-node03 ~]<span class="comment"># grep "hosts:" /etc/nsswitch.conf</span></span><br><span class="line"><span class="comment">#hosts:     db files nisplus nis dns</span></span><br><span class="line">hosts:      files dns myhostname <span class="comment">#filesï¼ˆ/etc/hostsï¼‰æ”¾åœ¨äº†dnså‰é¢ï¼‰</span></span><br></pre></td></tr></tbody></table></figure>
<h2 id="ç³»ç»Ÿè·¯ç”±ä¿¡æ¯"><a href="#ç³»ç»Ÿè·¯ç”±ä¿¡æ¯" class="headerlink" title="ç³»ç»Ÿè·¯ç”±ä¿¡æ¯"></a>ç³»ç»Ÿè·¯ç”±ä¿¡æ¯</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@es-node03 ~]<span class="comment"># route -n</span></span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class="line">0.0.0.0         192.168.200.1   0.0.0.0         UG    0      0        0 ens160</span><br><span class="line">è¡¨ç¤ºä»»ä½•ç½‘æ®µ    é»˜è®¤ç½‘å…³       æ‰€æœ‰ä¸»æœº  </span><br></pre></td></tr></tbody></table></figure>
<p>æ·»åŠ åˆ é™¤è·¯ç”±æ¡ç›®</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">route add -net 192.168.300.0 netmask 255.255.255.0 dev ens161</span><br><span class="line">				ç½‘æ®µ       æ©ç             å‡ºæ¥å£</span><br><span class="line">route del -net 192.168.300.0 netmask 255.255.255.0</span><br></pre></td></tr></tbody></table></figure>
<p>è·¯ç”±è·Ÿè¸ªï¼šæŸ¥çœ‹ç»è¿‡å¤šå°‘ä¸‰å±‚è®¾å¤‡çš„æ•°é‡</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@es-node03 ~]<span class="comment"># traceroute 172.18.16.1</span></span><br><span class="line">traceroute to 172.18.16.1 (172.18.16.1), 30 hops max, 60 byte packets</span><br><span class="line"> 1  localhost (192.168.200.1)  22.189 ms  22.913 ms  23.730 ms</span><br><span class="line"> 2  * * *</span><br></pre></td></tr></tbody></table></figure>
<h2 id="pingå‘½ä»¤"><a href="#pingå‘½ä»¤" class="headerlink" title="pingå‘½ä»¤"></a>pingå‘½ä»¤</h2><p>ping {ip addr}</p>
<ul>
<li>-c æ•°ç›® åœ¨å‘é€æŒ‡å®šæ•°ç›®çš„åŒ…ååœæ­¢</li>
<li>-i ç§’æ•° è®¾å®šé—´éš”å‡ ç§’é€ä¸€ä¸ªç½‘ç»œå°åŒ…ç»™ä¸€å°æœºå™¨ï¼Œé¢„è®¾å€¼æ˜¯ä¸€ç§’é€ä¸€æ¬¡</li>
<li>-I ens161 æŒ‡å®šä»å“ªä¸ªæ¥å£å‡ºå»</li>
</ul>
<p>arping -I ens160 192.168.200.1 #è§‚å¯Ÿmacåœ°å€æ˜¯å¦ä¸€æ ·ï¼Œä¸€æ ·åˆ™æ²¡æœ‰äººå†’å……ç½‘å…³</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ARPING 192.168.200.1 from 192.168.200.153 ens160</span><br><span class="line">Unicast reply from 192.168.200.1 [E8:BD:D1:F6:6A:B3]  4.658ms</span><br><span class="line">Unicast reply from 192.168.200.1 [E8:BD:D1:F6:6A:B3]  3.815ms</span><br><span class="line">Unicast reply from 192.168.200.1 [E8:BD:D1:F6:6A:B3]  4.710ms</span><br></pre></td></tr></tbody></table></figure>
<h2 id="watchå‘½ä»¤"><a href="#watchå‘½ä»¤" class="headerlink" title="watchå‘½ä»¤"></a>watchå‘½ä»¤</h2><p>watchä½œç”¨ï¼šå®æ—¶ç›‘æµ‹å‘½ä»¤çš„è¿è¡Œç»“æœï¼Œå¯ä»¥çœ‹åˆ°æ‰€æœ‰å˜åŒ–æ•°æ®åŒ…çš„å¤§å°</p>
<ul>
<li>-dï¼Œâ€“differences #é«˜äº®æ˜¾ç¤ºæŒ‡ä»¤è¾“å‡ºä¿¡æ¯ä¸åŒä¹‹å¤„ï¼› </li>
<li>-nï¼Œâ€“interval seconds #æŒ‡å®šæŒ‡ä»¤æ‰§è¡Œçš„é—´éš”æ—¶é—´ï¼ˆç§’ï¼‰</li>
</ul>
<p>ä¾‹ï¼šæ¯éš”1ç§’é«˜äº®å·®å¼‚æ˜¾ç¤ºens33ç›¸å…³ä¿¡æ¯</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">watch -d -n 1 ifconfig ens160</span><br><span class="line">Every 1.0s: ifconfig ens160                  Tue Jun 16 10:32:20 2020</span><br><span class="line"></span><br><span class="line">ens160: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.200.153  netmask 255.255.255.0  broadcast 192.168.200.255</span><br><span class="line">        inet6 fe80::250:56ff:fe9d:b0b  prefixlen 64  scopeid 0x20&lt;<span class="built_in">link</span>&gt;</span><br><span class="line">        ether 00:50:56:9d:0b:0b  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 9665169  bytes 8799755781 (8.1 GiB)</span><br><span class="line">        RX errors 0  dropped 20  overruns 0  frame 0</span><br><span class="line">        TX packets 7473274  bytes 6814218750 (6.3 GiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></tbody></table></figure>
<h2 id="tcpdumpæŠ“åŒ…"><a href="#tcpdumpæŠ“åŒ…" class="headerlink" title="tcpdumpæŠ“åŒ…"></a>tcpdumpæŠ“åŒ…</h2><p>tcpdumpå¸¸ç”¨å‚æ•°ï¼š</p>
<ul>
<li>-c æŒ‡å®šåŒ…ä¸ªæ•°</li>
<li>-n ip,ç«¯å£ç”¨æ•°å­—æ–¹å¼æ˜¾ç¤º</li>
<li>-i æŒ‡å®šæ¥å£</li>
<li>port æŒ‡å®šç«¯å£</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@es-node03 ~]<span class="comment"># tcpdump -n -c 30 port 22 -i ens160</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="SYNæ´ªæ°´æ”»å‡»"><a href="#SYNæ´ªæ°´æ”»å‡»" class="headerlink" title="SYNæ´ªæ°´æ”»å‡»"></a>SYNæ´ªæ°´æ”»å‡»</h2><p><strong>SYNæ´ªæ°´æ”»å‡»ä¸»è¦æºäº</strong>ï¼š tcpåè®®çš„ä¸‰æ¬¡æ¡æ‰‹æœºåˆ¶<br><strong>SYNæ´ªæ°´æ”»å‡»çš„è¿‡ç¨‹</strong>ï¼š</p>
<ul>
<li>åœ¨æœåŠ¡ç«¯è¿”å›ä¸€ä¸ªç¡®è®¤çš„SYN-ACKåŒ…çš„æ—¶å€™æœ‰ä¸ªæ½œåœ¨çš„å¼Šç«¯ï¼Œå¦‚æœå‘èµ·çš„å®¢æˆ·æ˜¯ä¸€ä¸ªä¸å­˜åœ¨çš„å®¢æˆ·ç«¯ï¼Œé‚£ä¹ˆæœåŠ¡ç«¯å°±ä¸ä¼šæ¥åˆ°å®¢æˆ·ç«¯å›åº”çš„ACKåŒ…ã€‚</li>
<li>è¿™æ—¶æœåŠ¡ç«¯éœ€è¦è€—è´¹ä¸€å®šçš„æ•°é‡çš„ç³»ç»Ÿå†…å­˜æ¥ç­‰å¾…è¿™ä¸ª<strong>æœªå†³çš„è¿æ¥</strong>ï¼Œç›´åˆ°ç­‰å¾…è¶…å…³é—­æ—¶é—´ï¼Œæ‰èƒ½æ–½æ”¾å†…å­˜ã€‚</li>
<li>å¦‚æœæ¶æ„è€…é€šè¿‡é€šè¿‡ipæ¬ºéª—ï¼Œå‘é€å¤§é‡SYNåŒ…ç»™å—å®³è€…ç³»ç»Ÿï¼Œå¯¼è‡´æœåŠ¡ç«¯å­˜åœ¨å¤§é‡æœªå†³çš„è¿æ¥å¹¶å ç”¨å¤§é‡å†…å­˜å’Œtcpè¿æ¥ï¼Œä»è€Œå¯¼è‡´æ­£å¸¸å®¢æˆ·ç«¯æ— æ³•è®¿é—®æœåŠ¡ç«¯ï¼Œè¿™å°±æ˜¯SYNæ´ªæ°´æ”»å‡»çš„è¿‡ç¨‹ã€‚</li>
</ul>
<p>ä½¿ç”¨awlä¼ªè£…MACå¯¹å†…ç½‘çš„æœåŠ¡å™¨æ–½å®synæ´ªæ°´æ”»å‡»<br>awlä¸‹è½½åœ°å€ï¼š<a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?url=aHR0cHM6Ly9waW5jaGVuZy5sYW56b3VzLmNvbS9pajlkeGRxM2FxZA==">https://pincheng.lanzous.com/ij9dxdq3aqd</a></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@es-node03 ~]<span class="comment"># tar -xf awl-0.2.tar.gz </span></span><br><span class="line">[root@es-node03 ~]<span class="comment"># cd awl-0.2/</span></span><br><span class="line">[root@es-node03 ~/awl-0.2]<span class="comment"># ./configure &amp;&amp; make -j 4 &amp;&amp; make install</span></span><br><span class="line">[root@es-node03 ~/awl-0.2]<span class="comment"># which awl</span></span><br><span class="line">/usr/local/bin/awl</span><br><span class="line"></span><br><span class="line">[root@es-node03 ~/awl-0.2]<span class="comment"># ping 192.168.200.153</span></span><br><span class="line">PING 192.168.200.153 (192.168.200.153) 56(84) bytes of data.</span><br><span class="line">64 bytes from 192.168.200.153: icmp_seq=1 ttl=64 time=0.322 ms</span><br><span class="line">[root@es-node03 ~]<span class="comment"># arp -n | grep 153</span></span><br><span class="line">192.168.200.153          ether   00:50:56:9d:0b:0b   C    ens160</span><br><span class="line"><span class="comment">#è·å–ç›®æ ‡ä¸»æœºmacåœ°å€</span></span><br></pre></td></tr></tbody></table></figure>
<p>awl çš„æ ¼å¼å¦‚ä¸‹:<br><code>awl -i ens160 -m 00:50:56:9d:0b:0b -d 192.168.200.153 -p 80</code><br>å‚æ•°å¦‚ä¸‹:</p>
<ul>
<li>-i å‘é€åŒ…çš„æ¥å£,å¦‚æœçœç•¥é»˜è®¤æ˜¯eth0</li>
<li>-m è¢«æ”»å‡»æœºå™¨çš„macåœ°å€,ç¨‹åºä¸èƒ½æ ¹æ®è¢«æ”»å‡»IPå¾—åˆ°MAC,éœ€è¦æ‰‹å·¥æŒ‡å®š.å…ˆping ç›®æ ‡IP,å†arp -aå°±å¯ä»¥çœ‹åˆ°.<br>å¦‚æœçœç•¥åˆ™ä¸ºff:ff:ff:ff:ff:ff :è¿™è¡¨ç¤ºå‘åŒä¸€ç½‘æ®µå…§çš„æ‰€æœ‰ä¸»æœºå‘å‡ºARPå¹¿æ’­ï¼Œè¿›è¡ŒSYNæ”»å‡»ï¼Œè¿˜å®¹æ˜“ä½¿æ•´ä¸ªå±€åŸŸç½‘ç˜«ç—ª</li>
<li>-d è¢«æ”»å‡»æœºå™¨çš„IP</li>
<li>-p è¢«æ”»å‡»æœºå™¨çš„ç«¯å£.<br>è¿™é‡Œæ³¨æ„ï¼Œæ‰‹åŠ¨æŒ‡å®š-iå‚æ•°å¾ˆé‡è¦ï¼Œæ¯”å¦‚æˆ‘ä»¬çš„ç½‘å¡æ˜¯ens160,é‚£å°±è¦æŒ‡å®š -i ens160ï¼Œalvinçš„å®æµ‹ç»“æœæ˜¾ç¤ºï¼Œä¸è¿™æ ·æŒ‡å®šçš„æ—¶å€™ï¼Œæ”»å‡»æ— æ•ˆã€‚</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@es-node03 ~]<span class="comment"># netstat -na | grep "SYN_RECV"</span></span><br><span class="line">tcp        0      0 192.168.200.153:80      218.149.245.64:17552    SYN_RECV   </span><br><span class="line">tcp        0      0 192.168.200.153:80      111.187.179.3:49721     SYN_RECV   </span><br><span class="line">tcp        0      0 192.168.200.153:80      59.171.38.91:26277      SYN_RECV   </span><br><span class="line">tcp        0      0 192.168.200.153:80      17.139.112.127:34437    SYN_RECV</span><br><span class="line">...</span><br></pre></td></tr></tbody></table></figure>

<h1 id="æ–‡ä»¶ç›¸å…³å±æ€§"><a href="#æ–‡ä»¶ç›¸å…³å±æ€§" class="headerlink" title="æ–‡ä»¶ç›¸å…³å±æ€§"></a>æ–‡ä»¶ç›¸å…³å±æ€§</h1><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@f felix]<span class="comment"># ls -lih</span></span><br><span class="line">total 8.0K</span><br><span class="line">537327051 drwxr-xr-x 2 root root 6 2019-09-29 16:59 felix1</span><br><span class="line">        2385 -             rw-r--r-   -               1              root  root   0     2019-09-30 11:00 felix10.txt</span><br><span class="line">       inode æ–‡ä»¶ç±»å‹  æƒé™     SElinux         ç¡¬é“¾æ¥æ•°    å±ä¸» å±ç»„  å¤§å°  ä¿®æ”¹æ—¶é—´            æ–‡ä»¶å</span><br></pre></td></tr></tbody></table></figure>
<h2 id="ç´¢å¼•èŠ‚ç‚¹inode-amp-ç£ç›˜å—Block"><a href="#ç´¢å¼•èŠ‚ç‚¹inode-amp-ç£ç›˜å—Block" class="headerlink" title="ç´¢å¼•èŠ‚ç‚¹inode&amp;ç£ç›˜å—Block"></a>ç´¢å¼•èŠ‚ç‚¹inode&amp;ç£ç›˜å—Block</h2><p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-104.png" alt="Linuxæ–‡ä»¶è®¿é—®æµç¨‹"></p>
<ul>
<li><p><strong>inodeï¼š</strong></p>
</li>
<li><p>æ¦‚å¿µï¼šç´¢å¼•èŠ‚ç‚¹çš„æ¦‚å¿µå‡ºåœ¨extæ–‡ä»¶ç³»ç»Ÿä¸­ï¼ˆext2 ext3 ext4ï¼‰ï¼Œåœ¨ç£ç›˜è¿›è¡Œæ ¼å¼åŒ–(å»ºç«‹æ–‡ä»¶ç³»ç»Ÿ)æ“ä½œæ—¶ï¼Œä¼šç”Ÿæˆå¤§é‡çš„inodeå’Œblockï¼Œæ‰¾åˆ°ä¸€ä¸ªæ–‡ä»¶æœ€ç»ˆéƒ½è¦é€šè¿‡ç´¢å¼•èŠ‚ç‚¹inodeæ‰èƒ½æ‰¾åˆ°ï¼ˆç›¸å½“äºä¹¦çš„ç›®å½•ï¼‰ã€‚</p>
</li>
<li><p>å®šä¹‰ï¼šç±»ä¼¼äºæ–‡ä»¶çš„èº«ä»½è¯ï¼Œç´¢å¼•èŠ‚ç‚¹æ˜¯æ–‡ä»¶åœ¨ç³»ç»Ÿä¸­çš„å”¯ä¸€æ ‡è¯†ã€‚ç´¢å¼•èŠ‚ç‚¹æ˜¯ç¡¬ç›˜ä¸Šçš„ä¸€å—å­˜å‚¨ç©ºé—´ã€‚å¤§å°256å­—èŠ‚æˆ–512å­—èŠ‚ã€‚</p>
</li>
<li><p>ä½œç”¨ï¼šç´¢å¼•èŠ‚ç‚¹é‡Œå­˜æ”¾çš„æ•°æ®æ˜¯æ–‡ä»¶çš„å±æ€§ï¼ˆå¤§å°ã€æ—¶é—´ã€ç”¨æˆ·å’Œç»„ã€æƒé™ç­‰ï¼‰å”¯ç‹¬ä¸åŒ…å«æ–‡ä»¶åï¼ˆæ–‡ä»¶ååœ¨ä¸Šçº§ç›®å½•çš„blocké‡Œï¼‰ã€‚åŒæ—¶å­˜æ”¾æŒ‡å‘æ–‡ä»¶Blockçš„æŒ‡é’ˆï¼ˆç±»ä¼¼äºè½¯é“¾æ¥ï¼‰ã€‚</p>
</li>
<li><p>ç‰¹ç‚¹ï¼š1.åœ¨ext3/ext4æ–‡ä»¶ç³»ç»Ÿ(C5/C6é»˜è®¤æ–‡ä»¶ç³»ç»Ÿ)ä¸‹ï¼Œä¸€ä¸ªéç©ºæ–‡ä»¶è‡³å°‘è¦å ç”¨ä¸€ä¸ªä¸”åªæœ‰ä¸€ä¸ªInodeä»¥åŠä¸€ä¸ªæˆ–å¤šä¸ªBlockã€‚åœ¨æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œåˆå§‹åŒ–æ—¶ï¼ŒBlockæ•°é‡è¿œå¤§äºinodeæ•°é‡ã€‚</p>
<ol start="2">
<li>InodeèŠ‚ç‚¹å·ç›¸åŒçš„æ–‡ä»¶ï¼Œäº’ä¸ºç¡¬é“¾æ¥æ–‡ä»¶ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªæ–‡ä»¶çš„ä¸åŒå…¥å£ã€‚</li>
<li>Inodeåœ¨æŸä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼ˆåˆ†åŒºï¼‰å†…æ˜¯å”¯ä¸€çš„ã€‚   </li>
</ol>
</li>
<li><p><strong>Blockï¼š</strong></p>
</li>
<li><p>ä½œç”¨ï¼šç”¨æ¥å­˜æ”¾å®é™…æ•°æ®çš„å®ä½“å•å…ƒï¼ˆextæ–‡ä»¶ç³»ç»Ÿä¸€èˆ¬æœ€å¤§ä¸º4KBï¼‰ï¼Œå³ç”¨æ¥å­˜æ”¾çœŸå®æ•°æ®ï¼Œä¾‹å¦‚ï¼šç…§ç‰‡ã€è§†é¢‘ç­‰æ™®é€šæ–‡ä»¶æ•°æ®ï¼Œå•ä¸ªå¤§çš„æ–‡ä»¶éœ€è¦å ç”¨å¤šä¸ªBlockå—æ¥å­˜å‚¨ï¼Œç‰¹åˆ«å°çš„å•ä¸ªæ–‡ä»¶å¦‚æœä¸èƒ½å æ»¡æ•´ä¸ªBlockå—ï¼Œå‰©ä½™çš„ç©ºé—´ä¹Ÿæ— æ³•å†åˆ©ç”¨ã€‚</p>
</li>
<li><p>ç‰¹ç‚¹ï¼š</p>
<ol>
<li>ç£ç›˜è¯»å–æ•°æ®æ˜¯æŒ‰Blockä¸ºå•ä½å­˜å–çš„ã€‚</li>
<li>æ¯è¯»å–ä¸€ä¸ªBlockå°±ä¼šæ¶ˆè€—ä¸€æ¬¡ç£ç›˜I/O</li>
<li>è‹¥æ–‡ä»¶æ¯”è¾ƒå¤§ï¼Œä¸€ä¸ªæ–‡ä»¶å¯èƒ½å ç”¨å¤šä¸ªBlockã€‚</li>
<li>è‹¥æ–‡ä»¶æ¯”è¾ƒå°ï¼Œä¸€ä¸ªBlockå‰©ä½™ç©ºé—´ä¼šè¢«æµªè´¹ï¼Œæ— è®ºå†…å®¹æœ‰å¤šå°ã€‚</li>
<li>blockå¤§å°ä¹Ÿæ˜¯æ ¼å¼åŒ–æ—¶ç¡®å®šçš„ï¼Œå‘½ä»¤æ˜¯ mkfs.ext4 -b 2048 -I 256 /dev/sdbã€‚</li>
</ol>
</li>
</ul>
<h2 id="inode-amp-blockç®¡ç†ï¼š"><a href="#inode-amp-blockç®¡ç†ï¼š" class="headerlink" title="inode&amp;blockç®¡ç†ï¼š"></a>inode&amp;blockç®¡ç†ï¼š</h2><p>æŸ¥çœ‹Inodesæ•°é‡ï¼š<code>df -i</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@f felix]<span class="comment"># df -i</span></span><br><span class="line">æ–‡ä»¶ç³»ç»Ÿ          æ€»æ•°       å·²ä½¿ç”¨      å‰©ä½™        ä½¿ç”¨ç™¾åˆ†æ¯”  æŒ‚è½½ç‚¹</span><br><span class="line">Filesystem        Inodes      IUsed     IFree           IUse%    Mounted on</span><br><span class="line">/dev/vda3        207092736  99830     206992906    1%        /</span><br></pre></td></tr></tbody></table></figure>
<p>æŸ¥çœ‹Blockæ•°é‡ï¼š<code>df -h</code></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@f felix]<span class="comment"># df -h</span></span><br><span class="line">æ–‡ä»¶ç³»ç»Ÿ         å¤§å°         å·²ä½¿ç”¨     ç©ºé—²         ä½¿ç”¨ç™¾åˆ†æ¯”  æŒ‚è½½ç‚¹</span><br><span class="line">Filesystem        Size          Used       Avail           Use%      Mounted on</span><br><span class="line">/dev/vda3        198G         4.3G        194G           3%         /</span><br></pre></td></tr></tbody></table></figure>
<p>ç”Ÿäº§ç¯å¢ƒä¸‹æ’æŸ¥ç¡¬ç›˜æ»¡çš„åŸå› åŠè§£æ³•ï¼š<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-105.png" alt="disk"></p>
<h2 id="linuxæ–‡ä»¶ç±»å‹"><a href="#linuxæ–‡ä»¶ç±»å‹" class="headerlink" title="linuxæ–‡ä»¶ç±»å‹"></a>linuxæ–‡ä»¶ç±»å‹</h2><p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-106.png" alt="filetype"></p>
<h2 id="æ–‡ä»¶æƒé™æœºåˆ¶"><a href="#æ–‡ä»¶æƒé™æœºåˆ¶" class="headerlink" title="æ–‡ä»¶æƒé™æœºåˆ¶"></a>æ–‡ä»¶æƒé™æœºåˆ¶</h2><p>æƒé™æ˜¯æ“ä½œç³»ç»Ÿç”¨æ¥é™åˆ¶å¯¹èµ„æºè®¿é—®çš„æœºåˆ¶ï¼Œæƒé™ä¸€èˆ¬åˆ†ä¸ºè¯»ã€å†™ã€æ‰§è¡Œã€‚ç³»ç»Ÿä¸­æ¯ä¸ªæ–‡ä»¶éƒ½æ‹¥æœ‰ç‰¹å®šçš„æƒé™ã€æ‰€å±ç”¨æˆ·åŠæ‰€å±ç»„ï¼Œé€šè¿‡è¿™æ ·çš„æœºåˆ¶æ¥é™åˆ¶å“ªäº›ç”¨æˆ·ã€å“ªäº›ç»„å¯ä»¥å¯¹ç‰¹å®šæ–‡ä»¶è¿›è¡Œä»€ä¹ˆæ ·çš„æ“ä½œã€‚<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-107.png" alt="upload successful"></p>
<h2 id="SELinux"><a href="#SELinux" class="headerlink" title="SELinux"></a>SELinux</h2><p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-108.png" alt="selinux"></p>
<h2 id="Linuxè½¯ç¡¬é“¾æ¥"><a href="#Linuxè½¯ç¡¬é“¾æ¥" class="headerlink" title="Linuxè½¯ç¡¬é“¾æ¥"></a>Linuxè½¯ç¡¬é“¾æ¥</h2><p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-109.png" alt="headlinksoftlink"><br><strong>æœ‰å…³ç¡¬é“¾æ¥ï¼š</strong></p>
<ol>
<li>å…·æœ‰ç›¸åŒinodeèŠ‚ç‚¹å·çš„å¤šä¸ªæ–‡ä»¶äº’ä¸ºç¡¬é“¾æ¥æ–‡ä»¶ï¼Œç›¸å½“äºä¸€ä¸ªæˆ¿é—´ï¼ˆæ–‡ä»¶ï¼‰å¼€äº†å¤šä¸ªé—¨ï¼ˆç¡¬é“¾æ¥ï¼‰ï¼›</li>
<li>åˆ é™¤ç¡¬é“¾æ¥æ–‡ä»¶æˆ–è€…åˆ é™¤æºæ–‡ä»¶ä»»æ„ä¹‹ä¸€ï¼Œæ–‡ä»¶å®ä½“å¹¶æœªè¢«åˆ é™¤ï¼›</li>
<li>åªæœ‰åˆ é™¤äº†æºæ–‡ä»¶å’Œæ‰€æœ‰å¯¹åº”çš„ç¡¬é“¾æ¥æ–‡ä»¶ï¼Œæ–‡ä»¶å®ä½“æ‰ä¼šè¢«åˆ é™¤ï¼›</li>
<li>ç¡¬é“¾æ¥æ–‡ä»¶æ˜¯æ–‡ä»¶çš„å¦ä¸€ä¸ªå…¥å£ï¼›</li>
<li>å¯ä»¥é€šè¿‡ç»™æ–‡ä»¶è®¾ç½®ç¡¬é“¾æ¥æ–‡ä»¶æ¥é˜²æ­¢é‡è¦æ–‡ä»¶è¢«è¯¯åˆ ï¼ˆé˜²åˆ ä¸é˜²æ”¹ï¼Œå¤‡ä»½ï¼Œé˜²åˆ åˆé˜²æ”¹ã€‚ï¼‰ï¼›</li>
<li>åˆ›å»ºç¡¬é“¾æ¥å‘½ä»¤ ln æºæ–‡ä»¶ ç¡¬é“¾æ¥æ–‡ä»¶ï¼›</li>
<li>ç¡¬é“¾æ¥æ–‡ä»¶æ˜¯æ™®é€šæ–‡ä»¶ -ï¼Œå¯ä»¥ç”¨rmåˆ é™¤ï¼›</li>
<li>å¯¹äºé™æ€æ–‡ä»¶ï¼ˆæ²¡æœ‰è¿›ç¨‹æ­£åœ¨è°ƒç”¨ï¼‰ï¼Œå½“ç¡¬é“¾æ¥æ•°ä¸º0æ—¶æ–‡ä»¶å°±è¢«åˆ é™¤ã€‚æ³¨æ„ï¼šå¦‚æœæœ‰è¿›ç¨‹æ­£åœ¨è°ƒç”¨ï¼Œåˆ™æ— æ³•åˆ é™¤æˆ–è€…å³ä½¿æ–‡ä»¶åè¢«åˆ é™¤ä½†ç©ºé—´ä¸ä¼šé‡Šæ”¾ã€‚</li>
<li>ç›®å½•/ å’Œ ç›®å½•/.äº’ä¸ºç¡¬é“¾æ¥ï¼Œç›®å½•/ å’Œ ç›®å½•/å­ç›®å½•/.. äº’ä¸ºç¡¬é“¾æ¥</li>
</ol>
<p><strong>ç¡¬é“¾æ¥æ‰©å±•ï¼š</strong><br>cp æ“ä½œæ…¢äº mv å‘½ä»¤<br>cpå‘½ä»¤å°†æºæ–‡ä»¶å’Œcpå‡ºçš„æ–°æ–‡ä»¶å®Œå…¨ç‹¬ç«‹æˆäº†ä¸¤ä¸ªä¸ªä½“ï¼ˆå³æ–°æ–‡ä»¶æ”¹å˜äº†åŸæœ¬æŒ‡å‘çš„inodeå’Œblockï¼‰ã€‚<br>mvå‘½ä»¤åªæ˜¯å°†æ–‡ä»¶åæ”¹äº†ï¼Œå¹¶æœªé‡æ–°æŒ‡å‘æ–°çš„inodeå’Œblockã€‚</p>
<p><strong>æœ‰å…³è½¯é“¾æ¥ï¼š</strong></p>
<ol>
<li>è½¯é“¾æ¥ç±»ä¼¼windowsç³»ç»Ÿçš„å¿«æ·æ–¹å¼ï¼›</li>
<li>è½¯é“¾æ¥é‡Œé¢å­˜æ”¾çš„æ˜¯æºæ–‡ä»¶çš„è·¯å¾„ï¼ŒæŒ‡å‘æºæ–‡ä»¶çš„æ–‡ä»¶åï¼›</li>
<li>åˆ é™¤æºæ–‡ä»¶ï¼Œè½¯é“¾æ¥ä¾ç„¶å­˜åœ¨ï¼Œä½†æ— æ³•è®¿é—®æºæ–‡ä»¶å†…å®¹ï¼›</li>
<li>è½¯é“¾æ¥å¤±æ•ˆæ—¶ä¸€èˆ¬æ˜¯ç™½å­—çº¢åº•é—ªçƒï¼›</li>
<li>åˆ›å»ºè½¯é“¾æ¥å‘½ä»¤ ln -s æºæ–‡ä»¶ è½¯é“¾æ¥æ–‡ä»¶ï¼›</li>
<li>è½¯é“¾æ¥å’Œæºæ–‡ä»¶æ˜¯ä¸åŒçš„æ–‡ä»¶ï¼Œæ–‡ä»¶ç±»å‹ä¹Ÿä¸åŒï¼Œinodeå·ä¹Ÿä¸åŒï¼›</li>
<li>è½¯é“¾æ¥çš„æ–‡ä»¶ç±»å‹æ˜¯â€œlâ€ï¼Œå¯ä»¥ç”¨rmåˆ é™¤ã€‚</li>
</ol>
<p><strong>è½¯ç¡¬é“¾æ¥çš„åŒºåˆ«ï¼š</strong></p>
<ol>
<li>åŸç†ä¸Šï¼Œç¡¬é“¾æ¥å’Œæºæ–‡ä»¶çš„inodeèŠ‚ç‚¹å·ç›¸åŒï¼Œä¸¤è€…äº’ä¸ºç¡¬é“¾æ¥ã€‚è½¯è¿æ¥å’Œæºæ–‡ä»¶çš„inodeèŠ‚ç‚¹å·ä¸åŒï¼Œè¿›è€ŒæŒ‡å‘çš„blockä¹Ÿä¸åŒï¼Œè½¯è¿æ¥blockä¸­å­˜æ”¾äº†æºæ–‡ä»¶çš„è·¯å¾„å(æ–‡ä»¶å)ã€‚</li>
<li>å®é™…ä¸Šï¼Œç¡¬é“¾æ¥å’Œæºæ–‡ä»¶æ˜¯åŒä¸€ä»½æ–‡ä»¶ï¼Œè€Œè½¯è¿æ¥æ˜¯ç‹¬ç«‹çš„æ–‡ä»¶ï¼Œç±»ä¼¼äºå¿«æ·æ–¹å¼ï¼Œå­˜å‚¨ç€æºæ–‡ä»¶çš„ä½ç½®ä¿¡æ¯ä¾¿äºæŒ‡å‘ã€‚</li>
<li>ä½¿ç”¨é™åˆ¶ä¸Šï¼Œä¸èƒ½å¯¹ç›®å½•åˆ›å»ºç¡¬é“¾æ¥ï¼Œä¸èƒ½å¯¹ä¸åŒæ–‡ä»¶ç³»ç»Ÿåˆ›å»ºç¡¬é“¾æ¥ï¼Œä¸èƒ½å¯¹ä¸å­˜åœ¨çš„æ–‡ä»¶åˆ›å»ºç¡¬é“¾æ¥ï¼›å¯ä»¥å¯¹ç›®å½•åˆ›å»ºè½¯è¿æ¥ï¼Œå¯ä»¥è·¨æ–‡ä»¶ç³»ç»Ÿåˆ›å»ºè½¯è¿æ¥ï¼Œå¯ä»¥å¯¹ä¸å­˜åœ¨çš„æ–‡ä»¶åˆ›å»ºè½¯è¿æ¥ã€‚</li>
</ol>
<h2 id="æ–‡ä»¶çš„æ—¶é—´æˆ³"><a href="#æ–‡ä»¶çš„æ—¶é—´æˆ³" class="headerlink" title="æ–‡ä»¶çš„æ—¶é—´æˆ³"></a>æ–‡ä»¶çš„æ—¶é—´æˆ³</h2><p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-110.png" alt="upload successful"></p>
<h2 id="æ–‡ä»¶-amp-ç›®å½•æƒé™"><a href="#æ–‡ä»¶-amp-ç›®å½•æƒé™" class="headerlink" title="æ–‡ä»¶&amp;ç›®å½•æƒé™"></a>æ–‡ä»¶&amp;ç›®å½•æƒé™</h2><p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-111.png" alt="æ–‡ä»¶æƒé™"><br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-112.png" alt="ç›®å½•æƒé™"></p>
<p>LinuxåŸºç¡€æƒé™ 9ä¸ªå­—ç¬¦ï¼Œåˆ†ä¸‰ç»„ï¼Œä¸‰ä¸ªå­—ç¬¦ä¸€ç»„ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2362 drwxr-xr-x 2 root root   6 2019-10-09 16:24 1.txt</span><br></pre></td></tr></tbody></table></figure>
<p><code>rwx r-x r-x</code><br>å‰3å­—ç¬¦ï¼šç”¨æˆ·(å±ä¸»)æƒé™ä½<br>ä¸­3å­—ç¬¦ï¼šç”¨æˆ·ç»„(å±ç»„)æƒé™ä½<br>å3å­—ç¬¦ï¼šå…¶ä»–ç”¨æˆ·æƒé™ä½</p>
<p>æƒé™ä½ç½®ï¼ˆUGOï¼‰ï¼šrwxï¼Œè¯» 4ï¼Œå†™2ï¼Œå¯æ‰§è¡Œ1ï¼Œ- 0<br><strong>å¯è¯»r</strong>ï¼šè¡¨ç¤ºè¯»å–ã€æµè§ˆæ–‡ä»¶å†…å®¹ï¼ˆå³è¯»å–æ–‡ä»¶å®ä½“blockï¼‰çš„æƒé™ã€‚<br><strong>å¯å†™w</strong>ï¼šè¡¨ç¤ºå…·æœ‰æ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤æ–‡ä»¶å†…å®¹çš„æƒé™ã€‚</p>
<ol>
<li>å¦‚æœæ²¡æœ‰å¯å†™wçš„é…åˆï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨vimç¼–è¾‘æ–‡ä»¶æ—¶ä¼šæç¤ºæ— æ³•ç¼–è¾‘ï¼ˆä½†å¯ä»¥å¼ºåˆ¶ç¼–è¾‘ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨echoç­‰å‘½ä»¤è¿›è¡Œé‡å®šå‘æˆ–è¿½åŠ ã€‚</li>
<li>åˆ é™¤æ–‡ä»¶æˆ–åˆ›å»ºæ–‡ä»¶çš„æƒé™æ—¶å—çˆ¶ç›®å½•ï¼ˆä¸Šä¸€çº§ç›®å½•ï¼‰çš„æƒé™æ§åˆ¶çš„[å› ä¸ºæ–‡ä»¶åæ²¡æœ‰å­˜æ”¾å†Inodeé‡Œï¼‰ï¼Œè€Œæ˜¯åœ¨ä¸Šçº§ç›®å½•çš„Blocké‡Œå­˜æ”¾ç€ï¼Œè‹¥ä¿®æ”¹ä¸Šçº§ç›®å½•çš„Block(åˆ é™¤æ–‡ä»¶çš„æœ¬è´¨)ï¼Œå½“ç„¶ä¼šå—ä¸Šçº§ç›®å½•çš„Inodeçš„æƒé™æ§åˆ¶]ï¼Œå’Œæ–‡ä»¶æœ¬èº«çš„æƒé™æ— å…³ï¼Œå› æ­¤ï¼Œæ–‡ä»¶æœ¬èº«çš„å¯å†™wæƒé™ï¼Œå’Œæ–‡ä»¶æ˜¯å¦èƒ½è¢«åˆ é™¤æ— å…³ã€‚ï¼ˆæ‰“ç‹—ä¹Ÿè¦çœ‹ä¸»äººï¼‰</li>
</ol>
<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-113.png" alt="rm file"></p>
<p><strong>å¯æ‰§è¡Œx</strong>ï¼šå…·æœ‰æ‰§è¡Œæ–‡ä»¶çš„æƒé™</p>
<ol>
<li>æ–‡ä»¶æœ¬èº«è¦èƒ½å¤Ÿæ‰§è¡Œï¼ˆå‘½ä»¤ï¼Œè„šæœ¬ï¼‰</li>
<li>å¦‚æœæ˜¯æ™®é€šç”¨æˆ·ï¼ŒåŒæ—¶è¿˜éœ€è¦å…·å¤‡å¯è¯»rçš„æƒé™æ‰èƒ½å¤Ÿæ‰§è¡Œæ–‡ä»¶ã€‚</li>
<li>rootç”¨æˆ·åªè¦æœ‰å¯æ‰§è¡Œxçš„æƒé™å³å¯æ‰§è¡Œæ–‡ä»¶</li>
</ol>
<p><strong>umaskï¼š</strong>æ§åˆ¶é»˜è®¤æƒé™</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@es-node03 ~]<span class="comment"># umask</span></span><br><span class="line">0022</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ–‡ä»¶ï¼š</strong><br>åˆ›å»ºæ–‡ä»¶é»˜è®¤æœ€å¤§çš„æƒé™ä¸º666ï¼ˆ-rw-rw-rw-ï¼‰ï¼Œå…¶é»˜è®¤åˆ›å»ºçš„æ–‡ä»¶æ²¡æœ‰å¯æ‰§è¡Œæƒé™xä½ã€‚<br>é»˜è®¤æƒé™-umask=å®é™…æƒé™ #å¯¹äºæ–‡ä»¶å½“umaskä¸­å­˜åœ¨å¥‡æ•°ä½çš„æ—¶å€™ï¼Œåœ¨è®¡ç®—å®Œæ¯•åï¼Œå¥‡æ•°ä½åŠ 1</p>
<p><strong>ç›®å½•ï¼š</strong><br>åˆ›å»ºæ–‡ä»¶é»˜è®¤æœ€å¤§æƒé™ä¸º777ï¼ˆrwxrwxrwxï¼‰<br>é»˜è®¤æƒé™-umask=å®é™…æƒé™ </p>
<p><strong>ç‰¹æ®Šæƒé™3ä½ï¼š</strong><br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-114.png" alt="1"></p>
<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-115.png" alt="2"></p>
<p>ä¿®æ”¹ï¼šæ”¾åœ¨åŸºç¡€æƒé™æ•°å­—çš„å‰é¢<br>[root@oldboyedu /oldboy]# chmod 7755 abc &lt;==UGOä¸­åªè¦å­˜åœ¨xæƒé™ï¼Œåˆ™ç‰¹æ®Šæƒé™ä½ï¼ˆs,s,tï¼‰éƒ½ä¸ºå°å†™ï¼Œåä¹‹åˆ™éƒ½ä¸ºå¤§å†™<br>æ‰€ä»¥ç»“æœï¼šabc rwsr-sr-t</p>
<p><strong>suidï¼š</strong><br>SUIDä½œç”¨ï¼šsuidçš„ä½œç”¨å°±æ˜¯è®©æ™®é€šç”¨æˆ·å¯ä»¥åœ¨æ‰§è¡ŒæŸä¸ªè®¾ç½®äº†suidä½çš„å‘½ä»¤æˆ–ç¨‹åºæ—¶ï¼Œæ‹¥æœ‰å’Œrootç®¡ç†å‘˜ä¸€æ ·çš„èº«ä»½å’Œæƒé™ï¼ˆé»˜è®¤æƒ…å†µï¼‰ã€‚<br>ä¾‹å¦‚ï¼špasswdå‘½ä»¤<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-116.png" alt="passwdå‘½ä»¤"><br>ä»»ä½•äººæ‰§è¡Œpasswdè¿™ä¸ªå‘½ä»¤ï¼Œå°±ä¼šä»¥passwdè¿™ä¸ªå‘½ä»¤çš„å±ä¸»ï¼ˆå³ rootï¼‰ç›¸åŒçš„æƒé™æ¥æ‰§è¡Œpasswdã€‚è¿™å°±æ˜¯suidçš„ä½œç”¨ï¼ˆå°šæ–¹å®å‰‘ï¼‰</p>
<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-117.png" alt="3"></p>
<p>suidæ€»ç»“ï¼š</p>
<ol>
<li>suidåŠŸèƒ½æ—¶æ­£å¯¹äºŒè¿›åˆ¶å‘½ä»¤æˆ–ç¨‹åºçš„ï¼Œä¸èƒ½ç”¨åœ¨Shellç­‰ç±»å‹è„šæœ¬æ–‡ä»¶ä¸Šã€‚</li>
<li>ç”¨æˆ·æˆ–å±ä¸»å¯¹åº”çš„å‰ä¸‰ä½æƒé™çš„xä½ä¸Šï¼Œå¦‚æœæœ‰sï¼ˆSï¼‰å°±è¡¨ç¤ºå…·å¤‡suidæƒé™ã€‚</li>
<li>suidçš„ä½œç”¨å°±æ˜¯è®©æ™®é€šç”¨æˆ·å¯ä»¥åœ¨æ‰§è¡ŒæŸä¸ªè®¾ç½®äº†suidä½å‘½ä»¤æˆ–ç¨‹åºæ—¶ï¼Œæ‹¥æœ‰å’Œrootç®¡ç†å‘˜ä¸€æ ·çš„èº«ä»½å’Œæƒé™ï¼ˆé»˜è®¤ï¼‰ã€‚</li>
<li>äºŒè¿›åˆ¶å‘½ä»¤ç¨‹åºéœ€è¦æœ‰å¯æ‰§è¡Œæƒé™xé…åˆæ‰è¡Œã€‚</li>
<li>suidå¯¹åº”çš„èº«ä»½å’Œæƒé™ä»Šåœ¨ç¨‹åºå‘½ä»¤æ‰§è¡Œè¿‡ç¨‹ä¸­æœ‰æ•ˆã€‚</li>
<li>suidæ˜¯ä¸€æŠŠåŒåˆƒå‰‘ï¼Œæ˜¯ä¸€ä¸ªæ¯”è¾ƒå±é™©çš„åŠŸèƒ½ï¼Œå¯¹ç³»ç»Ÿå®‰å…¨æœ‰ä¸€å®šçš„å¨èƒï¼Œä¼ä¸šé‡Œç”¨æˆ·æˆæƒå¯ä»¥ä½¿ç”¨sudoç­‰æ›¿ä»£sgidåŠŸèƒ½ã€‚</li>
<li>åœ¨è¿›è¡Œå®‰å…¨ä¼˜åŒ–æ—¶ï¼Œç³»ç»Ÿä¸­é»˜è®¤è®¾ç½®äº†suidæƒé™çš„å‘½ä»¤è¦è¢«å–æ¶ˆæ‰ã€‚</li>
</ol>
<p><strong>sgidï¼š</strong><br>å¯¹äºäºŒè¿›åˆ¶å‘½ä»¤æˆ–è€…ç¨‹åºæ¥è¯´ï¼Œsgidçš„åŠŸèƒ½å’ŒsuidåŸºæœ¬ç›¸åŒï¼Œå”¯ä¸€åŒºåˆ«æ˜¯suidæ˜¯è·å¾—å‘½ä»¤å±ä¸»çš„èº«ä»½å’Œæƒé™ï¼Œè€Œsgidåˆ™æ˜¯è·å¾—å‘½ä»¤å±ç»„çš„èº«ä»½å’Œæƒé™ã€‚</p>
<p>sgidæ€»ç»“ï¼š</p>
<ol>
<li>ä¸suidä¸åŒçš„æ˜¯ï¼Œsgidæ—¢å¯ä»¥é’ˆå¯¹æ–‡ä»¶ï¼Œäº¦å¯ä»¥é’ˆå¯¹ç›®å½•ã€‚</li>
<li>sgidçš„æƒé™æ˜¯é’ˆå¯¹ç”¨æˆ·ç»„æƒé™ä½çš„ã€‚</li>
</ol>
<ul>
<li>å¯¹äºæ–‡ä»¶æ¥è¯´ï¼Œsgidï¼š<ul>
<li>sgidä»…å¯¹äºŒè¿›åˆ¶å‘½ä»¤åŠç¨‹åºæœ‰æ•ˆã€‚</li>
<li>äºŒè¿›åˆ¶å‘½ä»¤æˆ–ç¨‹åºï¼Œä¹Ÿéœ€è¦æœ‰å¯æ‰§è¡Œæƒé™xé…åˆã€‚</li>
<li>æ‰§è¡Œå‘½ä»¤çš„ä»»æ„ç”¨æˆ·å¯ä»¥è·å¾—è¯¥å‘½ä»¤ç¨‹åºæ‰§è¡ŒæœŸé—´æ‰€å±ç»„çš„èº«ä»½å’Œæƒé™ã€‚</li>
</ul>
</li>
<li>å¯¹äºç›®å½•æ¥è¯´ï¼Œsgidï¼š<ul>
<li>Linuxé‡Œé»˜è®¤æƒ…å†µæ‰€æœ‰åˆ›å»ºï¼Œé»˜è®¤ç”¨æˆ·å’Œç»„éƒ½æ˜¯è‡ªèº«ã€‚</li>
<li>sgidå¯ä»¥è®©ç”¨æˆ·åœ¨æ­¤ç›®å½•ä¸‹åˆ›å»ºçš„æ–‡ä»¶å’Œç›®å½•å…·æœ‰å’Œæ­¤ç›®å½•ç›¸åŒçš„ç”¨æˆ·ç»„è®¾ç½®</li>
</ul>
</li>
</ul>
<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-118.png" alt="3"></p>
<p><strong>ç²˜æ»ä½ï¼š</strong><br>æ–‡ä»¶å¤¹æƒé™å…¨éƒ¨æ‰“å¼€ï¼Œä½†æ˜¯ç›®å½•æœ¬èº«åªèƒ½è¢«å±ä¸»æˆ–rootåˆ é™¤ã€‚</p>
<p><strong>æ–‡ä»¶å±ä¸»ï¼Œå±ç»„çš„ç‰¹æ®Šæƒ…å†µï¼š</strong><br>å½“æ–‡ä»¶æˆ–ç›®å½•çš„ç”¨æˆ·æˆ–ç”¨æˆ·ç»„è¢«åˆ é™¤æ—¶ï¼Œæ–‡ä»¶å¯¹åº”çš„å±ä¸»å’Œå±ç»„ä½ç½®å°±ä¼šæ˜¾ç¤ºUIDæˆ–GIDã€‚<br>ä¿®å¤æ–¹æ³•ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">useradd ç”¨æˆ·å -u UID</span><br><span class="line">groupadd -g GID ç»„å </span><br></pre></td></tr></tbody></table></figure>

<h2 id="ç”Ÿäº§ç¯å¢ƒåº”ç”¨"><a href="#ç”Ÿäº§ç¯å¢ƒåº”ç”¨" class="headerlink" title="ç”Ÿäº§ç¯å¢ƒåº”ç”¨"></a>ç”Ÿäº§ç¯å¢ƒåº”ç”¨</h2><p>å®‰å…¨æƒé™çš„ä¸´ç•Œç‚¹ï¼š<br>æ–‡ä»¶çš„å®‰å…¨ä¸´ç•Œç‚¹ï¼š<code>644</code><br>ç›®å½•çš„å®‰å…¨ä¸´ç•Œç‚¹ï¼š<code>755</code></p>
<p>æ–‡ä»¶åŠ è§£é”ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@S1 ~]<span class="comment"># lsattr /etc/passwd</span></span><br><span class="line">---------------- /etc/passwd</span><br><span class="line">[root@S1 ~]<span class="comment"># chattr +i /etc/passwd   &lt;==é”å®šæ–‡ä»¶ï¼Œä¸ç»™åˆ é™¤ä¸ç»™ä¿®æ”¹</span></span><br><span class="line">[root@S1 ~]<span class="comment"># lsattr /etc/passwd</span></span><br><span class="line">----i----------- /etc/passwd</span><br><span class="line">[root@S1 ~]<span class="comment"># cp /etc/passwd{,.ori}</span></span><br><span class="line"><span class="built_in">cp</span>: overwrite â€˜/etc/passwd.oriâ€™? y</span><br><span class="line">[root@S1 ~]<span class="comment"># rm -rf /etc/passwd</span></span><br><span class="line"><span class="built_in">rm</span>: cannot remove â€˜/etc/passwdâ€™: Operation not permitted</span><br><span class="line">[root@S1 ~]<span class="comment"># echo ddd &gt; /etc/passwd</span></span><br><span class="line">-bash: /etc/passwd: Permission denied</span><br><span class="line"></span><br><span class="line">[root@S1 ~]<span class="comment"># touch felix.txt</span></span><br><span class="line">[root@S1 ~]<span class="comment"># chattr +a felix.txt  &lt;==å¯ä»¥è¿½åŠ å†…å®¹ï¼Œä½†ä¸èƒ½åˆ é™¤ã€‚</span></span><br><span class="line">[root@S1 ~]<span class="comment"># lsattr felix.txt </span></span><br><span class="line">-----a---------- felix.txt</span><br><span class="line">[root@S1 ~]<span class="comment"># echo 123 &gt;&gt; felix.txt </span></span><br><span class="line">[root@S1 ~]<span class="comment"># echo 123 &gt;&gt; felix.txt </span></span><br><span class="line">[root@S1 ~]<span class="comment"># echo 123 &gt;&gt; felix.txt </span></span><br><span class="line">[root@S1 ~]<span class="comment"># cat felix.txt</span></span><br><span class="line">123</span><br><span class="line">123</span><br><span class="line">123</span><br><span class="line">[root@S1 ~]<span class="comment"># rm -rf felix.txt </span></span><br><span class="line"><span class="built_in">rm</span>: cannot remove â€˜felix.txtâ€™: Operation not permitted</span><br></pre></td></tr></tbody></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-119.png" alt="4"></p>
<h2 id="ç”¨æˆ·å’Œç”¨æˆ·ç»„"><a href="#ç”¨æˆ·å’Œç”¨æˆ·ç»„" class="headerlink" title="ç”¨æˆ·å’Œç”¨æˆ·ç»„"></a>ç”¨æˆ·å’Œç”¨æˆ·ç»„</h2><p>ç”¨æˆ·ï¼Œç”¨æˆ·ç»„ï¼Œç®¡ç†å‘˜ä¹‹é—´çš„å…³ç³»ï¼š</p>
<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-120.png" alt="5"><br>UID<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-121.png" alt="6"></p>
<p>ç›¸å…³é…ç½®æ–‡ä»¶ï¼š<br><code>/etc/passwd</code> å­˜å‚¨å½“å‰ç³»ç»Ÿä¸­æ‰€æœ‰ç”¨æˆ·çš„ä¿¡æ¯<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-122.png" alt="7"><br>1.rootç”¨æˆ·ç¼–å·å›ºå®šä¸º0<br>2.é™¤äº†rootç”¨æˆ·å¤–çš„å…¶ä»–ç”¨æˆ·ï¼Œå½“ç”¨æˆ·è¢«åˆ›å»ºæ—¶ï¼Œä¼šåœ¨/homeç›®å½•ä¸‹ä¸ºç”¨æˆ·åˆ›å»ºä¸€ä¸ªå’Œç”¨æˆ·åç›¸åŒçš„ç›®å½•ä½œä¸ºè¿™ä¸ªç”¨æˆ·çš„å®¶ç›®å½•ã€‚</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@lihuaning maildrop]<span class="comment"># cat /etc/shells </span></span><br><span class="line">/bin/sh</span><br><span class="line">/bin/bash</span><br><span class="line">/sbin/nologin</span><br><span class="line">/usr/bin/sh</span><br><span class="line">/usr/bin/bash</span><br><span class="line">/usr/sbin/nologin</span><br><span class="line">/bin/tcsh</span><br><span class="line">/bin/csh</span><br><span class="line">[root@lihuaning maildrop]<span class="comment"># ls -l /bin/sh</span></span><br><span class="line">lrwxrwxrwx. 1 root root 4 2019-07-12 22:48 /bin/sh -&gt; bash</span><br></pre></td></tr></tbody></table></figure>
<p>bashæ˜¯shçš„æ‰©å±•ï¼Œshæ˜¯bashçš„è½¯é“¾æ¥</p>
<p><code>/etc/shadow</code> å­˜å‚¨å½“å‰ç³»ç»Ÿä¸­æ‰€æœ‰ç”¨æˆ·çš„å¯†ç ä¿¡æ¯ï¼Œshadowé…ç½®æ–‡ä»¶çš„è¡Œæ•°ä¸passwdæ–‡ä»¶ç›¸åŒã€‚<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-123.png" alt="8"></p>
<p><strong>æ·»åŠ ç”¨æˆ·ï¼š</strong><br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-124.png" alt="9"></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[root@lihuaning ~]<span class="comment"># cat /etc/default/useradd  &lt;==useraddé…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="comment"># useradd defaults file</span></span><br><span class="line">GROUP=100  &lt;==ä¾èµ–äº/etc/login.defs çš„USERGROUP_ENABå‚æ•°ï¼Œå¦‚æœnoï¼Œåˆ™æ­¤å¤„æ§åˆ¶</span><br><span class="line">HOME=/home  &lt;==å®šä¹‰é»˜è®¤å®¶ç›®å½•ä½ç½®</span><br><span class="line">INACTIVE=-1  &lt;==ç”¨æˆ·æ˜¯å¦å¯ç”¨è¿‡æœŸåœæƒï¼Œ-1ä¸å¯ç”¨</span><br><span class="line">EXPIRE=  &lt;==ç”¨æˆ·ç»ˆæ­¢æ—¥æœŸï¼Œä¸è®¾ç½®ä»£è¡¨ä¸å¯ç”¨</span><br><span class="line">SHELL=/bin/bash  &lt;==å®šä¹‰é»˜è®¤shell</span><br><span class="line">SKEL=/etc/skel  &lt;==é…ç½®æ‰€æœ‰æ–°ç”¨æˆ·å®¶ç›®å½•çš„é»˜è®¤ç¯å¢ƒå˜é‡æ–‡ä»¶å­˜æ”¾è·¯å¾„ï¼Œä»è¯¥æ–‡ä»¶ä¸­å¤åˆ¶è¿‡å»ï¼Œä¸ºæ¯ä¸ªç”¨æˆ·æä¾›ç”¨æˆ·ç¯å¢ƒå˜é‡çš„ç›®å½•</span><br><span class="line">[root@lihuaning ~]<span class="comment"># ls -A /etc/skel/</span></span><br><span class="line">.bash_logout  .bash_profile  .bashrc</span><br><span class="line"></span><br><span class="line">CREATE_MAIL_SPOOL=<span class="built_in">yes</span>  &lt;==åˆ›å»ºmailæ–‡ä»¶</span><br><span class="line"></span><br><span class="line">ä¿®æ”¹æ–¹æ³•ï¼š</span><br><span class="line">useradd -D æ¥å‚æ•°æ”¹ æˆ–è€…ç›´æ¥ç¼–è¾‘é…ç½®æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ï¼š</span><br><span class="line">åœ¨åˆ‡åˆ°è¯¥ç”¨æˆ·åï¼Œæç¤ºç¬¦å˜ä¸ºå¦‚ä¸‹ï¼Œæ˜¯å› ä¸ºç”¨æˆ·çš„ç¯å¢ƒå˜é‡ç¼ºå¤±å¯¼è‡´çš„ã€‚</span><br><span class="line">[root@lihuaning xjh]<span class="comment"># su xjh</span></span><br><span class="line">bash-4.2$</span><br><span class="line"></span><br><span class="line">è§£å†³ï¼šbash-4.2$ <span class="built_in">cp</span> /etc/skel/.bash* .</span><br><span class="line">è‹¥æœªç”Ÿæ•ˆï¼š<span class="built_in">source</span> .bash_logout .bashrc .bash_profile &lt;==ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ</span><br><span class="line"></span><br><span class="line">æˆ–è€…ï¼š</span><br><span class="line">[root@lihuaning ~]<span class="comment"># echo $PS1</span></span><br><span class="line">[\u@\h \W]\$</span><br><span class="line">bash-4.2$ <span class="built_in">export</span> PS1=<span class="string">'[\u@\h \W]\$'</span>  &lt;==ä¸´æ—¶ç”Ÿæ•ˆ</span><br><span class="line">[xjh@lihuaning root]$</span><br><span class="line"><span class="built_in">logout</span> ç™»å‡ºå†ç™»é™†</span><br></pre></td></tr></tbody></table></figure>

<p>/etc/login.defs<br>æ˜¯è®¾ç½®ç”¨æˆ·å¸å·é™åˆ¶çš„æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶é‡Œçš„é…ç½®å¯¹rootç”¨æˆ·æ— æ•ˆã€‚å¦‚æœ/etc/shadowæ–‡ä»¶é‡Œæœ‰ç›¸åŒçš„é€‰é¡¹ï¼Œåˆ™ä»¥/etc/shadowé‡Œçš„è®¾ç½®ä¸ºå‡†ï¼Œä¹Ÿå°±æ˜¯è¯´/etc/shadowçš„é…ç½®ä¼˜å…ˆçº§é«˜äº/etc/login.defs</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">[root@felix ~]# cat /etc/login.defs </span><br><span class="line">#</span><br><span class="line"># Please note that the parameters in this configuration file control the</span><br><span class="line"># behavior of the tools from the shadow-utils component. None of these</span><br><span class="line"># tools uses the PAM mechanism, and the utilities that use PAM (such as the</span><br><span class="line"># passwd command) should therefore be configured elsewhere. Refer to</span><br><span class="line"># /etc/pam.d/system-auth for more information.</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line"># *REQUIRED*</span><br><span class="line">#   Directory where mailboxes reside, _or_ name of file, relative to the</span><br><span class="line">#   home directory.  If you _do_ define both, MAIL_DIR takes precedence.</span><br><span class="line">#   QMAIL_DIR is for Qmail</span><br><span class="line">#</span><br><span class="line">#QMAIL_DIR	Maildir</span><br><span class="line">MAIL_DIR	/var/spool/mail  &lt;==åˆ›å»ºç”¨æˆ·æ—¶ï¼Œè¦åœ¨ç›®å½•/var/spool/mailä¸­åˆ›å»ºä¸€ä¸ªç”¨æˆ·mailæ–‡ä»¶</span><br><span class="line">#MAIL_FILE	.mail</span><br><span class="line"></span><br><span class="line"># Password aging controls:</span><br><span class="line">#</span><br><span class="line">#	PASS_MAX_DAYS	Maximum number of days a password may be used.</span><br><span class="line">#	PASS_MIN_DAYS	Minimum number of days allowed between password changes.</span><br><span class="line">#	PASS_MIN_LEN	Minimum acceptable password length.</span><br><span class="line">#	PASS_WARN_AGE	Number of days warning given before a password expires.</span><br><span class="line">#</span><br><span class="line">PASS_MAX_DAYS	99999  &lt;==å¯†ç æœ€å¤§æœ‰æ•ˆæœŸ</span><br><span class="line">PASS_MIN_DAYS	0  &lt;==ä¸¤æ¬¡ä¿®æ”¹å¯†ç çš„æœ€å°é—´éš”æ—¶é—´</span><br><span class="line">PASS_MIN_LEN	5  &lt;==å¯†ç æœ€å°é•¿åº¦ï¼Œå¯¹äºrootæ— æ•ˆ</span><br><span class="line">PASS_WARN_AGE	7  &lt;==å¯†ç è¿‡æœŸå‰å¤šå°‘å¤©å¼€å§‹æç¤º</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># Min/max values for automatic uid selection in useradd</span><br><span class="line">#åˆ›å»ºç”¨æˆ·æ—¶ä¸æŒ‡å®šUIDçš„è¯è‡ªåŠ¨UIDçš„èŒƒå›´</span><br><span class="line">UID_MIN                  1000</span><br><span class="line">UID_MAX                 60000</span><br><span class="line"># System accounts&lt;==è™šæ‹Ÿç”¨æˆ·UIDèŒƒå›´</span><br><span class="line">SYS_UID_MIN               201</span><br><span class="line">SYS_UID_MAX               999</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># Min/max values for automatic gid selection in groupadd</span><br><span class="line">#è‡ªåŠ¨ç»„IDçš„èŒƒå›´</span><br><span class="line">GID_MIN                  1000</span><br><span class="line">GID_MAX                 60000</span><br><span class="line"># System accounts</span><br><span class="line">SYS_GID_MIN               201</span><br><span class="line">SYS_GID_MAX               999</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># If defined, this command is run when removing a user.</span><br><span class="line"># It should remove any at/cron/print jobs etc. owned by</span><br><span class="line"># the user to be removed (passed as the first argument).</span><br><span class="line">#</span><br><span class="line">#USERDEL_CMD	/usr/sbin/userdel_local &lt;==å½“åˆ é™¤ç”¨æˆ·çš„æ—¶å€™æ‰§è¡Œçš„è„šæœ¬ï¼Œé»˜è®¤å…³é—­</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># If useradd should create home directories for users by default</span><br><span class="line"># On RH systems, we do. This option is overridden with the -m flag on</span><br><span class="line"># useradd command line.</span><br><span class="line">#</span><br><span class="line">CREATE_HOME	yes  &lt;==æ˜¯å¦åˆ›å»ºå®¶ç›®å½•ï¼Œå¯ç”¨-mæ§åˆ¶</span><br><span class="line"></span><br><span class="line"># The permission mask is initialized to this value. If not specified, </span><br><span class="line"># the permission mask will be initialized to 022.</span><br><span class="line">UMASK           077  &lt;==å®¶ç›®å½•å¯¹å¯¹åº”çš„umaskå€¼</span><br><span class="line"></span><br><span class="line"># This enables userdel to remove user groups if no members exist.</span><br><span class="line">#</span><br><span class="line">USERGROUPS_ENAB yes  &lt;==åˆ é™¤ç”¨æˆ·æ—¶ï¼ŒåŒæ—¶åˆ é™¤å¯¹åº”ç»„ã€‚ï¼ˆå¦‚æœç»„å†…æ²¡æœ‰å…¶ä»–æˆå‘˜ï¼‰</span><br><span class="line"></span><br><span class="line"># Use SHA512 to encrypt password.</span><br><span class="line">ENCRYPT_METHOD SHA512  &lt;==å¯†ç çš„åŠ å¯†ç®—æ³•SHA512</span><br><span class="line">æ³¨æ„ï¼š</span><br><span class="line">	1.ç»™å¼€å‘äººå‘˜ç­‰æ·»åŠ ç”¨æˆ·ï¼Œå°½é‡ç»™æˆªæ­¢æ—¶é—´ã€‚</span><br></pre></td></tr></tbody></table></figure>
<p><strong>ä¿®æ”¹ç”¨æˆ·ï¼š</strong><br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-125.png" alt="10"><br><strong>åˆ é™¤ç”¨æˆ·ï¼š</strong><br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-126.png" alt="11"><br>ç”Ÿäº§ç¯å¢ƒä¸­ä¸€èˆ¬å…ˆæ³¨é‡Špasswdä¸­è¯¥ç”¨æˆ·çš„æ‰€å±è¡Œï¼Œä¸ç«‹åˆ»è¿›è¡Œåˆ é™¤ã€‚</p>
<p><strong>è®¾ç½®å¯†ç ï¼š</strong><br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-127.png" alt="12"></p>
<p>â€“stdin ä»æ ‡å‡†è¾“å…¥æ¥å—å¯†ç å¹¶è®¾ç½®</p>
<p>ä¸äº¤äº’è®¾ç½®å¯†ç ï¼š<br>æ–¹æ³•1ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@oldboyedu ~]<span class="comment"># echo 123456|passwd --stdin oldgirl</span></span><br><span class="line">Changing password <span class="keyword">for</span> user oldgirl.</span><br><span class="line">passwd: all authentication tokens updated successfully.</span><br></pre></td></tr></tbody></table></figure>
<p>æ–¹æ³•2ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@oldboyedu ~]<span class="comment"># echo 123456 &gt;pass</span></span><br><span class="line">[root@oldboyedu ~]<span class="comment"># cat pass</span></span><br><span class="line">123456</span><br><span class="line">[root@oldboyedu ~]<span class="comment"># passwd --stdin oldgirl &lt;pass </span></span><br><span class="line">Changing password <span class="keyword">for</span> user oldgirl.</span><br><span class="line">passwd: all authentication tokens updated successfully.</span><br></pre></td></tr></tbody></table></figure>
<p>ç”Ÿäº§ç¯å¢ƒä¸­å¯†ç ç®¡ç†æ€è·¯ï¼š</p>
<ol>
<li>ç”¨æˆ·å¯†ç è¦è¶³å¤Ÿå¤æ‚,æœ€å¥½8ä½ä»¥ä¸Šå­—æ¯(å«å¤§å°å†™)ã€æ•°å­—ã€ç‰¹æ®Šå­—ç¬¦çš„ç»„åˆ </li>
<li>è¾ƒå¤§çš„ä¼ä¸šç”¨æˆ·å’Œå¯†ç å¯ä»¥ç»Ÿä¸€ç®¡ç†(é‡‡ç”¨å¾®è½¯æ´»åŠ¨ç›®å½•æˆ– openldapå¼€æºå·¥å…·)</li>
<li>åŠ¨æ€å¯†ç :åŠ¨æ€å£ä»¤,éœ€è¦æ—¶ç™»å½•åˆ°åŠ¨æ€å£ä»¤ç³»ç»Ÿä¸­,å³æ—¶ç”³è¯·è·å¾—å¯†ç ,ä½†å¦‚æœè‹¥å¹²æ—¶é—´å†…ä¸æ“ä½œæœåŠ¡å™¨,å¯†ç å°±ä¼šå¤±æ•ˆ</li>
</ol>
<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-128.png" alt="13"></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@oldboyedu ~]<span class="comment"># tail -4 /etc/passwd|awk -F ":" '{print $1":oldboy"}' &gt;user.log</span></span><br><span class="line">[root@oldboyedu ~]<span class="comment"># cat user.log</span></span><br><span class="line">gongli1:oldboy</span><br><span class="line">gongli2:oldboy</span><br><span class="line">chenglong1:oldboy</span><br><span class="line">zongsheng:oldboy</span><br></pre></td></tr></tbody></table></figure>
<p>chpasswdå¯¹å¯†ç æ–‡ä»¶çš„è¦æ±‚æ˜¯ä¸Šè¿°user.log</p>
<p>æ–¹æ³•1ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@oldboyedu ~]<span class="comment"># chpasswd&lt;user.log </span></span><br></pre></td></tr></tbody></table></figure>
<p>æ–¹æ³•2ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@oldboyedu ~]<span class="comment"># tail -4 /etc/passwd|awk -F ":" '{print $1":oldboy"}'|chpasswd </span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ‰¹é‡åˆ›å»ºç”¨æˆ·å¹¶è®¾ç½®å¯†ç ï¼š</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@felix ~]<span class="comment"># echo felix{01..10} | xargs -n1 | sed -rn 's#(.*)#useradd \1;echo 123456 | passwd --stdin \1#gp' | bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># echoå‘½ä»¤è¾“å‡ºç”¨æˆ·å | xargs -n1 å¯¹è¾“å‡ºçš„å…ƒç´ è¿›è¡Œåˆ†ç»„ï¼Œæ¯ç»„ä¸€ä¸ªå…ƒç´  | åˆ©ç”¨sed -nå‚æ•°å–æ¶ˆé»˜è®¤è¾“å‡º,-rå‚æ•°æ”¯æŒEREæ‰©å±•å…ƒå­—ç¬¦åœ¨è¿™é‡ŒæŒ‡æ‹¬å·() åŒ¹é…æ‰€æœ‰ï¼Œæ›¿æ¢ä¸º useradd \1å–å‡ºæ‰€æœ‰å·²ç»åˆ†ç»„çš„å…ƒç´ ã€‚æ­¤åˆ»ç”¨æˆ·å·²ç»æ·»åŠ å®Œæ¯•;echo 123456 | passwd --stdin \1å–å‡ºæ¯ä½ç”¨æˆ·å¹¶ä»æ ‡å‡†è¾“å…¥è®¾ç½®å¯†ç  æ¥pæ‰“å°ç»“æœã€‚ | å°†ç»“æœè¾“å‡ºç»™bash</span></span><br><span class="line"></span><br><span class="line">è¾“å‡ºï¼š</span><br><span class="line">Changing password <span class="keyword">for</span> user felix01.</span><br><span class="line">passwd: all authentication tokens updated successfully.</span><br><span class="line">Changing password <span class="keyword">for</span> user felix02.</span><br><span class="line">passwd: all authentication tokens updated successfully.</span><br><span class="line">Changing password <span class="keyword">for</span> user felix03.</span><br><span class="line">passwd: all authentication tokens updated successfully.</span><br><span class="line">Changing password <span class="keyword">for</span> user felix04.</span><br><span class="line">passwd: all authentication tokens updated successfully.</span><br><span class="line">Changing password <span class="keyword">for</span> user felix05.</span><br><span class="line">passwd: all authentication tokens updated successfully.</span><br><span class="line">Changing password <span class="keyword">for</span> user felix06.</span><br><span class="line">passwd: all authentication tokens updated successfully.</span><br><span class="line">Changing password <span class="keyword">for</span> user felix07.</span><br><span class="line">passwd: all authentication tokens updated successfully.</span><br><span class="line">Changing password <span class="keyword">for</span> user felix08.</span><br><span class="line">passwd: all authentication tokens updated successfully.</span><br><span class="line">Changing password <span class="keyword">for</span> user felix09.</span><br><span class="line">passwd: all authentication tokens updated successfully.</span><br><span class="line">Changing password <span class="keyword">for</span> user felix10.</span><br><span class="line">passwd: all authentication tokens updated successfully.</span><br></pre></td></tr></tbody></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-129.png" alt="14"></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">[root@felix ~]<span class="comment"># chage -l felix01</span></span><br><span class="line">Last password change					: Oct 17, 2019 &lt;==å¯†ç æœ€è¿‘ä¿®æ”¹æ—¶é—´ 2019-10-17  -då‚æ•°å¯æ§åˆ¶è¯¥è¡Œ</span><br><span class="line"></span><br><span class="line">Password expires					: never  &lt;==å¯†ç è¿‡æœŸæ—¶é—´ï¼Œä»æ¥ä¸è¿‡æœŸ</span><br><span class="line">-Må‚æ•°æ§åˆ¶è¯¥è¡Œ</span><br><span class="line"></span><br><span class="line">Password inactive					: never  &lt;==å¯†ç åœæƒæ—¶é—´</span><br><span class="line">-lå‚æ•°æ§åˆ¶è¯¥è¡Œ</span><br><span class="line"></span><br><span class="line">Account expires						: never  &lt;==è´¦æˆ·è¿‡æœŸæ—¶é—´ </span><br><span class="line">-Eå‚æ•°æ§åˆ¶è¯¥è¡Œ</span><br><span class="line"></span><br><span class="line">Minimum number of days between password change	: 0  &lt;==ä¿®æ”¹å¯†ç æœ€å°é—´éš”å¤©æ•° </span><br><span class="line">-må‚æ•°æ§åˆ¶è¯¥è¡Œ</span><br><span class="line"></span><br><span class="line">Maximum number of days between password change	: 99999  &lt;==æœ€é•¿æ—¶é—´  </span><br><span class="line">-Mæ§åˆ¶è¯¥è¡Œ</span><br><span class="line"></span><br><span class="line">Number of days of warning before password expires	: 7 &lt;==å¯†ç è¿‡å»æå‰å‡ å¤©è¿›è¡Œè­¦å‘Š </span><br><span class="line">-Wæ§åˆ¶è¯¥è¡Œ</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@felix ~]<span class="comment"># chage -E "2020-10-1||$(date +%F -d'10day')" felix01  &lt;==ä¿®æ”¹è´¦æˆ·è¿‡æœŸæ—¶é—´ï¼Œæˆ–åå¤©ååœæƒ</span></span><br><span class="line">[root@felix ~]<span class="comment"># chage -l felix01</span></span><br><span class="line">Last password change					: Oct 17, 2019</span><br><span class="line">Password expires					: never</span><br><span class="line">Password inactive					: never</span><br><span class="line">Account expires						: Oct 01, 2020 *</span><br><span class="line">Minimum number of days between password change	: 0</span><br><span class="line">Maximum number of days between password change	: 99999</span><br><span class="line">Number of days of warning before password expires	: 7</span><br></pre></td></tr></tbody></table></figure>
<p><strong>å…¶ä»–ç”¨æˆ·ç›¸å…³å‘½ä»¤ï¼š</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">id</span> <span class="comment">#æŸ¥çœ‹ç”¨æˆ·èº«ä»½</span></span><br><span class="line"><span class="built_in">whoami</span> <span class="comment">#æŸ¥çœ‹å½“å‰ç”¨æˆ·</span></span><br><span class="line">w <span class="comment">#æŸ¥çœ‹æ‰€ä»¥ç™»é™†ç”¨æˆ·</span></span><br><span class="line">last <span class="comment">#æ˜¾ç¤ºç™»é™†è¿‡çš„ç”¨æˆ·ä¿¡æ¯åˆ—è¡¨</span></span><br><span class="line">lastlog <span class="comment">#æ±‡æŠ¥æœ€è¿‘è´§æŒ‡å®šç”¨æˆ·çš„ç™»å½•æƒ…å†µ</span></span><br></pre></td></tr></tbody></table></figure>
<p><strong>å…³äºç”¨æˆ·çš„éªšæ“ä½œï¼š</strong><br><code>touch /etc/nologin</code> æ‰§è¡Œè¯¥å‘½ä»¤ä¼šç¦æ­¢é™¤äº†rootç”¨æˆ·ä»¥å¤–çš„å…¶ä»–ç”¨æˆ·ç™»å½•æœåŠ¡å™¨åªè¦æ˜¯åˆ›å»ºè¯¥æ–‡ä»¶å³å¯ï¼Œåº”ç”¨åœºæ™¯æ¯”å¦‚æœåŠ¡å™¨ç»´æŠ¤æ—¶éœ€è¦æš‚æ—¶ç¦æ­¢æ™®é€šç”¨æˆ·ç™»å½•ã€‚</p>
<p><strong>GID</strong></p>
<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-130.png" alt="15"><br>ç›¸å…³é…ç½®æ–‡ä»¶ï¼š<code>/etc/group</code></p>
<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-131.png" alt="16"></p>
<p>ç”¨æˆ·èº«ä»½åˆ‡æ¢su<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-132.png" alt="17"></p>
<p><code>su</code> å’Œ <code>su -</code>çš„åŒºåˆ«<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-133.png" alt="18"><br>å‰è€…ç”¨æˆ·èº«ä»½åˆ‡æ¢ä½†ç¯å¢ƒå˜é‡æ²¡æ”¹å˜ã€‚</p>
<p><strong>sudoå‘½ä»¤</strong><br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-134.png" alt="18"></p>
<p>æ‰§è¡Œæµç¨‹ï¼š</p>
<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-135.png" alt="19"><br>é…ç½®/ect/sudoers</p>
<ul>
<li>visudo</li>
<li>vim sudoers  &lt;==ä¸æ¨è</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[felix01@felix ~]$ <span class="built_in">ls</span> /root</span><br><span class="line"><span class="built_in">ls</span>: cannot open directory /root: Permission denied</span><br><span class="line"></span><br><span class="line">[root@felix ~]<span class="comment"># visudo</span></span><br><span class="line">97 <span class="comment">## Allow root to run any commands anywhere</span></span><br><span class="line">98 root    ALL=(ALL)       ALL</span><br><span class="line">99 felix01 ALL=(ALL)       /bin/ls,/bin/cp</span><br><span class="line">    ç”¨æˆ·   ä¸»æœº=(è§’è‰²)     å‘½ä»¤ï¼ˆå…¨è·¯å¾„ <span class="built_in">which</span>ï¼‰ï¼Œå¤šä¸ªå‘½ä»¤ç”¨,éš”å¼€</span><br><span class="line">    </span><br><span class="line">99 felix   ALL=(ALL)       ALL  //ç›¸å½“äºfelixè®¾ç½®æˆç®¡ç†å‘˜</span><br><span class="line">99 felix   ALL=(ALL)       NOPASSWD: ALL  //sudoå»å¯†ç </span><br><span class="line">[root@felix ~]<span class="comment"># sudo su -</span></span><br><span class="line">Last login: Thu Oct 17 15:30:38 CST 2019 from 10.93.151.253 on pts/0</span><br><span class="line">[root@felix ~]<span class="comment">#</span></span><br><span class="line">ç¦æ­¢rootè¿œç¨‹è¿æ¥</span><br><span class="line"></span><br><span class="line">[root@felix ~]<span class="comment"># ll /var/db/sudo/felix/1   &lt;==å¯†ç è¿‡æœŸæ—¶é—´æˆ³æ–‡ä»¶ï¼Œé»˜è®¤5åˆ†é’Ÿè¿‡æœŸ</span></span><br><span class="line">-rw------- 1 root felix 48 2019-10-17 16:25 /var/db/sudo/felix/1</span><br><span class="line">[felix@felix ~]$ sudo -k  &lt;==æ¸…é™¤æ—¶é—´æˆ³ï¼Œä½¿sudoæç¤ºè¾“å…¥å¯†ç </span><br><span class="line">[felix@felix ~]$ sudo <span class="built_in">ls</span> /root</span><br><span class="line">[sudo] password <span class="keyword">for</span> felix: </span><br></pre></td></tr></tbody></table></figure>

<h1 id="RPM-YUMè½¯ä»¶å®‰è£…ç›¸å…³"><a href="#RPM-YUMè½¯ä»¶å®‰è£…ç›¸å…³" class="headerlink" title="RPM/YUMè½¯ä»¶å®‰è£…ç›¸å…³"></a>RPM/YUMè½¯ä»¶å®‰è£…ç›¸å…³</h1><p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-187.png" alt="RPM/YUM"></p>
<h1 id="ç‰¹æ®Šå­—ç¬¦-SHELLç›¸å…³"><a href="#ç‰¹æ®Šå­—ç¬¦-SHELLç›¸å…³" class="headerlink" title="ç‰¹æ®Šå­—ç¬¦/SHELLç›¸å…³"></a>ç‰¹æ®Šå­—ç¬¦/SHELLç›¸å…³</h1><h2 id="ç‰¹æ®Šå­—ç¬¦"><a href="#ç‰¹æ®Šå­—ç¬¦" class="headerlink" title="ç‰¹æ®Šå­—ç¬¦"></a>ç‰¹æ®Šå­—ç¬¦</h2><p><strong>åŸºæœ¬å«ä¹‰ï¼š</strong>é€šé…ç¬¦ç®€å•è¯´å°±æ˜¯é”®ç›˜ä¸Šçš„ä¸€äº›ç‰¹æ®Šå­—ç¬¦ï¼Œå¯ä»¥å®ç°æŸäº›ç‰¹æ®Šçš„åŠŸèƒ½ã€‚<br><strong>ä¾‹å¦‚ï¼š</strong>å¯ä»¥ç”¨*ä»£è¡¨æ‰€æœ‰ï¼Œæ¥æ¨¡ç³Šæœç´¢ç³»ç»Ÿä¸­çš„æ–‡ä»¶ã€‚<br><strong>ä½œç”¨ï¼š</strong>é€šé…ç¬¦é€‚ç”¨èŒƒå›´æ˜¯å‘½ä»¤è¡Œä¸­çš„[æ™®é€šå‘½ä»¤]æˆ–è„šæœ¬ç¼–ç¨‹ä¸­ã€‚</p>
<p><strong>ç¬¬ä¸€ç»„ï¼š</strong>æ¨¡ç³ŠåŒ¹é…<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-188.png" alt="æ¨¡ç³ŠåŒ¹é…"></p>
<p><strong>ç¬¬äºŒç»„ï¼š</strong>è·¯å¾„ä½ç½®<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-189.png" alt="è·¯å¾„ä½ç½®"></p>
<p><strong>ç¬¬ä¸‰ç»„ï¼š</strong>å¼•å·ç›¸å…³<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-190.png" alt="å¼•å·ç›¸å…³"><br>å‘ï¼šåå¼•å·è§£æå‡ºå‘½ä»¤ç»“æœèƒ½è¢«å¤Ÿä¸€ä¸ªå‘½ä»¤è°ƒç”¨ï¼Œè€ŒåŒå¼•å·ä¸è¡Œã€‚</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@lihuaning ~]<span class="comment"># tar -czf felix_$(date +%F).tar.gz felix &lt;==æ‰“åŒ…æ–‡ä»¶æ—¶é€šè¿‡$()è§£æå‘½ä»¤ç»™æ–‡ä»¶åŠ ä¸Šæ—¥æœŸ</span></span><br><span class="line">[root@lihuaning ~]<span class="comment"># ls</span></span><br><span class="line">felix_2019-10-09.tar.gz</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç¬¬å››ç»„ï¼š</strong>å…¶ä»–å­—ç¬¦<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-191.png" alt="å…¶ä»–å­—ç¬¦"></p>
<h2 id="ç®¡é“é‡å®šå‘"><a href="#ç®¡é“é‡å®šå‘" class="headerlink" title="ç®¡é“é‡å®šå‘"></a>ç®¡é“é‡å®šå‘</h2><p> <strong>é‡å®šå‘</strong></p>
<ul>
<li>1&gt; æ ‡å‡†è¾“å‡ºé‡å®šå‘ ç®­å¤´æ–¹å‘å°±æ˜¯æ•°æ®æµå‘ï¼ŒæŠŠå·¦è¾¹çš„æ•°æ®æµå‘åˆ°å³è¾¹ï¼Œä¼šè¦†ç›–ä¹‹å‰çš„æ•°æ®</li>
<li>1&gt;&gt; è¿½åŠ è¾“å‡ºé‡å®šå‘ï¼Œå†…å®¹è¿½åŠ åˆ°æ–‡ä»¶å°¾éƒ¨</li>
<li>0&lt; æ ‡å‡†è¾“å…¥é‡å®šå‘ ç®­å¤´æ–¹å‘å°±æ˜¯æ•°æ®æµå‘ï¼ŒæŠŠå³è¾¹çš„æ•°æ®æµå‘åˆ°å³è¾¹ï¼Œä¼šè¦†ç›–ä¹‹å‰çš„æ•°æ®</li>
<li>0&lt;&lt; è¿½åŠ è¾“å…¥é‡å®šå‘ï¼Œå†…å®¹è¿½åŠ åˆ°æ–‡ä»¶å°¾éƒ¨ï¼ˆå¯é…åˆEOFï¼‰</li>
<li>2&gt; é”™è¯¯è¾“å‡ºé‡å®šå‘ï¼Œç®­å¤´æ–¹å‘å°±æ˜¯æ•°æ®æµå‘ï¼ŒæŠŠå·¦è¾¹çš„æŠ¥é”™è¾“å‡ºåˆ°å³è¾¹ï¼ˆè¦†ç›–ï¼‰</li>
<li>2&gt;&gt; é”™è¯¯è¿½åŠ è¾“å‡ºé‡å®šå‘ï¼ˆè¿½åŠ ï¼‰</li>
<li>&lt;&lt;&lt; å°†åé¢çš„å†…å®¹ä½œä¸ºå‰é¢å‘½ä»¤çš„æ ‡å‡†è¾“å…¥,ç”¨äºå¤„ç†å˜é‡</li>
</ul>
<p> <strong>ç‰¹æ®Šçš„é‡å®šå‘</strong><br>   å°†æ ‡å‡†é”™è¯¯é‡å®šå‘åˆ°æ ‡å‡†è¾“å‡ºï¼Œå³æ ‡å‡†é”™è¯¯å’Œæ ‡å‡†è¾“å‡ºä¸€æ ·é‡å®šå‘åˆ°æ–‡ä»¶ä¸­çš„ä¸‰ç§æ–¹æ³•</p>
<ul>
<li>æ–¹æ³•1ï¼š<code>echo â€œI am felixâ€ 1&gt;&gt;felix.txt 2&gt;&gt;felix.txt</code></li>
<li>æ–¹æ³•2ï¼š<code>echo â€œI am felixâ€ &amp;&gt;&gt;felix.txt</code></li>
<li>æ–¹æ³•3ï¼š<code>echo â€œI am felixâ€ &gt;&gt;felix 2&gt;&amp;1</code><br> 2&gt;&amp;1çš„æ„æ€å°±æ˜¯å°† æ ‡å‡†é”™è¯¯è¾“å‡ºå’Œæ ‡å‡†è¾“å‡ºç­‰ä»·è¿›è¡Œé‡å®šå‘</li>
</ul>
<p>  <strong>ç®¡é“</strong><br>    å®šä¹‰ï¼šç®¡é“å·¦è¾¹çš„å‘½ä»¤çš„æ‰§è¡Œç»“æœï¼Œé€šè¿‡ç®¡é“äº¤ç»™å³è¾¹å‘½ä»¤è¿›è¡Œå†å¤„ç†ã€‚<br>    <code>[root@f ~]# cat anaconda-ks.cfg | grep "kexec"</code> //æ²¡æœ‰å®é™…æ„ä¹‰<br>    æ­£ç¡®æ–¹æ³•å¦‚ä¸‹ï¼š<br>    <code>[root@f ~]# grep "kexec" anaconda-ks.cfg</code> //å°‘é’»ç®¡é“ï¼Œæé«˜æ•ˆç‡</p>
<p><strong>ç¤ºä¾‹</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@f felix]<span class="comment"># find ./ -name "felix*" -type f -mtime -3 -exec ls -l {} \;</span></span><br><span class="line">[root@f felix]<span class="comment"># find ./ -name "felix*" -type f -mtime -7 | xargs ls -l</span></span><br><span class="line">[root@f felix]<span class="comment"># find ./ -name "felix*" -type f | xargs rm -rf</span></span><br></pre></td></tr></tbody></table></figure>
<h2 id="Linuxæ­£åˆ™"><a href="#Linuxæ­£åˆ™" class="headerlink" title="Linuxæ­£åˆ™"></a>Linuxæ­£åˆ™</h2><p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-192.png" alt="Linuxæ­£åˆ™"><br><strong>æ¦‚å¿µï¼š</strong>ä½œç”¨å’Œç‰¹æ®Šå­—ç¬¦ä¸€æ ·ï¼Œæ˜¯ä¸ºå¤„ç†å¤§é‡å­—ç¬¦ä¸²åŠæ–‡æœ¬è€Œå®šä¹‰çš„ä¸€å¥—è§„åˆ™å’Œæ–¹æ³•ï¼ŒåŒ–ç¹ä¸ºç®€ã€‚å‡è®¾â€œ@â€ä»£è¡¨â€œI amâ€ï¼Œâ€œ!â€ä»£è¡¨â€œfelixâ€ï¼Œåˆ™æ‰§è¡Œã€‚echo â€œ@!â€çš„ç»“æœå°±æ˜¯è¾“å‡ºâ€œI am felixâ€ã€‚<br><strong>ä½œç”¨ï¼š</strong>æé«˜æ•ˆç‡ï¼Œå¿«é€Ÿè·å–åˆ°æƒ³è¦çš„å†…å®¹ã€‚é€‚ç”¨äºä¸‰å‰‘å®¢å‘½ä»¤ grepï¼ˆegrepï¼‰ï¼Œsedï¼Œawkã€‚ä»¥è¡Œä¸ºå•ä½è¿›è¡Œå¤„ç†ã€‚</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@lihuaning ~]<span class="comment"># ifconfig ens3|sed -rn '2s#^.*inet (.*) net.*$#\1#gp'</span></span><br><span class="line">10.93.169.253</span><br></pre></td></tr></tbody></table></figure>
<p><strong>æ˜“æ··æ·†çš„äº‹é¡¹ï¼š</strong></p>
<ol>
<li>å’Œé€šé…ç¬¦åŒºåˆ«</li>
<li>å¼€å‘æ­£åˆ™ï¼Œä¸€èˆ¬æ˜¯Perlå…¼å®¹æ­£åˆ™è¡¨è¾¾å¼</li>
<li>Linuxç³»ç»Ÿçš„ä¸‰å‰‘å®¢æ­£åˆ™è¡¨è¾¾å¼*</li>
</ol>
<p><strong>ç¯å¢ƒå‡†å¤‡ï¼š</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> grep=<span class="string">'grep --color=auto'</span>  &lt;==C6éœ€è¦å•ç‹¬è®¾ç½®</span><br><span class="line">[root@lihuaning ~]<span class="comment"># export LC_ALL=C  &lt;==è®¾ç½®åï¼ŒåŒ¹é…æ“ä½œä¸ä¼šå‡ºç°åŒ¹é…å¼‚å¸¸æƒ…å†µ</span></span><br><span class="line">æ“ä½œï¼š</span><br><span class="line"><span class="built_in">cat</span> &gt;&gt;/etc/profile&lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">alias grep='grep --color=auto'</span></span><br><span class="line"><span class="string">alias egrep='egrep --color=auto'</span></span><br><span class="line"><span class="string">export LC_ALL=C</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> /etc/profile  &lt;==ä½¿ä¿®æ”¹å†…å®¹ç”Ÿæ•ˆ</span><br></pre></td></tr></tbody></table></figure>
<p><strong>åˆ†ç±»ï¼š</strong></p>
<ol>
<li>BREï¼ˆåŸºæœ¬æ­£åˆ™è¡¨è¾¾å¼ï¼‰  grep</li>
<li>EREï¼ˆæ‰©å±•æ­£åˆ™è¡¨è¾¾å¼ï¼‰  egrep</li>
</ol>
<h3 id="BRE"><a href="#BRE" class="headerlink" title="BRE"></a>BRE</h3><p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-193.png" alt="BRE"><br><strong>BREå®è·µï¼š</strong></p>
<ol>
<li>^ä»¥â€¦å¼€å¤´çš„è¡Œ</li>
</ol>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">[root@lihuaning felix]<span class="comment"># cat test.txt  &lt;==ç¯å¢ƒå‡†åˆ«</span></span><br><span class="line">I am oldboy teacher!</span><br><span class="line">i teach linux</span><br><span class="line">I like badminton ball billiard ball and chinese chess</span><br><span class="line">oursiteishttp://www.oldboyedu.com</span><br><span class="line">my qq num is 49000448</span><br><span class="line">not49000e448.</span><br><span class="line">my god ,i am not oldbey, but OLDBOY</span><br><span class="line">[root@lihuaning felix]<span class="comment"># grep "^n" test.txt  &lt;==åŒ¹é…ä»¥nå¼€å¤´çš„è¡Œ</span></span><br><span class="line">not49000e448.</span><br><span class="line"></span><br><span class="line">è¿‡æ»¤æ–‡ä»¶ç±»å‹æ“ä½œ</span><br><span class="line">[root@lihuaning felix]<span class="comment"># ll  </span></span><br><span class="line">total 4</span><br><span class="line">drwxr-xr-x 2 root root   6 2019-10-09 16:24 1.txt</span><br><span class="line">drwxr-xr-x 2 root root   6 2019-10-09 16:24 2.txt</span><br><span class="line">drwxr-xr-x 2 root root   6 2019-10-09 16:24 3.txt</span><br><span class="line">drwxr-xr-x 2 root root   6 2019-10-09 16:24 4.txt</span><br><span class="line">-rw-r--r-- 1 root root   0 2019-10-09 16:24 a.txt</span><br><span class="line">-rw-r--r-- 1 root root   0 2019-10-09 16:24 b.txt</span><br><span class="line">-rw-r--r-- 1 root root   0 2019-10-09 16:24 c.txt</span><br><span class="line">-rw-r--r-- 1 root root   0 2019-10-09 16:24 d.txt</span><br><span class="line">-rw-r--r-- 1 root root   0 2019-10-09 18:19 est.txt</span><br><span class="line">-rw-r--r-- 1 root root 195 2019-10-09 22:01 test.txt</span><br><span class="line">drwxr-xr-x 2 root root   6 2019-10-09 16:23 text</span><br><span class="line">[root@lihuaning felix]<span class="comment"># ll | grep "^d" &lt;==è¿‡æ»¤ä»¥då¼€å¤´çš„æ–‡ä»¶ï¼Œå³è¿‡æ»¤ç›®å½•</span></span><br><span class="line">drwxr-xr-x 2 root root   6 2019-10-09 16:24 1.txt</span><br><span class="line">drwxr-xr-x 2 root root   6 2019-10-09 16:24 2.txt</span><br><span class="line">drwxr-xr-x 2 root root   6 2019-10-09 16:24 3.txt</span><br><span class="line">drwxr-xr-x 2 root root   6 2019-10-09 16:24 4.txt</span><br><span class="line">drwxr-xr-x 2 root root   6 2019-10-09 16:23 text</span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li>$ä»¥..ç»“å°¾çš„è¡Œ</li>
</ol>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@lihuaning felix]<span class="comment"># grep -n "m$" test.txt &lt;==åŒ¹é…ä»¥mç»“å°¾çš„è¡Œ</span></span><br><span class="line">4:oursiteishttp://www.oldboyedu.com</span><br><span class="line">[root@lihuaning felix]<span class="comment"># grep -n "\!$" test.txt  &lt;==åŒ¹é…ä»¥!ç»“å°¾çš„è¡Œï¼Œ\ è¡¨ç¤ºè½¬ä¹‰</span></span><br><span class="line">1:I am oldboy teacher!</span><br><span class="line"></span><br><span class="line">è¿‡æ»¤ç›®å½•æ“ä½œ</span><br><span class="line">[root@lihuaning felix]<span class="comment"># ll -F  &lt;==ç»™ç›®å½•åé¢åŠ ä¸Šåæ–œçº¿</span></span><br><span class="line">total 4</span><br><span class="line">drwxr-xr-x 2 root root   6 2019-10-09 16:24 1.txt/</span><br><span class="line">drwxr-xr-x 2 root root   6 2019-10-09 16:24 2.txt/</span><br><span class="line">drwxr-xr-x 2 root root   6 2019-10-09 16:24 3.txt/</span><br><span class="line">drwxr-xr-x 2 root root   6 2019-10-09 16:24 4.txt/</span><br><span class="line">-rw-r--r-- 1 root root   0 2019-10-09 16:24 a.txt</span><br><span class="line">-rw-r--r-- 1 root root   0 2019-10-09 16:24 b.txt</span><br><span class="line">-rw-r--r-- 1 root root   0 2019-10-09 16:24 c.txt</span><br><span class="line">-rw-r--r-- 1 root root   0 2019-10-09 16:24 d.txt</span><br><span class="line">-rw-r--r-- 1 root root   0 2019-10-09 18:19 est.txt</span><br><span class="line">-rw-r--r-- 1 root root 195 2019-10-09 22:01 test.txt</span><br><span class="line">drwxr-xr-x 2 root root   6 2019-10-09 16:23 text/</span><br><span class="line">[root@lihuaning felix]<span class="comment"># ll -F | grep "/$"  &lt;==é€šè¿‡åŒ¹é…ä»¥åæ–œçº¿ç»“å°¾çš„æ–‡ä»¶ æ‰¾å‡ºç›®å½•</span></span><br><span class="line">drwxr-xr-x 2 root root   6 2019-10-09 16:24 1.txt/</span><br><span class="line">drwxr-xr-x 2 root root   6 2019-10-09 16:24 2.txt/</span><br><span class="line">drwxr-xr-x 2 root root   6 2019-10-09 16:24 3.txt/</span><br><span class="line">drwxr-xr-x 2 root root   6 2019-10-09 16:24 4.txt/</span><br><span class="line">drwxr-xr-x 2 root root   6 2019-10-09 16:23 text/</span><br></pre></td></tr></tbody></table></figure>

<ol start="3">
<li>^$ è¿‡æ»¤ç©ºè¡Œ</li>
</ol>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@lihuaning felix]<span class="comment"># grep -n "^$" test.txt  &lt;==åŒ¹é…ç©ºè¡Œ</span></span><br><span class="line">4:</span><br><span class="line">7:</span><br><span class="line">[root@lihuaning felix]<span class="comment"># grep -nv "^$" test.txt  &lt;==é€šè¿‡-vå‚æ•°å–åè¾“å‡ºï¼Œåˆ™å»é™¤äº†æ–‡ä»¶çš„ç©ºè¡Œ</span></span><br><span class="line">1:I am oldboy teacher!</span><br><span class="line">2:i teach linux</span><br><span class="line">3:I like badminton ball billiard ball and chinese chess</span><br><span class="line">5:oursiteishttp://www.oldboyedu.com</span><br><span class="line">6:my qq num is 49000448</span><br><span class="line">8:not49000e448.</span><br><span class="line">9:my god ,i am not oldbey, but OLDBOY</span><br></pre></td></tr></tbody></table></figure>
<ol start="4">
<li>. è¡¨ç¤ºåŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œæœ‰ä¸”åªæœ‰ä¸€ä¸ªã€‚ç±»ä¼¼äºé€šé…ç¬¦ä¸­çš„ ?</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@lihuaning felix]# grep "." test.txt  &lt;==åŒ¹é…åˆ°äº†ä»»æ„å­—ç¬¦ï¼Œæ‰€æœ‰å­—ç¬¦éƒ½åŒ¹é…ä¸Šäº†</span><br><span class="line">I am oldboy teacher!</span><br><span class="line">i teach linux</span><br><span class="line">I like badminton ball billiard ball and chinese chess</span><br><span class="line">oursiteishttp://www.oldboyedu.com</span><br><span class="line">my qq num is 49000448</span><br><span class="line">not49000e448.</span><br><span class="line">my god ,i am not oldbey, but OLDBOY</span><br></pre></td></tr></tbody></table></figure>
<ol start="5">
<li>\ è¡¨ç¤ºè½¬ä¹‰</li>
</ol>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@lihuaning felix]<span class="comment"># grep ".$" test.txt  &lt;==åŒ¹é…ä»¥ä»»æ„å­—ç¬¦ç»“å°¾çš„è¡Œ</span></span><br><span class="line">I am oldboy teacher!</span><br><span class="line">i teach linux</span><br><span class="line">I like badminton ball billiard ball and chinese chess</span><br><span class="line">oursiteishttp://www.oldboyedu.com</span><br><span class="line">my qq num is 49000448</span><br><span class="line">not49000e448.</span><br><span class="line">my god ,i am not oldbey, but OLDBOY</span><br><span class="line">[root@lihuaning felix]<span class="comment"># grep "\.$" test.txt  &lt;==è½¬æ„å åŒ¹é…ä»¥ç‚¹ç»“å°¾çš„è¡Œ</span></span><br><span class="line">not49000e448.</span><br></pre></td></tr></tbody></table></figure>

<ol start="6">
<li>* è¡¨ç¤ºé‡å¤å‰é¢å­—ç¬¦ 0æ¬¡æˆ–å¤šæ¬¡</li>
</ol>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@lihuaning felix]<span class="comment"># grep "0*" test.txt  &lt;==ç”±äº*è¡¨ç¤ºåŒ¹é…0æ¬¡æˆ–å¤šæ¬¡ï¼Œæ‰€ä»¥æ–‡ä»¶æœªåŒ¹é…ä¸Šçš„ï¼ˆå³0æ¬¡ï¼‰ä¹Ÿä¸€å¹¶è¾“å‡ºäº†</span></span><br><span class="line">I am oldboy teacher!</span><br><span class="line">i teach linux</span><br><span class="line">I like badminton ball billiard ball and chinese chess</span><br><span class="line"></span><br><span class="line">oursiteishttp://www.oldboyedu.com</span><br><span class="line">my qq num is 49000448</span><br><span class="line"></span><br><span class="line">not49000e448.</span><br><span class="line">my god ,i am not oldbey, but OLDBOY</span><br></pre></td></tr></tbody></table></figure>
<ol start="7">
<li>.*åŒ…å«ç©ºè¡Œåœ¨å†…çš„æ‰€æœ‰è¡Œï¼ŒåŠ ä¸Š-nå‚æ•°æ˜¾ç¤ºæ‰€æœ‰è¡Œçš„è¡Œå· ç­‰ä»·äºcat -n</li>
</ol>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@lihuaning felix]<span class="comment"># grep -n ".*" test.txt </span></span><br><span class="line">1:I am oldboy teacher!</span><br><span class="line">2:i teach linux</span><br><span class="line">3:I like badminton ball billiard ball and chinese chess</span><br><span class="line">4:</span><br><span class="line">5:oursiteishttp://www.oldboyedu.com</span><br><span class="line">6:my qq num is 49000448</span><br><span class="line">7:</span><br><span class="line">8:not49000e448.</span><br><span class="line">9:my god ,i am not oldbey, but OLDBOY</span><br></pre></td></tr></tbody></table></figure>

<ol start="8">
<li>^.* è¡¨ç¤ºåŒ¹é…ä»¥ä»»æ„å¤šä¸ªå­—ç¬¦å¼€å¤´çš„è¡Œ</li>
</ol>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@lihuaning ~]<span class="comment"># grep "^.*boy" felix/test.txt  &lt;==åŒ¹é…ä»¥ä»»æ„å­—ç¬¦å¼€å¤´ ä»¥boyç»“å°¾çš„è¡Œã€‚ç›¸å½“äºé€šé…ç¬¦é‡Œçš„ *boy</span></span><br><span class="line">I am oldboy teacher!</span><br><span class="line">oursiteishttp://www.oldboyedu.com</span><br></pre></td></tr></tbody></table></figure>

<ol start="9">
<li>.*$ è¡¨ç¤ºåŒ¹é…ä»¥ä»»æ„å¤šä¸ªå­—ç¬¦ç»“å°¾çš„è¡Œ</li>
</ol>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@lihuaning ~]<span class="comment"># grep "am.*$" felix/test.txt  &lt;==åŒ¹é…ä»¥ä»»æ„å­—ç¬¦ç»“å°¾ä½†å¼€å¤´æ˜¯am çš„è¡Œ</span></span><br><span class="line">I am oldboy teacher!</span><br><span class="line">my god ,i am not oldbey, but OLDBOY</span><br></pre></td></tr></tbody></table></figure>

<ol start="10">
<li>[abc]åŒ¹é…å¸¦æœ‰ æˆ–aæˆ–bæˆ–cä»»æ„ä¸€ä¸ªçš„è¡Œ</li>
</ol>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@lihuaning ~]<span class="comment"># grep "[qg]" felix/test.txt  &lt;==åŒ¹é…å¸¦æœ‰q æˆ–è€… gçš„è¡Œ ^ä¸èƒ½ç”¨æ„Ÿå¹å·æ›¿æ¢ï¼ˆä¼šè¢«å½“åšå­—ç¬¦ï¼‰</span></span><br><span class="line">my qq num is 49000448</span><br><span class="line">my god ,i am not oldbey, but OLDBOY</span><br></pre></td></tr></tbody></table></figure>

<ol start="11">
<li>[^abc]å–å</li>
</ol>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@lihuaning ~]<span class="comment"># grep "[^qg]" felix/test.txt  &lt;==å–å æˆ–qæˆ–g</span></span><br><span class="line">I am oldboy teacher!</span><br><span class="line">i teach linux</span><br><span class="line">I like badminton ball billiard ball and chinese chess</span><br><span class="line">oursiteishttp://www.oldboyedu.com</span><br><span class="line">my qq num is 49000448</span><br><span class="line">not49000e448.</span><br><span class="line">my god ,i am not oldbey, but OLDBOY</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ERE"><a href="#ERE" class="headerlink" title="ERE"></a>ERE</h3><p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-194.png" alt="é¢„å®šä¹‰ç‰¹æ®Šä¸­æ‹¬å·"><br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-195.png" alt="ERE"></p>
<ol>
<li>+åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦ä¸€æ¬¡æˆ–å¤šæ¬¡ã€‚è´ªå©ªæ¨¡å¼ï¼Œå°½é‡å¾€ååŒ¹é…ã€‚</li>
</ol>
<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-196.png" alt="+åŒ¹é…"></p>
<ol start="2">
<li>[å­—ç¬¦1å­—ç¬¦2] åŒ¹é…[]ä¸­çš„å­—ç¬¦æˆ–læˆ–x ä¸€æ¬¡æˆ–å¤šæ¬¡</li>
</ol>
<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-197.png" alt="å­—ç¬¦1å­—ç¬¦2"></p>
<ol start="3">
<li>? åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦0æ¬¡æˆ–1æ¬¡ã€‚</li>
</ol>
<p>?å’Œ*çš„åŒºåˆ«</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">es?  0-1æ¬¡  </span><br><span class="line">   e</span><br><span class="line">   es</span><br><span class="line"></span><br><span class="line">es*  0-næ¬¡</span><br><span class="line">   e</span><br><span class="line">   es</span><br><span class="line">   ess</span><br><span class="line">   essssss   </span><br></pre></td></tr></tbody></table></figure>
<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-198.png" alt="å¤šæ¬¡åŒ¹é…"></p>
<ol start="4">
<li>| æˆ–è€… åŒæ—¶è¿‡æ»¤å¤šä¸ªå­—ç¬¦ä¸²</li>
</ol>
<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-199.png" alt="è¿‡æ»¤å¤šä¸ª"></p>
<ol start="5">
<li>å…ƒå­—ç¬¦</li>
</ol>
<p><code>egrep -o "(0)(0)\1\2" test.txt ç­‰ä»·äº egrep -o "0000" test.txt</code><br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-200.png" alt="å…ƒå­—ç¬¦"></p>
<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-201.png" alt="å…ƒå­—ç¬¦"></p>
<ol start="6">
<li>\b åŒ¹é…å•è¯è¾¹ç•Œ ç±»ä¼¼grep -w</li>
</ol>
<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-202.png" alt="\b"></p>
<ol start="7">
<li>\B éå•è¯è¾¹ç•ŒåŒ¹é…ï¼Œå³ä¸åŒ¹é…ç‹¬ç«‹å•è¯ï¼Œè€ŒåŒ¹é…éç‹¬ç«‹çš„å•è¯</li>
</ol>
<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-203.png" alt="\B"></p>
<ol start="8">
<li>\d åŒ¹é…å•ä¸ªæ•°å­—ï¼Œéœ€è¦é…åˆgrep -P Perlè¯­è¨€çš„æ­£åˆ™</li>
</ol>
<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-204.png" alt="\d"></p>
<h2 id="Linuxå››å‰‘å®¢"><a href="#Linuxå››å‰‘å®¢" class="headerlink" title="Linuxå››å‰‘å®¢"></a>Linuxå››å‰‘å®¢</h2><ul>
<li>grep è¿‡æ»¤æŸ¥æ‰¾å†…å®¹</li>
<li>sed å–è¡Œï¼Œæ›¿æ¢ï¼Œåˆ é™¤ï¼Œè¿½åŠ </li>
<li>awk å–åˆ—</li>
<li>find æŸ¥æ‰¾æ–‡ä»¶</li>
</ul>
<h3 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h3><p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-205.png" alt="awk"><br><code>sed -n '1,5p' /etc/passwd &gt; a.txt</code> &lt;==ç”¨sedå–å‡º1-5è¡Œï¼Œé‡å®šå‘åˆ°a.txt<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-206.png" alt="awk-1"></p>
<p><code>awk -F ":" '{print $1}' a.txt</code> &lt;==æŒ‡å®šåˆ†éš”ç¬¦åï¼Œ{}ä¸­æ¥åŠ¨ä½œ print æ‰“å° $1è¡¨ç¤ºç¬¬ä¸€åˆ—<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-207.png" alt="awk-2"><br>åŒä¸Šï¼šé€—å·è¡¨ç¤ºæ‰“å°$1å’Œ$5ï¼Œæ‰“å°å‡ºçš„å†…å®¹é»˜è®¤ä»¥ç©ºæ ¼åˆ†å‰²ã€‚<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-208.png" alt="awk-3"><br>$1ä»£è¡¨ç¬¬ä¸€åˆ—ï¼Œ$2ä»£è¡¨ç¬¬äºŒåˆ—ï¼Œ$0ä»£è¡¨æ•´è¡Œï¼Œ$NFä»£è¡¨æœ€åä¸€åˆ—<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-209.png" alt="awk-4"></p>
<blockquote>
<p><strong>awkæ¡ˆä¾‹1</strong><br>æ‰“å°1ï¼Œ3ï¼Œæœ€åä¸€åˆ—<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-210.png" alt="æ¡ˆä¾‹1"><br>æ‰“å°å€’æ•°ç¬¬2åˆ—<br><code>awk -F ":" '{print $1,$3,$(NF-1)}' a.txt</code> &lt;==$(NF-1)ä»£è¡¨å€’æ•°ç¬¬äºŒåˆ—<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-211.png" alt="æ¡ˆä¾‹1"></p>
</blockquote>
<blockquote>
<p><strong>awkæ¡ˆä¾‹2</strong><br><code>awk 'NR&gt;1&amp;&amp;NR&lt;4' a.txt</code> &lt;==NRå¤§äº1ï¼ˆå³ä»2å¼€å§‹ï¼‰and NRå°äº4ï¼ˆå³åˆ°3ç»“æŸï¼‰ç»“æœå–å‡º2 3è¡Œï¼Œandå–äº¤é›†<br><code>awk 'NR==2,NR==3' a.txt</code> &lt;==NRç­‰äº2 NRç­‰äº3 å³å–å‡º2 3è¡Œ<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-212.png" alt="æ¡ˆä¾‹2"></p>
</blockquote>
<blockquote>
<p><strong>awkæ¡ˆä¾‹3</strong><br><code>awk '/root/' a.txt</code>  &lt;==è¿‡æ»¤åªå«rootçš„è¡Œ<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-213.png" alt="æ¡ˆä¾‹3"></p>
</blockquote>
<blockquote>
<p><strong>awkæ¡ˆä¾‹4</strong><br>awkè¿‡æ»¤é æŒ‡å®šå­—ç¬¦ä¸²çš„è¡Œ<br><code>awk '/^[^r]/' a.txt</code>  &lt;==[]ä¸­ ^r æ˜¯æŒ‡ér(å–åæ“ä½œ)ï¼Œæ‹¬å·å¤–çš„^ä»¥ä»€ä¹ˆä»€ä¹ˆå¼€å¤´ï¼Œè¿™é‡ŒæŒ‡è¿‡æ»¤å‡ºä»¥érå¼€å¤´çš„è¡Œ<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-214.png" alt="æ¡ˆä¾‹4"></p>
</blockquote>
<blockquote>
<p><strong>awkæ¡ˆä¾‹5</strong><br>awkå–æ–‡ä»¶çš„ç¬¬ä¸€åˆ—ï¼Œç¬¬ä¸‰åˆ—ï¼Œæœ€åä¸€åˆ—å¹¶æ‰“å°è¡Œå·<br><code>awk -F ":"  '{print $1,$3,$NF}' a.txt | cat -n</code><br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-215.png" alt="æ¡ˆä¾‹5"><br><code>awk -F ":"  '{print NR,$1,$3,$NF}' a.txt</code> &lt;==å–ç¬¬è¡Œå·(NR),ç¬¬ä¸€åˆ—($1),ç¬¬äºŒåˆ—($3),æœ€åä¸€åˆ—(NF)<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-216.png" alt="æ¡ˆä¾‹5"></p>
</blockquote>
<blockquote>
<p><strong>awkæ¡ˆä¾‹6</strong><br>awkå–ifconfig ens3çš„IPåœ°å€<br><code>ifconfig ens3 | awk -F " " 'NR==2{print $2}'</code> &lt;==-FæŒ‡å®šåˆ†å‰²ç¬¦ï¼ŒNRå®šä½åˆ°è¡Œå·2ï¼Œå–å‡ºæŒ‡å®šåˆ—$2<br><code>ifconfig ens3 | awk 'NR==2{print $2}'</code> &lt;==åŒä¸Šï¼Œç¼ºå°‘-Fï¼ˆå› ä¸ºä¸æŒ‡å®š-Få³é»˜è®¤ä»¥ç©ºæ ¼ä½œä¸ºåˆ†å‰²ç¬¦ï¼‰<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-217.png" alt="æ¡ˆä¾‹6"></p>
</blockquote>
<blockquote>
<p><strong>å¤šåˆ†éš”ç¬¦æ¦‚å¿µï¼š</strong><br><code>echo --==--==--====-1.........2[[[[[[[3******4%%%%%%%5 | awk -F "[-=.[*%]+" '{print $3,$4}'</code> &lt;==-Få‚æ•°æŒ‡å®šåˆ†å‰²ç¬¦[]+ï¼ŒæŒ‡çš„æ˜¯å°†ä¸€å †æ‹¬å·å†…çš„ç¬¦å·çœ‹ä½œä¸€ä¸ªåˆ†éš”ç¬¦ï¼Œåˆ†éš”ç¬¦çš„å·¦å³ä¸¤è¾¹åˆ†åˆ«æ˜¯$n å’Œ $n+1<br>è¾“å‡ºï¼š2 3</p>
</blockquote>
<blockquote>
<p><strong>awkæ¡ˆä¾‹7</strong><br>è¿‡æ»¤æ–‡ä»¶ä¸­ç¬¬ä¸€åˆ—å†…å®¹åŒ¹é…rootçš„å­—ç¬¦ä¸²ï¼ŒæŠŠç¬¦åˆçš„è¡Œçš„æœ€åä¸€åˆ—è¾“å‡º<br><code>awk -F ":" '$1~/root/{print $NF}' a.txt</code> &lt;==ç¬¬ä¸€åˆ—($1) åŒ¹é…åˆ°(~) rootï¼Œå°±æŠŠåŒ¹é…åˆ°çš„è¿™ä¸€è¡Œçš„æœ€åä¸€åˆ—æ‰“å°å‡ºæ¥<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-218.png" alt="æ¡ˆä¾‹7"></p>
</blockquote>
<blockquote>
<p><strong>awkæ¡ˆä¾‹8</strong><br><code>awk -F ' ' '$3&gt;80{print $0}' c.txt</code>  &lt;==åˆ†æ•°å¤§äº80çš„<br><code>awk -F ' ' '$3==100{print $0}' c.txt</code>  &lt;==åˆ†æ•°ç­‰äº100çš„<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-219.png" alt="æ¡ˆä¾‹8"></p>
</blockquote>
<p><strong>awkç»ƒä¹ </strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@lihuaning ~]<span class="comment"># cat a.txt </span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br></pre></td></tr></tbody></table></figure>
<p>é—®é¢˜1ï¼šå–test.txtæ–‡ä»¶çš„ç¬¬2è¡Œåˆ°ç¬¬3è¡Œçš„å†…å®¹ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@lihuaning ~]# awk -F ":" 'NR==2,NR==3{print $0}' a.txt </span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br></pre></td></tr></tbody></table></figure>
<p>é—®é¢˜2ï¼šè¿‡æ»¤å‡ºå«æœ‰rootå­—ç¬¦ä¸²çš„è¡Œâ€»ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@lihuaning ~]# awk -F ":" '$1~/root/{print $0}' a.txt </span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br></pre></td></tr></tbody></table></figure>
<p>é—®é¢˜3ï¼šåˆ é™¤å«æœ‰rootå­—ç¬¦ä¸²çš„è¡Œâ€»ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@lihuaning ~]# awk -F ":" '$1~/[^root]/{print $0}' a.txt </span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br></pre></td></tr></tbody></table></figure>
<p>é—®é¢˜4ï¼šå–æ–‡ä»¶çš„ç¬¬ä¸€åˆ—ã€ç¬¬ä¸‰åˆ—å’Œæœ€åä¸€åˆ—å†…å®¹ï¼Œå¹¶æ‰“å°è¡Œå·â€»ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@lihuaning ~]# awk -F ":" '{print NR,$1,$3,$NF}' a.txt </span><br><span class="line">1 root 0 /bin/bash</span><br><span class="line">2 bin 1 /sbin/nologin</span><br><span class="line">3 daemon 2 /sbin/nologin</span><br><span class="line">4 adm 3 /sbin/nologin</span><br><span class="line">5 lp 4 /sbin/nologin</span><br></pre></td></tr></tbody></table></figure>
<p>é—®é¢˜5ï¼šå–å‡ºLinuxä¸­æ‰§è¡Œifconfig eth0åå¯¹åº”çš„IPåœ°å€ï¼ˆåªèƒ½è¾“å‡ºIPåœ°å€ï¼‰ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@lihuaning ~]# ifconfig ens3 | awk -F " " 'NR==2{print $2}'</span><br><span class="line">10.93.169.253</span><br></pre></td></tr></tbody></table></figure>
<p>é—®é¢˜6ï¼šè¿‡æ»¤æ–‡ä»¶ä¸­ç¬¬ä¸€åˆ—å†…å®¹åŒ¹é…rootçš„å­—ç¬¦ä¸²ï¼ŒæŠŠç¬¦åˆçš„è¡Œçš„æœ€åä¸€åˆ—è¾“å‡º</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@lihuaning ~]# awk -F ":" '$1~/root/{print $NF}' a.txt </span><br><span class="line">/bin/bash</span><br></pre></td></tr></tbody></table></figure>
<p>é—®é¢˜7ï¼šè¿‡æ»¤ä¸‹åˆ—test1.txtæ–‡ä»¶ä¸­ç¬¬ä¸‰åˆ—å†…å®¹åˆ†æ•°å¤§äº70ï¼Œå¹¶ä¸”å°äº95çš„äººåå’Œæ€§åˆ«ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@lihuaning ~]# cat c.txt </span><br><span class="line">å¼ ä¸‰ ç”· 80</span><br><span class="line">æå›› å¥³ 70</span><br><span class="line">ç‹äº” ç”· 88</span><br><span class="line">èµµå…­ ç”· 100</span><br><span class="line">[root@lihuaning ~]# awk -F " " '$3&gt;70&amp;&amp;$3&lt;95{print $1,$2}' c.txt </span><br><span class="line">å¼ ä¸‰ ç”·</span><br><span class="line">ç‹äº” ç”·</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p><strong>cutå‘½ä»¤:</strong> ç®€å•å–åˆ—<br><code>cut -d" " -f2-6 a.txt</code> &lt;==-dæŒ‡å®šåˆ†éš”ç¬¦ï¼Œ-fæŒ‡å®šå–ç¬¬å‡ åˆ—ã€‚ä¹Ÿå¯ç”¨é€—å·ï¼Œå•ä¸ªå­—ç¬¦æå–<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-220.png" alt="cut"><br><code>cut -c7-,1-5 felixis.txt</code> &lt;==å–ç¬¬7ä¸ªå­—ç¬¦åˆ°ç»“å°¾ï¼Œå†å–1-5äº”ä¸ªå­—ç¬¦<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-221.png" alt="cut"></p>
</blockquote>
<h3 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h3><p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-222.png" alt="upload successful"></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">å¤æ‚è¯­æ³•ï¼š</span><br><span class="line"><span class="string">'$'</span>    æ–‡ä»¶æœ€åä¸€è¡Œï¼Œ</span><br><span class="line"><span class="string">'!'</span>     ä¸è¿›è¡Œ</span><br><span class="line"><span class="string">'N'</span>    è¯»å…¥ä¸‹ä¸€è¡Œå¹¶åŠ å…¥ç¼“å­˜å°¾ï¼›</span><br><span class="line"><span class="string">';'</span>     è¯­å¥åˆ†éš”</span><br><span class="line"><span class="string">'/'</span>     æŸ¥æ‰¾ï¼ˆèµ·å§‹ï¼‰</span><br><span class="line"><span class="string">'\n'</span>   æ¢è¡Œç¬¦ï¼ˆè½¬æ„å†™æ³•ï¼‰</span><br><span class="line"><span class="string">'Number'</span>    Numberï¼ˆå­—ç¬¦åºåˆ—ï¼‰</span><br><span class="line"><span class="string">'/'</span>    ï¼ˆæŸ¥æ‰¾ç»“æŸï¼‰</span><br><span class="line"><span class="string">'P'</span>    è¾“å‡ºç¼“å­˜ä¸­é¡ºåºç¬¬ä¸€å­—ç¬¦åˆ°â€™\n<span class="string">'ä¹‹é—´çš„å­—ç¬¦åºåˆ—</span></span><br><span class="line"><span class="string">'</span>D<span class="string">'    åˆ é™¤ç¼“å­˜ä¸­é¡ºåºç¬¬ä¸€å­—ç¬¦åˆ°â€™\n'</span>ä¹‹é—´çš„å­—ç¬¦åºåˆ—</span><br><span class="line"></span><br><span class="line">sed <span class="string">'/abc/d;/efg/d'</span> a.txt &gt; a.log   åˆ é™¤abcæˆ–efgçš„è¡Œ</span><br><span class="line">å…¶ä¸­ï¼Œ<span class="string">"abc"</span>ä¹Ÿå¯ä»¥ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥ä»£æ›¿</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p><strong>sedæ¡ˆä¾‹1:</strong> æ‰“å°äºŒåˆ°ä¸‰è¡Œ<br><code>sed -n '2,3p' test.txt</code> &lt;==å–æ¶ˆé»˜è®¤è¾“å‡º<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-223.png" alt="æ¡ˆä¾‹1"></p>
</blockquote>
<blockquote>
<p><strong>sedæ¡ˆä¾‹2:</strong> è¿‡æ»¤å‡ºå«æœ‰oldboyå­—ç¬¦ä¸²çš„è¡Œâ€»<br><code>sed -n '/oldboy/p' test.txt</code><br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-224.png" alt="æ¡ˆä¾‹2"></p>
</blockquote>
<blockquote>
<p><strong>sedæ¡ˆä¾‹3:</strong> åˆ é™¤å«æœ‰oldboyå­—ç¬¦ä¸²çš„è¡Œâ€»<br><code>sed '/oldboy/d' test.txt</code> &lt;==æœªæ›´æ”¹æºæ–‡ä»¶<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-225.png" alt="æ¡ˆä¾‹3"><br>æŒ‰è¡Œåˆ é™¤<br><code>sed  '2d' test.txt</code> &lt;==åˆ é™¤ç¬¬äºŒè¡Œ åŠ -iå†™å…¥æ–‡ä»¶;ä¹Ÿå¯ â€˜5,8dâ€™ åˆ é™¤5-8è¡Œ<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-226.png" alt="æ¡ˆä¾‹3"></p>
</blockquote>
<blockquote>
<p><strong>sedæ¡ˆä¾‹4:</strong> å°†æ–‡ä»¶ä¸­çš„oldboyå­—ç¬¦ä¸²å…¨éƒ¨æ›¿æ¢ä¸ºoldgirlâ€»<br>vimä¸­çš„æ›¿æ¢ :%s/oldboy/oldgirl/g<br><code>sed 's/oldboy/oldgirl/g' test.txt</code>  &lt;== -i ç›´æ¥ä¿®æ”¹æ–‡ä»¶<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-227.png" alt="æ¡ˆä¾‹4"></p>
</blockquote>
<blockquote>
<p><strong>sedæ¡ˆä¾‹5:</strong> ä¸€æ¬¡æ€§æ›¿æ¢å¤šæ¬¡,æ›¿æ¢oldboyä¸ºfelix and 49000448ä¸º513247869<br><code>sed -e 's/oldboy/felix/g' -e 's/49000448/513247869/g' test.txt</code> &lt;==-eå¤šæ¬¡ç¼–è¾‘,å¯é€šè¿‡-i ç›´æ¥ä¿®æ”¹æ–‡ä»¶<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-228.png" alt="æ¡ˆä¾‹5"></p>
</blockquote>
<blockquote>
<p><strong>sedæ¡ˆä¾‹6:</strong> è¿½åŠ  a æŒ‰è¡Œè¿½åŠ <br><code>sed '2a woca' test.txt</code>  &lt;==åœ¨ç¬¬äºŒè¡Œåé¢è¿½åŠ  wocao<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-229.png" alt="æ¡ˆä¾‹6"></p>
</blockquote>
<blockquote>
<p><strong>sedæ¡ˆä¾‹7:</strong> æ’å…¥ i åœ¨æŒ‡å®šè¡Œæ’å…¥<br><code>sed '2i wocacharu\nç¬¬äºŒè¡Œ\nç¬¬ä¸‰è¡Œ' test.txt est.txt</code> &lt;== åŠ ä¸Š\n å¯æ’å…¥å¤šè¡Œ<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-230.png" alt="æ¡ˆä¾‹7"></p>
</blockquote>
<p><strong>sedç»ƒä¹ </strong><br>æ­£åˆ™æ˜¯è´ªå©ªåŒ¹é…æ¨¡å¼ã€‚</p>
<p><strong>ifconfigå–ip</strong><br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-231.png" alt="ifconfig"><br><code>ifconfig ens3 | sed -n 2p | sed 's/^.*inet //g' | sed 's/  netm.*$//g'</code><br>è¾“å‡ºï¼š10.93.169.253</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ifconfig ens3 &lt;===æŸ¥çœ‹ens3ç½‘å¡çš„é…ç½®ä¿¡æ¯</span><br><span class="line">sed -n 2p     &lt;===å–å‡ºç¬¬2è¡Œ</span><br><span class="line">sed 's/^.*inet //g'   &lt;===å¼€å§‹åŒ¹é…ä»¥ä»»æ„å­—ç¬¦å¼€å¤´,åŒ¹é…åˆ°(inet )åç»“æŸ,å¹¶ä¸”æ›¿æ¢ä¸ºç©º(å³åˆ é™¤åŒ¹é…åˆ°çš„å­—ç¬¦)</span><br><span class="line">sed 's/  netm.*$//g &lt;===ç»§ç»­åŒ¹é…ä»¥(  netm)ä¸”ä»»æ„å­—ç¬¦ç»“å°¾,å¹¶ä¸”æ›¿æ¢ä¸ºç©º(å³åˆ é™¤åŒ¹é…åˆ°çš„å­—ç¬¦)</span><br></pre></td></tr></tbody></table></figure>
<p><strong>æ–¹æ³•è®ºï¼š</strong><br>è¦å–å‡ºç›®æ ‡,åˆ é™¤ç›®æ ‡ä¸¤è¾¹çš„,å°±å¾—åˆ°äº†ç›®æ ‡:å…ˆåŒ¹é…ä¸Š,ç„¶åå†åˆ é™¤.</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@lihuaning felix]<span class="comment"># ifconfig ens3 | sed -n 2p | sed -e 's/^.*inet //g' -e 's/  netm.*$//g'  &lt;===é€šè¿‡-e è¿›è¡Œå¤šæ¬¡ç¼–è¾‘,å‡å°‘äº†ç®¡é“çš„ä½¿ç”¨</span></span><br><span class="line"></span><br><span class="line">[root@lihuaning felix]<span class="comment"># ifconfig ens3 | sed -ne 's/^.*inet //g' -e 's/  netm.*$//gp'  &lt;===é€šè¿‡-n å–æ¶ˆé»˜è®¤è¾“å‡º,å†åœ¨ç»“å°¾é€šè¿‡pè¾“å‡ºå·²ç»åŒ¹é…åˆ°çš„ä¸œè¥¿</span></span><br><span class="line"></span><br><span class="line">[root@lihuaning felix]<span class="comment"># ifconfig ens3 | sed -nr '2s#^.*inet (.*)  netmask.*$#\1#gp'  &lt;===é€šè¿‡\1å°†ç¬¬ä¸€ä¸ªæ‹¬å·é‡ŒåŒ¹é…åˆ°çš„ä¸œè¥¿é€šè¿‡pæ‰“å°è¾“å‡º</span></span><br><span class="line">10.93.169.253</span><br><span class="line">ifconfig ens3  &lt;===æŸ¥çœ‹ens3ç½‘å¡é…ç½®ä¿¡æ¯</span><br><span class="line">sed -nr <span class="string">'2s#^.*inet (.*)  netmask.*$#\1#gp'</span>   &lt;== -nå‚æ•°å–æ¶ˆé»˜è®¤è¾“å‡º,-rå‚æ•°æ”¯æŒEREæ‰©å±•å…ƒå­—ç¬¦åœ¨è¿™é‡ŒæŒ‡æ‹¬å·()ã€‚å–å‡ºç¬¬äºŒè¡Œ,åŒ¹é…å‡ºinetåŠå…¶å¼€å¤´å’ŒnetmaskåŠå…¶æœ«å°¾,ç„¶åé€šè¿‡\nå–å‡ºå†…å®¹å¹¶æ›¿æ¢ä¸º (.*)æ‰€åŒ¹é…åˆ°çš„ip,å¹¶å®ƒé€šè¿‡å†…ç½®å‘½ä»¤ç¬¦pæ‰“å°å‡ºæ¥.</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æˆªå–ç¬¬å››è¡Œ æƒé™éƒ¨åˆ† ä¸å«0</strong><br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-232.png" alt="qx"></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@lihuaning felix]<span class="comment"># stat /etc/hosts | sed -nr '4s#^.*\(0([0-9]*)/-.*$#\1#gp'</span></span><br><span class="line">644</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ip addr å–å‡ºip</strong><br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-233.png" alt="ip"></p>
<h3 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h3><p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-234.png" alt="grep"></p>
<h3 id="find"><a href="#find" class="headerlink" title="find"></a>find</h3><p><strong>findå‘½ä»¤</strong><br><strong>åŸç†ï¼š</strong>ç£ç›˜éå†ï¼ˆé€Ÿåº¦æ…¢ï¼‰<br><strong>ç”¨æ³•ï¼š</strong>æŒ‰æ–‡ä»¶åæŸ¥æ‰¾ï¼šè·¯å¾„ åå­—(-name) â€œå…·ä½“çš„æ–‡ä»¶*â€<br><strong>å‚æ•°ï¼š</strong></p>
<ul>
<li>-name æŒ‰æ–‡ä»¶åæŸ¥æ‰¾</li>
<li>-type æŒ‰æ–‡ä»¶ç±»å‹æŸ¥æ‰¾</li>
<li>-exec å¯¹æŸ¥æ‰¾çš„ç»“æœè¿›è¡Œå†å¤„ç†</li>
<li>-mtime æŒ‰ä¿®æ”¹æ—¶é—´æŸ¥æ‰¾<ul>
<li>-4 è¡¨ç¤ºæ–‡ä»¶æ›´æ”¹æ—¶é—´è·ç°åœ¨4å¤©ä»¥å†…</li>
<li>+4 è¡¨ç¤ºæ–‡ä»¶æ›´æ”¹æ—¶é—´è·ç°åœ¨4å¤©ä»¥å‰</li>
<li>4 è¡¨ç¤ºç¬¬4å¤©<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-235.png" alt="find"></li>
<li>-perm æŒ‰æƒé™æŸ¥æ‰¾<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-236.png" alt="find"></li>
<li>-a and å¹¶ä¸”</li>
<li>-o or æˆ–è€…</li>
<li>! å–å æ”¾åœ¨å“ªä¸ªå‚æ•°åé¢ï¼Œå°±å¯¹è¯¥å‚æ•°çš„ç»“æœå–å</li>
</ul>
</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<ol>
<li><code>find ~/felix -name "felix*" -type f  -exec ls -l {} \;</code>ï¼ˆ{} è¡¨å ä½ç¬¦ï¼Œå°†-execä¹‹å‰å¤„ç†çš„ç»“æœæ”¾å…¥å…¶ä¸­è¿›è¡Œå†å¤„ç†ï¼Œâ€;â€œä½œä¸ºç»“æŸæ ‡è¯†ç¬¦ï¼Œè€ƒè™‘åˆ°å„ç³»ç»Ÿä¸­åˆ†å·ä¼šæœ‰ä¸åŒçš„æ„ä¹‰ï¼Œæ‰€ä»¥å‰é¢è¦åŠ åæ–œæ å¯¹åˆ†å·è¿›è¡Œè½¬ä¹‰ã€‚ï¼‰</li>
<li><code>find / -type d[f] -name "felix"</code> æŒ‰æ–‡ä»¶ç±»å‹æŸ¥æ‰¾ï¼Œå¤šå‚æ•°å¹¶å­˜å–äº¤é›†</li>
<li><code>find / -type d -o -name "felix"</code>  //-oå‚æ•°å–å¹¶é›†ï¼ˆç»“æœåŒ¹é…åˆ°äº†ï¼šæ‰€æœ‰ç›®å½• å’Œ æ–‡ä»¶åä¸ºfelixçš„æ–‡ä»¶ï¼‰</li>
</ol>
<p><strong>xargs</strong><br>åˆ†ç»„ï¼Œæˆ–ä»æ ‡å‡†è¾“å…¥æ‰§è¡Œå‘½ä»¤</p>
<ul>
<li>-næ•°å­— æ¯ä¸ªåˆ†ç»„åŒ…å«å‡ ä¸ªå…ƒç´ </li>
<li>-dâ€â€ æŒ‡å®šåˆ†éš”ç¬¦ï¼Œä¸æŒ‡å®šé»˜è®¤æ˜¯ç©ºæ ¼</li>
<li>-i æŠŠ{}å½“ä½œå‰é¢æŸ¥æ‰¾çš„ç»“æœ</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong><br><code>find ./ -name "felix*" -type f | xargs -i cp {} /root/1/</code> //ä»æ ‡å‡†è¾“å…¥æ‰§è¡Œå‘½ä»¤</p>
<h2 id="SHELLè„šæœ¬"><a href="#SHELLè„šæœ¬" class="headerlink" title="SHELLè„šæœ¬"></a>SHELLè„šæœ¬</h2><h3 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h3><p><strong>shellç™»å½•æ–¹å¼ï¼š</strong></p>
<ul>
<li>é€šè¿‡ç³»ç»Ÿç”¨æˆ·ç™»å½•åé»˜è®¤è¿è¡Œçš„Shell</li>
<li>éç™»å½•äº¤äº’å¼è¿è¡ŒShellï¼ˆæ‰‹åŠ¨æ•²ä¸‹bashæˆ–ä¸éœ€è¦è¾“å¯†ç æˆ–è¿œç¨‹sshç­‰æ“ä½œï¼‰</li>
<li>æ‰§è¡Œè„šæœ¬è¿è¡Œéäº¤äº’å¼Shell</li>
</ul>
<p>æ­£å¸¸ç™»å½•æ—¶çš„åŠ è½½é¡ºåºï¼š<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-254.png" alt="load"></p>
<p><strong>çˆ¶å­shellé—®é¢˜ï¼š</strong><br>ä½¿ç”¨shæˆ–bashæˆ–è€…é»˜è®¤æ‰§è¡Œè„šæœ¬æ—¶ï¼Œä¼šå¼€å¯ä¸€ä¸ªå­Shellè¿è¡Œï¼Œè€Œä½¿ç”¨sourceæˆ–è€….æ‰§è¡Œè„šæœ¬ï¼Œåˆ™ä¸ä¼šå¼€å­Shellï¼Œè€Œæ˜¯åœ¨åŒä¸€ä¸ªShellé‡Œæ‰§è¡Œã€‚</p>
<p>é€šè¿‡sourceæˆ–â€.â€ç‚¹å·åŠ è½½æ‰§è¡Œè¿‡çš„è„šæœ¬ï¼Œç”±äºæ˜¯åœ¨å½“å‰Shellä¸­æ‰§è¡Œè„šæœ¬ï¼Œå› æ­¤åœ¨è„šæœ¬ç»“æŸåï¼Œè„šæœ¬ä¸­çš„å˜é‡ï¼ˆåŒ…æ‹¬å‡½æ•°ï¼‰å€¼åœ¨å½“å‰Shellä¸­ä¾ç„¶å­˜åœ¨ï¼Œè€Œshå’Œbashæ‰§è¡Œè„šæœ¬éƒ½ä¼šå¯åŠ¨æ–°çš„å­Shellæ‰§è¡Œï¼Œæ‰§è¡Œå®Œåé€€å›åˆ°çˆ¶Shellã€‚æ‰€ä»¥ï¼Œå˜é‡ï¼ˆåŒ…æ‹¬å‡½æ•°ï¼‰å€¼ç­‰æ— æ³•ä¿ç•™ã€‚</p>
<p>å› æ­¤ï¼Œåœ¨åšShellè„šæœ¬å¼€å‘æ—¶ï¼Œå¦‚æœè„šæœ¬ä¸­æœ‰å¼•ç”¨æˆ–æ‰§è¡Œå…¶ä»–è„šæœ¬çš„å†…å®¹æˆ–è€…é…ç½®æ–‡ä»¶çš„éœ€æ±‚æ—¶ï¼Œæœ€å¥½ç”¨â€œâ€ç‚¹å·æˆ–sourceå…ˆåŠ è½½è¯¥è„šæœ¬æˆ–é…ç½®æ–‡ä»¶ï¼Œè¿™æ ·å¤„ç†åï¼Œåœ¨åŠ è½½è„šæœ¬ä¸‹é¢å°±å¯ä»¥è°ƒç”¨sourceåŠ è½½çš„è„šæœ¬åŠé…ç½®æ–‡ä»¶ä¸­å˜é‡åŠå‡½æ•°ç­‰å†…å®¹äº†ã€‚</p>
<p><strong>å˜é‡ï¼š</strong><br>ç¯å¢ƒå˜é‡ï¼šåˆç§°ä¸ºå…¨å±€å˜é‡</p>
<ul>
<li>å†…ç½®ç¯å¢ƒå˜é‡</li>
<li>è‡ªå®šä¹‰ç¯å¢ƒå˜é‡</li>
</ul>
<p>æŸ¥çœ‹ï¼šenvå‘½ä»¤<br><strong>å®šä¹‰ï¼š</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">æ–¹æ³•1:</span><br><span class="line">[root@Felix ~]<span class="comment"># export FELIX=1</span></span><br><span class="line">[root@Felix ~]<span class="comment"># echo $FELIX</span></span><br><span class="line">1</span><br><span class="line"></span><br><span class="line">æ–¹æ³•2ï¼š</span><br><span class="line">[root@Felix ~]<span class="comment"># QIAOMU=2</span></span><br><span class="line">[root@Felix ~]<span class="comment"># export QIAOMU  &lt;==ä¸ç”¨exportå¯¼å‡ºçš„è¯ï¼Œå°±æ˜¯æ™®é€šå˜é‡</span></span><br><span class="line">[root@Felix ~]<span class="comment"># echo $QIAOMU</span></span><br><span class="line">2</span><br><span class="line"></span><br><span class="line">æ–¹æ³•3ï¼š</span><br><span class="line">[root@Felix ~]<span class="comment"># declare -x FLX=3</span></span><br><span class="line">[root@Felix ~]<span class="comment"># echo $FLX</span></span><br><span class="line">3</span><br></pre></td></tr></tbody></table></figure>
<p>æ°¸ä¹…ç”Ÿæ•ˆï¼šå¯ä»¥æ”¾å…¥/etc/bashrcä¸­ã€‚</p>
<p><strong>å–æ¶ˆï¼š</strong>unset FLX<br><strong>æ³¨æ„ï¼š</strong>ä¹¦å†™crondå®šæ—¶ä»»åŠ¡æ—¶è¦æ³¨æ„ï¼Œè„šæœ¬ä¸­ç”¨åˆ°çš„ç¯å¢ƒå˜é‡æœ€å¥½åœ¨æ‰§è¡Œçš„Shellè„šæœ¬ä¸­é‡æ–°å®šä¹‰ã€‚</p>
<p><strong>æ™®é€šå˜é‡ï¼š</strong>åˆç§°ä¸ºå±€éƒ¨å˜é‡<br><strong>èµ‹å€¼æ–¹æ³•ï¼š</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å˜é‡å=value   <span class="comment">#&lt;==èµ‹å€¼æ—¶ä¸åŠ å¼•å·ã€‚</span></span><br><span class="line">å˜é‡å=<span class="string">'value'</span>  <span class="comment">#&lt;==èµ‹å€¼æ—¶åŠ å•å¼•å·ã€‚</span></span><br><span class="line">å˜é‡å=<span class="string">"value"</span> <span class="comment">#&lt;==èµ‹å€¼æ—¶åŠ åŒå¼•å·ã€‚</span></span><br><span class="line">å˜é‡å=`<span class="built_in">ls</span>`     <span class="comment">#&lt;==èµ‹å€¼æ—¶åŠ åå¼•å·ã€‚</span></span><br></pre></td></tr></tbody></table></figure>
<p><strong>å¸¸è§„æ™®é€šå˜é‡å®šä¹‰ï¼š</strong><br>å˜é‡å†…å®¹ä¸ºè¿ç»­æ•°å­—æˆ–å­—ç¬¦ä¸²æ—¶èµ‹å€¼ï¼Œå˜é‡å†…å®¹ä¸¤è¾¹å¯ä»¥ä¸åŠ å¼•å·ï¼Œä¾‹å¦‚a=123ã€‚</p>
<ol>
<li><p>å˜é‡çš„å†…å®¹å¾ˆå¤šï¼Œæœ‰ç©ºæ ¼ä¸”å¸Œæœ›è§£æå†…å®¹ä¸­çš„å˜é‡ï¼Œå°±åŠ åŒå¼•å·ï¼Œä¾‹å¦‚a=â€/etc/rc.local $USERâ€ï¼Œæ­¤æ—¶è¾“å‡ºå˜é‡ä¼šå¯¹å†…å®¹ä¸­çš„$USERè¿›è¡Œè§£æç„¶åå†è¾“å‡ºã€‚(psï¼šåŒå¼•å·è§£æå˜é‡)</p>
</li>
<li><p>å¸Œæœ›åŸæ ·è¾“å‡ºå˜é‡çš„å†…å®¹æ—¶å°±ç”¨å•å¼•å·å¼•èµ·å†…å®¹è¿›è¡Œèµ‹å€¼ï¼Œä¾‹å¦‚ï¼ša=â€™$USERâ€™ã€‚ï¼ˆpsï¼šå•å¼•å·æ‰€è§å³æ‰€å¾—ï¼‰</p>
</li>
<li><p>å¸Œæœ›å˜é‡å†…å®¹æ˜¯å‘½ä»¤çš„è§£æç»“æœçš„å®šä¹‰åŠèµ‹å€¼ï¼š(psï¼š$()æˆ–` `å¯ä»¥è§£æå‘½ä»¤) è¦ä½¿ç”¨åå¼•å·å°†èµ‹å€¼çš„å‘½ä»¤æ‹¬èµ·æ¥ï¼Œä¾‹å¦‚ï¼ša=`ls`ï¼Œæˆ–è€…ç”¨$() æ‹¬èµ·æ¥ï¼Œä¾‹å¦‚ï¼ša=$(ls)ã€‚</p>
</li>
<li><p>{é‡‘åº¸æ–°}è‘— å¤©å­å¿ƒç»ï¼ˆpsï¼š{}å¤§æ‹¬å·ç”¨äºåŒºåˆ†å˜é‡ä¸å­—ç¬¦ä¸²ï¼‰</p>
</li>
</ol>
<p><strong>ç‰¹æ®Šçš„awkï¼š</strong><br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-255.png" alt="awk"></p>
<p><strong>å˜é‡æ€»ç»“ï¼š</strong></p>
<ol>
<li>å˜é‡å<br>å˜é‡åç»„æˆã€å®šä¹‰è§„èŒƒ</li>
<li>ç­‰å·<br>èµ‹å€¼ç¬¦ï¼Œä¸¤è¾¹ä¸èƒ½æœ‰ç©ºæ ¼</li>
<li>å˜é‡å†…å®¹<br>å•å¼•å·(æ‰€è§å³æ‰€å¾—)ã€åŒå¼•å·(è§£æå˜é‡)ã€åå¼•å·(è§£æå‘½ä»¤)ã€ä¸åŠ å¼•å·(è¿ç»­çš„æ•°å­—æˆ–å­—ç¬¦ä¸²èµ‹å€¼)</li>
<li>è¾“å‡º<br>ç”¨echo æˆ– printf<br>å˜é‡ååŠ $ç¬¦å·ï¼Œå¦‚æœå˜é‡åé¢æœ‰å†…å®¹ï¼Œç”¨{}å¼•ç”¨å˜é‡éƒ¨åˆ†ã€‚</li>
</ol>
<h3 id="ç‰¹æ®Šå˜é‡"><a href="#ç‰¹æ®Šå˜é‡" class="headerlink" title="ç‰¹æ®Šå˜é‡"></a>ç‰¹æ®Šå˜é‡</h3><p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-263.png" alt="ç‰¹æ®Šå˜é‡"><br><strong>å¸¸ç”¨ç‰¹æ®Šä½ç½®å˜é‡ï¼š</strong></p>
<ul>
<li>$0 è·å–å½“å‰æ‰§è¡ŒShellè„šæœ¬æ–‡ä»¶åï¼Œå¦‚æœæ‰§è¡Œè„šæœ¬å¸¦è·¯å¾„ï¼Œé‚£ä¹ˆå°±åŒ…æ‹¬è„šæœ¬è·¯å¾„</li>
<li>$n è·å–å½“å‰æ‰§è¡Œçš„shellè„šæœ¬çš„ç¬¬nä¸ªå‚æ•°å€¼ï¼Œn=1..9ï¼Œå½“nä¸º0æ—¶è¡¨ç¤ºè„šæœ¬çš„æ–‡ä»¶åï¼Œå¦‚æœnå¤§äº9ï¼Œåˆ™ç”¨å¤§æ‹¬å·æ‹¬èµ·æ¥ï¼Œä¾‹å¦‚${10}ï¼Œé˜²æ­¢é‡‘åº¸æ–°çš„æƒ…å†µå‡ºç°ï¼Œæ¥çš„å‚æ•°ä»¥ç©ºæ ¼éš”å¼€</li>
<li>$# è·å–å½“å‰æ‰§è¡Œçš„shellè„šæœ¬åé¢æ¥çš„å‚æ•°çš„æ€»ä¸ªæ•°</li>
<li>$* è·å–å½“å‰æ‰§è¡Œçš„shellè„šæœ¬çš„æ‰€æœ‰å‚æ•°ï¼Œä½†æ˜¯å°†æ‰€æœ‰å‚æ•°è§†ä¸ºä¸€ä¸ªå•ä¸ªå­—ç¬¦ä¸²â€$1 $2 $3â€</li>
<li>$@ è·å–å½“å‰æ‰§è¡Œçš„shellè„šæœ¬çš„æ‰€æœ‰å‚æ•°ï¼Œä½†æ˜¯å°†æ‰€æœ‰å‚æ•°æ˜¯ä¸ºç‹¬ç«‹å­—ç¬¦ä¸²â€$1â€ â€œ$2â€ â€œ$3â€</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@db02 ~]<span class="comment"># set -- "I am" itsix felix</span></span><br><span class="line">[root@db02 ~]<span class="comment"># echo $1</span></span><br><span class="line">I am</span><br><span class="line">[root@db02 ~]<span class="comment"># echo $2</span></span><br><span class="line">itsix</span><br><span class="line">[root@db02 ~]<span class="comment"># echo $3</span></span><br><span class="line">felix</span><br><span class="line">[root@db02 ~]<span class="comment"># echo $#</span></span><br><span class="line">3</span><br><span class="line">[root@db02 ~]<span class="comment"># echo $*</span></span><br><span class="line">I am itsix felix</span><br><span class="line">[root@db02 ~]<span class="comment"># echo $@</span></span><br><span class="line">I am itsix felix</span><br></pre></td></tr></tbody></table></figure>
<p><strong>shellè¿›ç¨‹ç‰¹æ®ŠçŠ¶æ€å˜é‡</strong></p>
<ul>
<li>$? è·å–æ‰§è¡Œä¸Šä¸€ä¸ªæŒ‡ä»¤çš„æ‰§è¡ŒçŠ¶æ€è¿”å›å€¼ï¼ˆ0ä¸ºæˆåŠŸï¼Œéé›¶ä¸ºå¤±è´¥ï¼‰ï¼Œè¿™ä¸ªå˜é‡æœ€å¸¸ç”¨</li>
<li>$$ è·å–å½“å‰æ‰§è¡Œçš„shellè„šæœ¬çš„è¿›ç¨‹å·ï¼ˆPIDï¼‰ï¼Œè¿™ä¸ªå˜é‡ä¸å¸¸ç”¨ï¼Œäº†è§£å³å¯</li>
<li>$! è·å–ä¸Šä¸€ä¸ªåœ¨åå°å·¥ä½œçš„è¿›ç¨‹çš„è¿›ç¨‹å·ï¼ˆPIDï¼‰ï¼Œè¿™ä¸ªå˜é‡ä¸å¸¸ç”¨ï¼Œäº†è§£å³å¯</li>
<li>$_ è·å–åœ¨æ­¤ä¹‹å‰æ‰§è¡Œçš„å‘½ä»¤æˆ–è„šæœ¬çš„æœ€åä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå˜é‡ä¸å¸¸ç”¨ï¼Œäº†è§£å³å¯</li>
</ul>
<h3 id="å˜é‡å­ä¸²"><a href="#å˜é‡å­ä¸²" class="headerlink" title="å˜é‡å­ä¸²"></a>å˜é‡å­ä¸²</h3><p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-264.png" alt="å˜é‡å­ä¸²"></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">${parameter}</span>è¿”å›å˜é‡<span class="variable">$parameter</span>çš„å†…å®¹</span><br><span class="line"><span class="variable">${#parameter}</span> è¿”å›å˜é‡<span class="variable">$parameter</span>å†…å®¹çš„é•¿åº¦ï¼ˆæŒ‰å­—ç¬¦ï¼‰ï¼Œä¹Ÿé€‚åˆç‰¹æ®Šå˜é‡*</span><br><span class="line"><span class="variable">${parameter:offset}</span>åœ¨å˜é‡<span class="variable">${parameter}</span>ä¸­ï¼Œä»ä½ç½®offsetä¹‹åå¼€å§‹æå–å­ä¸²åˆ°ç»“å°¾</span><br><span class="line"><span class="variable">${parameter:offset:length}</span>åœ¨å˜é‡<span class="variable">${parameter}</span>ä¸­ï¼Œä»ä½ç½®offsetä¹‹åå¼€å§‹æå–é•¿åº¦ä¸ºlengthçš„å­ä¸²</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@db02 ~]<span class="comment"># echo ${OLDBOY}</span></span><br><span class="line">I am oldboy</span><br><span class="line">[root@db02 ~]<span class="comment"># echo ${#OLDBOY}  &lt;==è¿”å›å˜é‡å†…å®¹é•¿åº¦ã€‚**</span></span><br><span class="line">11</span><br><span class="line">[root@db02 ~]<span class="comment"># echo ${OLDBOY:5:3}  &lt;==ä»ç¬¬äº”ä¸ªå­—ç¬¦å¼€å§‹ï¼Œå¾€åå–ä¸‰ä¸ªå­—ç¬¦ã€‚**</span></span><br><span class="line">old</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å­—ä¸²åº”ç”¨-åˆ é™¤</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä»å¼€å¤´åˆ é™¤</span></span><br><span class="line"><span class="variable">${parameter#word}</span>		ä»å˜é‡<span class="variable">${parameter}</span>ã€å¼€å¤´ã€‘å¼€å§‹åˆ é™¤æœ€ã€çŸ­ã€‘åŒ¹é…çš„wordå­ä¸²</span><br><span class="line"><span class="variable">${parameter##word}</span>		ä»å˜é‡<span class="variable">${parameter}</span>ã€å¼€å¤´ã€‘å¼€å§‹åˆ é™¤æœ€ã€é•¿ã€‘åŒ¹é…çš„wordå­ä¸²</span><br></pre></td></tr></tbody></table></figure>
<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-256.png" alt="delete"></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä»ç»“å°¾åˆ é™¤</span></span><br><span class="line"><span class="variable">${parameter%word}</span>		ä»å˜é‡<span class="variable">${parameter}</span>ç»“å°¾å¼€å§‹åˆ é™¤æœ€çŸ­åŒ¹é…çš„wordå­ä¸²</span><br><span class="line"><span class="variable">${parameter%%word}</span>		ä»å˜é‡<span class="variable">${parameter}</span>ç»“å°¾å¼€å§‹åˆ é™¤æœ€é•¿åŒ¹é…çš„wordå­ä¸²</span><br></pre></td></tr></tbody></table></figure>
<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-257.png" alt="delete"><br><strong>åˆ é™¤å°ç»“ï¼š</strong></p>
<ul>
<li>#è¡¨ç¤ºä»å¼€å¤´åˆ é™¤åŒ¹é…æœ€çŸ­ã€‚</li>
<li>##è¡¨ç¤ºä»å¼€å¤´åˆ é™¤åŒ¹é…æœ€é•¿ã€‚</li>
<li>%è¡¨ç¤ºä»ç»“å°¾åˆ é™¤åŒ¹é…æœ€çŸ­ã€‚</li>
<li>%%è¡¨ç¤ºä»ç»“å°¾åˆ é™¤åŒ¹é…æœ€é•¿ã€‚</li>
<li>a*cè¡¨ç¤ºåŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œ<em>åŒ¹é…æ‰€æœ‰ï¼Œa</em>cåŒ¹é…å¼€å¤´ä¸ºaä¸­é—´ä»»æ„å¤šä¸ªå­—ç¬¦ç»“å°¾ä¸ºcçš„ã€‚</li>
<li>a*Cè¡¨ç¤ºåŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œ<em>åŒ¹é…æ‰€æœ‰ï¼Œa</em>CåŒ¹é…å¼€å¤´ä¸ºaä¸­é—´ä»»æ„å¤šä¸ªå­—ç¬¦ç»“å°¾ä¸ºCçš„ã€‚<br>å£è¯€ï¼šä¸€ä¸ªåŒ¹é…åˆ é™¤æœ€çŸ­ï¼Œä¸¤ä¸ªåŒ¹é…åˆ é™¤æœ€é•¿</li>
</ul>
<p><strong>å­—ä¸²åº”ç”¨-æ›¿æ¢</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç±»ä¼¼sedæ›¿æ¢</span></span><br><span class="line"><span class="variable">${parameter/pattern/string}</span>	    ä½¿ç”¨stringä»£æ›¿ç¬¬ä¸€ä¸ªåŒ¹é…çš„pattern</span><br><span class="line"><span class="variable">${parameter//pattern/string}</span>	ä½¿ç”¨stringä»£æ›¿æ‰€æœ‰åŒ¹é…çš„pattern</span><br><span class="line">[root@db02 ~]<span class="comment"># OLDBOY="I am Felix. yes. Felix."</span></span><br><span class="line">[root@db02 ~]<span class="comment"># echo $OLDBOY</span></span><br><span class="line">I am Felix. <span class="built_in">yes</span>. Felix.</span><br><span class="line">[root@db02 ~]<span class="comment"># echo ${OLDBOY/Felix/bangbang}</span></span><br><span class="line">I am bangbang. <span class="built_in">yes</span>. Felix.</span><br><span class="line">[root@db02 ~]<span class="comment"># echo ${OLDBOY//Felix/bangbang}</span></span><br><span class="line">I am bangbang. <span class="built_in">yes</span>. bangbang.</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è·å–å˜é‡å†…å®¹é•¿åº¦çš„æ–¹æ³•ï¼š</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$OLDBOY</span>|<span class="built_in">wc</span> -L</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">${#OLDBOY}</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">expr</span> length <span class="string">"<span class="variable">$OLDBOY</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$OLDBOY</span>|awk <span class="string">'{print length}'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$OLDBOY</span>|awk <span class="string">'{print length($0)}'</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ç»ƒä¹ ï¼šå¥å­ä¸­å°äº6ä¸ªå­—ç¬¦çš„å•è¯æ‰“å°å‡ºæ¥</p>
</blockquote>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Whatever is worth doing is worth doing well.</span><br><span class="line">[root@db02 ~]<span class="comment"># sh ww.sh </span></span><br><span class="line">is</span><br><span class="line">worth</span><br><span class="line">doing</span><br><span class="line">is</span><br><span class="line">worth</span><br><span class="line">doing</span><br><span class="line">well.</span><br><span class="line">[root@db02 ~]<span class="comment"># cat ww.sh </span></span><br><span class="line">judge=<span class="string">"Whatever is worth doing is worth doing well."</span></span><br><span class="line"><span class="keyword">for</span> word <span class="keyword">in</span> <span class="variable">$judge</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="keyword">if</span> [ <span class="variable">${#word}</span> -lt 6 ]</span><br><span class="line">  <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$word</span>"</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></tbody></table></figure>
<h3 id="ç‰¹æ®Šæ‰©å±•å˜é‡"><a href="#ç‰¹æ®Šæ‰©å±•å˜é‡" class="headerlink" title="ç‰¹æ®Šæ‰©å±•å˜é‡"></a>ç‰¹æ®Šæ‰©å±•å˜é‡</h3><p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-258.png" alt="Shellç‰¹æ®Šæ‰©å±•å˜é‡"></p>
<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-265.png" alt="ç‰¹æ®Šæ‰©å±•å˜é‡"><br><code>${parameter:-word}</code>ï¼šä¸»èƒä¸åœ¨å®¶ï¼Œå¤‡èƒå¯ç”¨<br><strong>è§£é‡Šï¼š</strong>å¦‚æœparameter å˜é‡å€¼ä¸ºç©ºæˆ–æœªèµ‹å€¼ï¼Œå°±ä¼šè¿”å›wordå­—ç¬¦ä¸²æ›¿ä»£å˜é‡çš„å€¼ã€‚*<br><strong>ç”¨é€”ï¼š</strong>å¦‚æœå˜é‡æœªå®šä¹‰ï¼Œåˆ™è¿”å›å¤‡ç”¨çš„å€¼ï¼Œé˜²æ­¢å˜é‡ä¸ºç©ºå€¼æˆ–æœªå®šä¹‰è€Œå¯¼è‡´å¼‚å¸¸ã€‚</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@db02 ~]<span class="comment"># test=feichi</span></span><br><span class="line">[root@db02 ~]<span class="comment"># echo $test</span></span><br><span class="line">feichi</span><br><span class="line">[root@db02 ~]<span class="comment"># result=${test:-gun}  &lt;==testå˜é‡å­˜åœ¨ï¼Œæ‰€æœ‰å†…å®¹ä¿æŒä¸å˜</span></span><br><span class="line">[root@db02 ~]<span class="comment"># echo $result</span></span><br><span class="line">feichi</span><br><span class="line">[root@db02 ~]<span class="comment"># unset test  &lt;==åˆ é™¤è¯¥å˜é‡</span></span><br><span class="line">[root@db02 ~]<span class="comment"># echo $test</span></span><br><span class="line"></span><br><span class="line">[root@db02 ~]<span class="comment"># result=${test:-gun}  &lt;==testå˜é‡æœªå®šä¹‰æˆ–ä¸ºç©ºï¼Œè¢«æ›¿æ¢æˆgun</span></span><br><span class="line">[root@db02 ~]<span class="comment"># echo $result</span></span><br><span class="line">gun</span><br><span class="line">[root@db02 ~]<span class="comment"># echo $test</span></span><br></pre></td></tr></tbody></table></figure>

<p><code>${parameter:=word}</code>ï¼šä¸»èƒä¸åœ¨å®¶ï¼Œå¤‡èƒè½¬æ­£<br><strong>è§£é‡Šï¼š</strong>å¦‚æœparameterå˜é‡å€¼ä¸ºç©ºæˆ–æœªèµ‹å€¼ï¼Œå°±è®¾ç½®è¿™ä¸ªå˜é‡å€¼ä¸ºwordï¼Œå¹¶è¿”å›å…¶å€¼ã€‚ä½ç½®å˜é‡å’Œç‰¹æ®Šå˜é‡ä¸é€‚ç”¨ã€‚<br><strong>ç”¨é€”ï¼š</strong>åŸºæœ¬åŒä¸Šä¸€ä¸ª${parameter:-word}ï¼Œä½†æ˜¯åˆé¢å¤–ç»™parameterå˜é‡èµ‹å€¼äº†ã€‚</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@db02 ~]<span class="comment"># felix=feichi</span></span><br><span class="line">[root@db02 ~]<span class="comment"># echo $felix</span></span><br><span class="line">feichi</span><br><span class="line">[root@db02 ~]<span class="comment"># result=${felix:=513247869}  &lt;==ä¸»èƒåœ¨å®¶ï¼Œå¤‡èƒæœªè½¬æ­£</span></span><br><span class="line">[root@db02 ~]<span class="comment"># echo $result</span></span><br><span class="line">feichi</span><br><span class="line">[root@db02 ~]<span class="comment"># echo $felix</span></span><br><span class="line">feichi</span><br><span class="line">[root@db02 ~]<span class="comment"># unset felix  &lt;==åˆ é™¤è¯¥å˜é‡</span></span><br><span class="line">[root@db02 ~]<span class="comment"># echo $felix</span></span><br><span class="line"></span><br><span class="line">[root@db02 ~]<span class="comment"># result=${felix:=513247869}  &lt;==ä¸»èƒä¸åœ¨å®¶ï¼Œå¤‡èƒè½¬æ­£</span></span><br><span class="line">[root@db02 ~]<span class="comment"># echo $felix</span></span><br><span class="line">513247869</span><br><span class="line">[root@db02 ~]<span class="comment"># echo $result</span></span><br><span class="line">513247869</span><br></pre></td></tr></tbody></table></figure>
<p><code>${parameter:?word}</code>ï¼šä¸»èƒä¸åœ¨ï¼Œç›´æ¥æŠ¥é”™<br><strong>è§£é‡Šï¼š</strong>å¦‚æœparameter å˜é‡å€¼ä¸ºç©ºæˆ–æœªèµ‹å€¼ï¼Œwordå­—ç¬¦ä¸²å°†è¢«ä½œä¸ºæ ‡å‡†é”™è¯¯è¾“å‡ºï¼Œå¦åˆ™è¾“å‡ºå˜é‡çš„å€¼ã€‚<br><strong>ç”¨é€”ï¼š</strong>ç”¨äºæ•æ‰ç”±äºå˜é‡æœªå®šä¹‰è€Œå¯¼è‡´çš„é”™è¯¯ï¼Œå¹¶é€€å‡ºç¨‹åºã€‚</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@db02 ~]<span class="comment"># felix=feichi</span></span><br><span class="line">[root@db02 ~]<span class="comment"># echo $felix</span></span><br><span class="line">feichi</span><br><span class="line">[root@db02 ~]<span class="comment"># echo ${felix:?error wocao}  &lt;==ä¸»èƒåœ¨ï¼Œè¾“å‡ºä¸»èƒ</span></span><br><span class="line">feichi</span><br><span class="line">[root@db02 ~]<span class="comment"># unset felix</span></span><br><span class="line">[root@db02 ~]<span class="comment"># echo ${felix:?error wocao}  &lt;==ä¸»èƒä¸åœ¨ï¼Œå°†?åçš„å­—ç¬¦å½“errorè¾“å‡º</span></span><br><span class="line">bash: felix: error wocao</span><br></pre></td></tr></tbody></table></figure>

<p><code>${parameter:+word}</code>ï¼šä¸»èƒåœ¨å®¶ï¼Œ+åé¢çš„å­—ç¬¦è¿›è¡Œæ›¿æ¢ æ¥æŠ¢</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@db02 ~]<span class="comment"># echo $felix</span></span><br><span class="line"></span><br><span class="line">[root@db02 ~]<span class="comment"># result=${felix:+dengao}  &lt;==felixå˜é‡ä¸ºç©ºï¼Œä»€ä¹ˆéƒ½ä¸å¹²</span></span><br><span class="line">[root@db02 ~]<span class="comment"># echo $felix</span></span><br><span class="line"></span><br><span class="line">[root@db02 ~]<span class="comment"># echo $result</span></span><br><span class="line"></span><br><span class="line">[root@db02 ~]<span class="comment"># felix=feichi</span></span><br><span class="line">[root@db02 ~]<span class="comment"># echo $felix</span></span><br><span class="line">feichi</span><br><span class="line">[root@db02 ~]<span class="comment"># result=${felix:+dengao}  &lt;==felixå®šä¹‰äº†å†…å®¹ï¼Œ+åé¢çš„å­—ç¬¦å°†å…¶æ›¿æ¢ä½†ä¸æ”¹å˜felixå˜é‡å†…çš„å†…å®¹</span></span><br><span class="line">[root@db02 ~]<span class="comment"># echo $result</span></span><br><span class="line">dengao</span><br><span class="line">[root@db02 ~]<span class="comment"># echo $felix</span></span><br><span class="line">feichi</span><br></pre></td></tr></tbody></table></figure>

<h3 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h3><p><strong>è¿ç®—ç¬¦ï¼š</strong><br><code>+ã€- </code>ï¼š        åŠ ã€å‡*<br><code>*ã€/ã€%</code>ï¼š    ä¹˜æ³•ã€é™¤æ³•ã€å–ä½™ï¼ˆå–æ¨¡ï¼‰*<br><code>**</code>ï¼š        å¹‚è¿ç®—<br><code>++ã€--</code>ï¼š    å¢åŠ åŠå‡å°‘ï¼Œå¯å‰ç½®ä¹Ÿå¯æ”¾åœ¨å˜é‡ç»“å°¾ï¼Œé»˜è®¤æ­¥é•¿ä¸º1 å¦‚123ï¼Œ321<br><code>!ã€&amp;&amp;ã€||</code>ï¼š    é€»è¾‘é(å–å)ã€é€»è¾‘ä¸(and)ã€é€»è¾‘æˆ–(or)*<br><code>&lt;ã€&lt;=ã€&gt;ã€&gt;=</code>ï¼šæ¯”è¾ƒç¬¦å·ï¼ˆå°äºã€å°äºç­‰äºã€å¤§äºã€å¤§äºç­‰äºï¼‰<br><code>==ã€!=ã€=</code>ï¼š    æ¯”è¾ƒç¬¦å·ï¼ˆç›¸ç­‰ã€ä¸ç›¸ç­‰ã€å¯¹äºå­—ç¬¦ä¸²â€œ=â€ä¹Ÿå¯ä»¥è¡¨ç¤ºç›¸ç­‰ï¼‰*<br><code>&lt;&lt;ã€&gt;&gt;</code>ï¼š    å‘å·¦ç§»ä½ã€å‘å³ç§»ä½<br><code>~ã€|ã€&amp;ã€^</code>ï¼š    æŒ‰ä½å–åã€æŒ‰ä½å¼‚æˆ–ã€æŒ‰ä½ä¸ã€æŒ‰ä½æˆ–<br><code>=ã€+=ã€-=ã€*=ã€/=ã€%=</code>:    èµ‹å€¼è¿ç®—ç¬¦ï¼Œä¾‹å¦‚a+=1ç›¸å½“a=a+1ï¼Œa-=1ç›¸å½“a=a-1*</p>
<p><strong>shellå¸¸è§è¿ç®—å‘½ä»¤ï¼š</strong><br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-259.png" alt="è¿ç®—å‘½ä»¤"><br><strong>æ•°å€¼è¿ç®—ï¼š</strong><br>1ï¼‰æ•´æ•°è¿ç®—ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">æ–¹æ³•1ï¼š<span class="built_in">let</span></span><br><span class="line">[root@db02 ~]<span class="comment"># a=1</span></span><br><span class="line">[root@db02 ~]<span class="comment"># let a=a+1</span></span><br><span class="line">[root@db02 ~]<span class="comment"># echo $a</span></span><br><span class="line">2</span><br><span class="line"></span><br><span class="line">æ–¹æ³•2ï¼š(())</span><br><span class="line">[root@db02 ~]<span class="comment"># a=1</span></span><br><span class="line">[root@db02 ~]<span class="comment"># ((a=a+1))</span></span><br><span class="line">[root@db02 ~]<span class="comment"># echo $a</span></span><br><span class="line">2</span><br><span class="line"></span><br><span class="line">æ–¹æ³•3ï¼š<span class="built_in">expr</span></span><br><span class="line">[root@db02 ~]<span class="comment"># a=10</span></span><br><span class="line">[root@db02 ~]<span class="comment"># expr $a + 10</span></span><br><span class="line">20</span><br><span class="line">[root@db02 ~]<span class="comment"># a=`expr $a + 10`</span></span><br><span class="line">[root@db02 ~]<span class="comment"># echo $a</span></span><br><span class="line">20</span><br><span class="line"></span><br><span class="line">æ–¹æ³•4ï¼š$[]</span><br><span class="line">[root@db02 ~]<span class="comment"># a=11</span></span><br><span class="line">[root@db02 ~]<span class="comment"># echo $[a+11]</span></span><br><span class="line">22</span><br><span class="line">[root@db02 ~]<span class="comment"># c=$[a+11]</span></span><br><span class="line">[root@db02 ~]<span class="comment"># echo $c</span></span><br><span class="line">22</span><br><span class="line"></span><br><span class="line">æ–¹æ³•5ï¼š<span class="built_in">declare</span></span><br><span class="line">[root@db02 ~]<span class="comment"># a=8</span></span><br><span class="line">[root@db02 ~]<span class="comment"># declare -i a=a+10</span></span><br><span class="line">[root@db02 ~]<span class="comment"># echo $a</span></span><br><span class="line">18</span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹ï¼š</span><br><span class="line">[root@db02 ~]<span class="comment"># ((a=1+2**3-4%3))</span></span><br><span class="line">[root@db02 ~]<span class="comment"># echo $a</span></span><br><span class="line">8</span><br></pre></td></tr></tbody></table></figure>

<p><strong>2ï¼‰æ•´æ•°æˆ–è€…å°æ•°è¿ç®—</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">æ–¹æ³•1ï¼šbc</span><br><span class="line">[root@db02 ~]<span class="comment"># echo 10+9|bc #åŠ </span></span><br><span class="line">19</span><br><span class="line">[root@db02 ~]<span class="comment"># echo 10*9|bc #ä¹˜</span></span><br><span class="line">90</span><br><span class="line">[root@db02 ~]<span class="comment"># echo 10/9|bc #é™¤</span></span><br><span class="line">1</span><br><span class="line">[root@db02 ~]<span class="comment"># echo "scale=4;10/9"|bc #ä¿ç•™4ä½å°æ•°</span></span><br><span class="line">1.1111</span><br><span class="line">[root@db02 ~]<span class="comment"># echo 3^2|bc  #å¹‚è¿ç®—</span></span><br><span class="line">9</span><br><span class="line">[root@db02 ~]<span class="comment"># echo 1.1*2|bc  #å°æ•°ä¹˜</span></span><br><span class="line">2.2</span><br><span class="line"></span><br><span class="line">æ–¹æ³•2ï¼šawk</span><br><span class="line">[root@db02 ~]<span class="comment"># echo 1.1 2 | awk '{print $1*$2}'</span></span><br><span class="line">2.2</span><br><span class="line">[root@db02 ~]<span class="comment"># echo 1.1 2 | awk '{print $1%$2}'</span></span><br><span class="line">1.1</span><br><span class="line">[root@db02 ~]<span class="comment"># echo 4 2 | awk '{print $1%$2}'</span></span><br><span class="line">0</span><br></pre></td></tr></tbody></table></figure>

<p><strong>3ï¼‰è‡ªå¢æˆ–è‡ªå‡è¿ç®—ï¼ˆ++--ï¼‰</strong><br>æ‰§è¡Œecho $((a++))å’Œecho $((aâ€“))å‘½ä»¤è¾“å‡ºæ•´ä¸ªè¡¨è¾¾å¼æ—¶ï¼Œè¾“å‡ºçš„å€¼ä¸ºaçš„å€¼ï¼Œè¡¨è¾¾å¼æ‰§è¡Œå®Œæ¯•åï¼Œä¼šå¯¹aè¿›è¡Œ++ã€â€“çš„è¿ç®—ï¼Œ<br>æ‰§è¡Œecho $((++a))å’Œecho $((â€“a))å‘½ä»¤è¾“å‡ºæ•´ä¸ªè¡¨è¾¾å¼æ—¶ï¼Œä¼šå…ˆå¯¹aè¿›è¡Œ++ã€â€“çš„è¿ç®—ï¼Œç„¶åå†è¾“å‡ºè¡¨è¾¾å¼çš„å€¼ï¼Œå³ä¸ºaè¿ç®—åçš„å€¼ã€‚</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@db02 ~]<span class="comment"># a=10</span></span><br><span class="line">[root@db02 ~]<span class="comment"># echo $((a--))  &lt;== --åœ¨$aåï¼Œè¡¨è¾¾å¼å…ˆä¸å‡ã€‚è¡¨è¾¾å¼æ‰§è¡Œå®Œæˆä¼šå¯¹$aè¿›è¡Œ++ --è¿ç®—ã€‚</span></span><br><span class="line">10</span><br><span class="line">[root@db02 ~]<span class="comment"># echo $a</span></span><br><span class="line">9</span><br><span class="line">[root@db02 ~]<span class="comment"># echo $((--a)) &lt;== --åœ¨$aå‰ï¼Œå…ˆå¯¹$aè¿›è¡Œè¿ç®—ã€‚è¡¨è¾¾å¼åœ¨è¾“å‡ºå€¼ã€‚</span></span><br><span class="line">8</span><br><span class="line">[root@db02 ~]<span class="comment"># echo $a</span></span><br><span class="line">8</span><br></pre></td></tr></tbody></table></figure>
<p>æœ‰å…³++ï¼Œâ€“è¿ç®—çš„è®°å¿†æ–¹æ³•ï¼š<br>å˜é‡aåœ¨è¿ç®—ç¬¦å‰ï¼Œè¾“å‡ºè¡¨è¾¾å¼çš„å€¼ä¸ºaï¼Œç„¶åaè‡ªå¢æˆ–è‡ªå‡ï¼›å˜é‡aåœ¨è¿ç®—ç¬¦åï¼Œè¾“å‡ºè¡¨è¾¾å¼ä¼šå…ˆè‡ªå¢æˆ–è‡ªå‡ï¼Œè¡¨è¾¾å¼çš„å€¼å°±æ˜¯è‡ªå¢æˆ–è‡ªå‡åaçš„å€¼ã€‚</p>
<p><strong>4ï¼‰(())çš„é€»è¾‘åˆ¤æ–­</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@web01 /server/scripts]<span class="comment"># ((8&gt;7))</span></span><br><span class="line">[root@web01 /server/scripts]<span class="comment"># echo $?</span></span><br><span class="line">0</span><br><span class="line">[root@web01 /server/scripts]<span class="comment"># ((8&lt;7))</span></span><br><span class="line">[root@web01 /server/scripts]<span class="comment"># echo $?</span></span><br><span class="line">1</span><br><span class="line">[root@web01 /server/scripts]<span class="comment"># ((8&lt;7&amp;&amp;6&gt;5))</span></span><br><span class="line">[root@web01 /server/scripts]<span class="comment"># echo $?</span></span><br><span class="line">1</span><br><span class="line">[root@web01 /server/scripts]<span class="comment"># ((8&lt;9&amp;&amp;6&gt;5))</span></span><br><span class="line">[root@web01 /server/scripts]<span class="comment"># echo $?</span></span><br><span class="line">0</span><br><span class="line">[root@web01 /server/scripts]<span class="comment"># ((8&lt;7||6&gt;5))</span></span><br><span class="line">[root@web01 /server/scripts]<span class="comment"># echo $?</span></span><br></pre></td></tr></tbody></table></figure>
<p><strong>5ï¼‰expråŠŸèƒ½ï¼š</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">1.è®¡ç®—</span><br><span class="line">[root@web01 /server/scripts]<span class="comment"># expr 10 + 10</span></span><br><span class="line">20</span><br><span class="line"></span><br><span class="line">2.è·å–å­—ç¬¦ä¸²é•¿åº¦</span><br><span class="line">[root@db02 ~]<span class="comment"># a="felix"</span></span><br><span class="line">[root@db02 ~]<span class="comment"># echo $a</span></span><br><span class="line">felix</span><br><span class="line">[root@db02 ~]<span class="comment"># expr length $a</span></span><br><span class="line">5</span><br><span class="line"></span><br><span class="line">3.åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºæ•´æ•°æ•°å­—æˆ–å­—ç¬¦</span><br><span class="line">[root@web01 /server/scripts]<span class="comment"># a=1</span></span><br><span class="line">[root@web01 /server/scripts]<span class="comment"># expr $a + 1 &amp;&gt;/dev/null</span></span><br><span class="line">[root@web01 /server/scripts]<span class="comment"># echo $?</span></span><br><span class="line">0 </span><br><span class="line">[root@web01 /server/scripts]<span class="comment"># a=oldboy</span></span><br><span class="line">[root@web01 /server/scripts]<span class="comment"># expr $a + 1 &amp;&gt;/dev/null</span></span><br><span class="line">[root@web01 /server/scripts]<span class="comment"># echo $?</span></span><br><span class="line">2  &lt;==é€†å‘æ€ç»´ï¼š<span class="built_in">expr</span>å­—ç¬¦ä¸²æˆ–å°æ•°ä¸æ•´æ•°ç›¸åŠ ä¼šæŠ¥é”™ï¼Œå³$? ä¸ä¸º0. å³$?ä¸º0</span><br><span class="line">              å°±è¡¨ç¤º ä¸¤è¾¹è¿ç®—ç¬¦ä¸¤è¾¹éƒ½æ˜¯æ•´æ•°æ•°ï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²æˆ–æµ®ç‚¹æ•°</span><br><span class="line">              </span><br><span class="line">4.ç”¨æ¥åˆ¤æ–­æ–‡ä»¶æ‰©å±•åæ˜¯å¦ç¬¦åˆæŒ‡å®šæ‰©å±•å</span><br><span class="line">[root@web01 /server/scripts]<span class="comment"># cat judge.sh </span></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">expr</span> <span class="string">"<span class="variable">$1</span>"</span> : <span class="string">".*\.avi$"</span> &gt;/dev/null ; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"å¥½å…´å¥‹å•Š"</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"å¥½å¤±æœ›å•Š"</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">[root@web01 /server/scripts]<span class="comment"># sh judge.sh oldboy.avi</span></span><br><span class="line">å¥½å…´å¥‹å•Š</span><br><span class="line">[root@web01 /server/scripts]<span class="comment"># sh judge.sh oldboy.log</span></span><br><span class="line">å¥½å¤±æœ›å•Š</span><br></pre></td></tr></tbody></table></figure>

<h3 id="è„šæœ¬ä¼ å‚"><a href="#è„šæœ¬ä¼ å‚" class="headerlink" title="è„šæœ¬ä¼ å‚"></a>è„šæœ¬ä¼ å‚</h3><p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-266.png" alt="è„šæœ¬ä¼ å‚"><br><strong>readå‘½ä»¤ï¼š</strong><br>å‚æ•°ï¼š</p>
<ul>
<li>-pï¼šè¾“å‡ºæ–‡å­—æç¤º</li>
<li>-tï¼šæŒ‡å®šè¶…æ—¶æ—¶é—´</li>
</ul>
<p>æœ¬è´¨ï¼šäº¤äº’å¼ç»™å˜é‡èµ‹å€¼<br><strong>ä¾‹ï¼š</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1ï¼‰ç›¸å½“äºn=100</span><br><span class="line">[root@db02 ~]<span class="comment"># read -p "è¯·è¾“å…¥ä¸€ä¸ªæ•°å­—ï¼š" n</span></span><br><span class="line">è¯·è¾“å…¥ä¸€ä¸ªæ•°å­—ï¼š100</span><br><span class="line">[root@db02 ~]<span class="comment"># echo $n</span></span><br><span class="line">100</span><br><span class="line">2ï¼‰ç›¸å½“äºn=90 m=100</span><br><span class="line">[root@db02 ~]<span class="comment"># read -p "è¯·è¾“å…¥ä¸¤ä¸ªæ•°å­—ï¼š" n m</span></span><br><span class="line">è¯·è¾“å…¥ä¸¤ä¸ªæ•°å­—ï¼š90 100</span><br><span class="line">[root@db02 ~]<span class="comment"># echo $n $m</span></span><br><span class="line">90 100</span><br></pre></td></tr></tbody></table></figure>
<p><strong>å˜é‡èµ‹å€¼çš„3ç§æ–¹å¼ï¼š</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">1.å®šä¹‰å¼</span><br><span class="line">a=1</span><br><span class="line"></span><br><span class="line">2.<span class="built_in">read</span>è¯»å…¥å¼</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"è¯·è¾“å…¥ä¸¤ä¸ªæ•°å­—ï¼š"</span> n m</span><br><span class="line"></span><br><span class="line">3.è„šæœ¬ä¼ å‚</span><br><span class="line"><span class="variable">$1</span>=100</span><br><span class="line"></span><br><span class="line">1.äº¤äº’å¼ä¼ å‚ï¼š</span><br><span class="line">[root@db02 ~]<span class="comment"># cat 01.dingyi.sh </span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"è¯·è¾“å…¥a,bçš„å€¼ï¼š"</span> a b</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span>+<span class="variable">$b</span>=<span class="subst">$((a+b)</span>)"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span>-<span class="variable">$b</span>=<span class="subst">$((a-b)</span>)"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span>*<span class="variable">$b</span>=<span class="subst">$((a*b)</span>)"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span>/<span class="variable">$b</span>=<span class="subst">$((a/b)</span>)"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span>**<span class="variable">$b</span>=<span class="subst">$((a**b)</span>)"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span>%<span class="variable">$b</span>=<span class="subst">$((a%b)</span>)"</span></span><br><span class="line">[root@db02 ~]<span class="comment"># sh 01.dingyi.sh</span></span><br><span class="line">è¯·è¾“å…¥a,bçš„å€¼ï¼š9 10</span><br><span class="line">9+10=19</span><br><span class="line">9-10=-1</span><br><span class="line">9*10=90</span><br><span class="line">9/10=0</span><br><span class="line">9**10=3486784401</span><br><span class="line">9%10=9</span><br><span class="line"></span><br><span class="line">2.ä¼ å‚ï¼š</span><br><span class="line">[root@db02 ~]<span class="comment"># cat 01.dingyi.sh</span></span><br><span class="line">a=<span class="variable">$1</span></span><br><span class="line">b=<span class="variable">$2</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span>+<span class="variable">$b</span>=<span class="subst">$((a+b)</span>)"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span>-<span class="variable">$b</span>=<span class="subst">$((a-b)</span>)"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span>*<span class="variable">$b</span>=<span class="subst">$((a*b)</span>)"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span>/<span class="variable">$b</span>=<span class="subst">$((a/b)</span>)"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span>**<span class="variable">$b</span>=<span class="subst">$((a**b)</span>)"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span>%<span class="variable">$b</span>=<span class="subst">$((a%b)</span>)"</span></span><br><span class="line">[root@db02 ~]<span class="comment"># bash 01.dingyi.sh 7 6</span></span><br><span class="line">7+6=13</span><br><span class="line">7-6=1</span><br><span class="line">7*6=42</span><br><span class="line">7/6=1</span><br><span class="line">7**6=117649</span><br><span class="line">7%6=1</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>`stty erase â€˜^Hâ€™` read -p â€œinput: â€œ readäº¤äº’å¼åˆ é™¤é€€æ ¼</p>
</blockquote>
<h3 id="æ¡ä»¶æµ‹è¯•"><a href="#æ¡ä»¶æµ‹è¯•" class="headerlink" title="æ¡ä»¶æµ‹è¯•"></a>æ¡ä»¶æµ‹è¯•</h3><p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-260.png" alt="æ¡ä»¶æµ‹è¯•"><br>ä¸€å¥è¯å®šä¹‰ï¼šåˆ¤æ–­ç¬¦åˆæ¡ä»¶æ‰è¿›è¡Œå¤„ç†ï¼Œä¸ç¬¦åˆæ¡ä»¶ä¸å¤„ç†ã€‚<br><strong>è¡¨è¾¾å¼1ï¼šå¦‚æœæ¡ä»¶æˆç«‹ï¼Œé‚£ä¹ˆæ‰§è¡Œä¸‰ä¸ªå‘½ä»¤ã€‚</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[ æ¡ä»¶1 ] &amp;&amp; {</span><br><span class="line">    å‘½ä»¤1     </span><br><span class="line">	å‘½ä»¤2     </span><br><span class="line">	å‘½ä»¤3 </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è¡¨è¾¾å¼2ï¼šå¦‚æœè¡¨è¾¾å¼ä¸æˆç«‹ï¼Œé‚£ä¹ˆæ‰§è¡Œä¸‰ä¸ªå‘½ä»¤ã€‚</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ æ¡ä»¶1 ]   </span><br><span class="line"><span class="keyword">then</span>     </span><br><span class="line">	å‘½ä»¤1     </span><br><span class="line">	å‘½ä»¤2     </span><br><span class="line">	å‘½ä»¤3 </span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">ã€ç­‰ä»·ã€‘</span><br><span class="line">[ æ¡ä»¶1 ] || {</span><br><span class="line">    	å‘½ä»¤1     </span><br><span class="line">	å‘½ä»¤2     </span><br><span class="line">	å‘½ä»¤3 </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è¡¨è¾¾å¼3ï¼šå¦‚æœæ¡ä»¶æˆç«‹ï¼Œé‚£ä¹ˆæ‰§è¡Œå‘½ä»¤1å‘½ä»¤2ï¼Œå¦åˆ™æ‰§è¡Œå‘½ä»¤3ã€‚</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[ -L oldboy ] &amp;&amp; <span class="built_in">echo</span> 1 || <span class="built_in">echo</span> 0</span><br><span class="line">ã€ç­‰ä»·ã€‘</span><br><span class="line">[ æ¡ä»¶1 ] &amp;&amp; {</span><br><span class="line">    å‘½ä»¤1     </span><br><span class="line">	å‘½ä»¤2     </span><br><span class="line">} || { </span><br><span class="line">	å‘½ä»¤3 </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>åˆ†æï¼š</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[ -x /sbin/ip ] ||        <span class="built_in">exit</span> 1 </span><br><span class="line">å¯æ‰§è¡Œ         ä¸æˆç«‹  é€€å‡º</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ä¾‹å­ï¼šï¼ˆåˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼‰test</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@db02 ~]<span class="comment"># ls</span></span><br><span class="line">01.dingyi.sh  anaconda-ks.cfg  ww.sh</span><br><span class="line">[root@db02 ~]<span class="comment"># test -f a.txt &amp;&amp; echo felix &gt; a.txt || echo æ²¡æœ‰</span></span><br><span class="line">æ²¡æœ‰</span><br><span class="line">[root@db02 ~]<span class="comment"># touch a.txt</span></span><br><span class="line">		å¦‚æœ å­˜åœ¨        é‚£ä¹ˆ æ‰§è¡Œ              å¦åˆ™ æ‰§è¡Œ</span><br><span class="line">[root@db02 ~]<span class="comment"># test -f a.txt &amp;&amp; echo felix &gt; a.txt || echo æ²¡æœ‰</span></span><br><span class="line">[root@db02 ~]<span class="comment"># cat a.txt </span></span><br><span class="line">felix</span><br></pre></td></tr></tbody></table></figure>
<p><strong>ä¾‹å­ï¼šï¼ˆåˆ¤æ–­æ–‡ä»¶æ˜¯å¦æœ‰æ‰§è¡Œæƒé™ï¼‰test</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">                       å¦‚æœ å¯æ‰§è¡Œ      é‚£ä¹ˆ æ‰§è¡Œ      å¦åˆ™  æ‰“å°</span><br><span class="line">[root@db02 ~]<span class="comment"># test -x ww.sh &amp;&amp; ./ww.sh || echo "æ²¡æœ‰æ‰§è¡Œæƒé™"</span></span><br><span class="line">æ²¡æœ‰æ‰§è¡Œæƒé™</span><br><span class="line">[root@db02 ~]<span class="comment"># ll ww.sh </span></span><br><span class="line">-rw-r--r-- 1 root root 133 12æœˆ 17 17:53 ww.sh</span><br><span class="line">[root@db02 ~]<span class="comment"># chmod +x ww.sh</span></span><br><span class="line">[root@db02 ~]<span class="comment"># ll ww.sh </span></span><br><span class="line">-rwxr-xr-x 1 root root 133 12æœˆ 17 17:53 ww.sh</span><br><span class="line">[root@db02 ~]<span class="comment"># test -x ww.sh &amp;&amp; ./ww.sh || echo "æ²¡æœ‰æ‰§è¡Œæƒé™"</span></span><br><span class="line">is</span><br><span class="line">worth</span><br><span class="line">doing</span><br><span class="line">is</span><br><span class="line">worth</span><br><span class="line">doing</span><br><span class="line">well.</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ä¾‹å­ï¼šï¼ˆåˆ¤æ–­æ–‡ä»¶æ˜¯å¦æœ‰æ‰§è¡Œæƒé™ï¼‰[  ]</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@db02 ~]<span class="comment"># [ -x ww.sh ]&amp;&amp; ./ww.sh || echo "æ²¡æœ‰æ‰§è¡Œæƒé™"</span></span><br><span class="line">is</span><br><span class="line">worth</span><br><span class="line">doing</span><br><span class="line">is</span><br><span class="line">worth</span><br><span class="line">doing</span><br><span class="line">well.</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ä¾‹å­ï¼šï¼ˆåˆ¤æ–­æ–‡ä»¶æ˜¯å¦æœ‰æ‰§è¡Œæƒé™ï¼‰[[]]</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@db02 ~]<span class="comment"># [[ -x ww.sh ]]&amp;&amp; ./ww.sh || echo "æ²¡æœ‰æ‰§è¡Œæƒé™"</span></span><br><span class="line">is</span><br><span class="line">worth</span><br><span class="line">doing</span><br><span class="line">is</span><br><span class="line">worth</span><br><span class="line">doing</span><br><span class="line">well.</span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ–‡ä»¶æµ‹è¯•è¡¨è¾¾å¼"><a href="#æ–‡ä»¶æµ‹è¯•è¡¨è¾¾å¼" class="headerlink" title="æ–‡ä»¶æµ‹è¯•è¡¨è¾¾å¼"></a>æ–‡ä»¶æµ‹è¯•è¡¨è¾¾å¼</h3><p>ä¸€å¥è¯å®šä¹‰ï¼šå¯¹é—®æ–‡ä»¶çš„å±æ€§è¿›è¡Œåˆ¤æ–­ï¼Œç„¶åæ ¹æ®ç»“æœè¿›è¡Œå¤„ç†ã€‚<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-261.png" alt="æ–‡ä»¶æµ‹è¯•è¡¨è¾¾å¼"></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">[root@db02 ~]<span class="comment"># touch felix.txt</span></span><br><span class="line">[root@db02 ~]<span class="comment"># [ -f felix.txt ] &amp;&amp; echo 1 || echo 0</span></span><br><span class="line">1                        å¦‚æœ..             é‚£ä¹ˆ..      å¦åˆ™..</span><br><span class="line">[root@db02 ~]<span class="comment"># rm -rf felix.txt </span></span><br><span class="line">[root@db02 ~]<span class="comment"># [ -f felix.txt ] &amp;&amp; echo 1 || echo 0  &lt;==æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™echo 0ï¼ˆ-f æµ‹è¯•æ™®é€šæ–‡ä»¶ï¼‰</span></span><br><span class="line">0</span><br><span class="line"></span><br><span class="line">[root@db02 ~]<span class="comment"># mkdir felix</span></span><br><span class="line">[root@db02 ~]<span class="comment"># [ -f felix ] &amp;&amp; echo 1 || echo 0  &lt;==felixä¸ºç›®å½•ï¼Œä¸æ˜¯æ™®é€šæ–‡ä»¶æ‰€ä»¥è¾“å‡ºecho 0</span></span><br><span class="line">0</span><br><span class="line"></span><br><span class="line">[root@db02 ~]<span class="comment"># [ -d felix ] &amp;&amp; echo 1 || echo 0  &lt;==ç›®å½•å­˜åœ¨ï¼Œåˆ™echo 0ï¼ˆ-d æµ‹è¯•ç›®å½•ï¼‰</span></span><br><span class="line">1</span><br><span class="line"></span><br><span class="line">[root@db02 ~]<span class="comment"># [ -e felix ] &amp;&amp; echo 1 || echo 0  &lt;==æ–‡ä»¶æˆ–ç›®å½•å­˜åœ¨ï¼Œåˆ™echo 1ï¼ˆ-e æµ‹è¯•æ–‡ä»¶æˆ–ç›®å½•ï¼‰</span></span><br><span class="line">1</span><br><span class="line"></span><br><span class="line">[root@db02 ~]<span class="comment"># [ -r felix.txt ] &amp;&amp; echo 1 || echo 0  &lt;==æ–‡ä»¶æˆ–ç›®å½•å¯è¯»ï¼Œä¸å­˜åœ¨åˆ™echo 0ï¼ˆ-r æµ‹è¯•æ–‡ä»¶æ˜¯å¦å¯è¯»ï¼‰</span></span><br><span class="line">0</span><br><span class="line">[root@db02 ~]<span class="comment"># touch felix.txt</span></span><br><span class="line">[root@db02 ~]<span class="comment"># [ -r felix.txt ] &amp;&amp; echo 1 || echo 0  &lt;==æ–‡ä»¶æˆ–ç›®å½•å¯è¯»ï¼Œåˆ™echo 1</span></span><br><span class="line">1</span><br><span class="line"></span><br><span class="line">[root@db02 ~]<span class="comment"># [ -s felix.txt ] &amp;&amp; echo 1 || echo 0  &lt;==æ–‡ä»¶æˆ–ç›®å½•å¤§å°ä¸ä¸º0ï¼Œç©ºæ–‡ä»¶åˆ™è¾“å‡º0ï¼ˆ-s æµ‹è¯•æ–‡ä»¶æ˜¯å¦ä¸ºç©ºï¼‰</span></span><br><span class="line">0</span><br><span class="line">[root@db02 ~]<span class="comment"># echo 1 &gt; felix.txt </span></span><br><span class="line">[root@db02 ~]<span class="comment"># [ -s felix.txt ] &amp;&amp; echo 1 || echo 0</span></span><br><span class="line">1</span><br><span class="line"></span><br><span class="line">[root@db02 ~]<span class="comment"># [ -w felix.txt ] &amp;&amp; echo 1 || echo 0 &lt;==æ–‡ä»¶æ˜¯å¦å¯å†™ï¼Œå¯å†™åˆ™echo 1ï¼ˆ-w æµ‹è¯•æ–‡ä»¶æ˜¯å¦å¯å†™ï¼‰</span></span><br><span class="line">1</span><br><span class="line"></span><br><span class="line">[root@db02 ~]<span class="comment"># [ -x felix.txt ] &amp;&amp; echo 1 || echo 0  &lt;==æ–‡ä»¶æ˜¯å¦å¯æ‰§è¡Œï¼Œä¸å¯æ‰§è¡Œåˆ™echo 0ï¼ˆ-x æµ‹è¯•æ–‡ä»¶æ˜¯å¦å¯æ‰§è¡Œï¼‰</span></span><br><span class="line">0</span><br><span class="line">[root@db02 ~]<span class="comment"># [ -L felix.txt ] &amp;&amp; echo 1 || echo 0</span></span><br><span class="line">0</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å­—ç¬¦ä¸²æµ‹è¯•è¡¨è¾¾å¼"><a href="#å­—ç¬¦ä¸²æµ‹è¯•è¡¨è¾¾å¼" class="headerlink" title="å­—ç¬¦ä¸²æµ‹è¯•è¡¨è¾¾å¼"></a>å­—ç¬¦ä¸²æµ‹è¯•è¡¨è¾¾å¼</h3><p>ä¸€å¥è¯å®šä¹‰ï¼šé•¿åº¦ï¼Œæ˜¯å¦ä¸ºç©ºï¼Œæ˜¯å¦ç›¸ç­‰ï¼Œæ˜¯å¦ä¸ç­‰ã€‚<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-262.png" alt="å­—ç¬¦ä¸²æµ‹è¯•è¡¨è¾¾å¼"></p>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong></p>
</blockquote>
<ol>
<li>å­—ç¬¦ä¸²åˆ¤æ–­è¦å°†å­—ç¬¦ä¸²ç”¨ åŒå¼•å·â€ â€œ</li>
<li>ç­‰å·ä¸¤ç«¯å¿…é¡»è¦æœ‰ç©ºæ ¼</li>
<li>â€œ=â€å’Œâ€!=â€ ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸åŒ</li>
</ol>
<p><code>-n no zero</code>ä¸ä¸ºé›¶</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@db02 ~]<span class="comment"># echo "$flx"</span></span><br><span class="line"></span><br><span class="line">[root@db02 ~]<span class="comment"># [ -n "$flx" ] &amp;&amp; echo 1 || echo 0  &lt;==ä¸ºé›¶ä¸ºå‡</span></span><br><span class="line">0</span><br><span class="line">[root@db02 ~]<span class="comment"># flx=felix</span></span><br><span class="line">[root@db02 ~]<span class="comment"># [ -n "$flx" ] &amp;&amp; echo 1 || echo 0  &lt;==ä¸ä¸ºé›¶ä¸ºçœŸ</span></span><br><span class="line">1</span><br></pre></td></tr></tbody></table></figure>

<p><code>-z zero</code>ä¸ºé›¶</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@db02 ~]<span class="comment"># flx=felix</span></span><br><span class="line">[root@db02 ~]<span class="comment"># [ -z "$flx" ] &amp;&amp; echo 1 || echo 0  &lt;==ä¸ä¸ºé›¶ä¸ºå‡</span></span><br><span class="line">0</span><br><span class="line">[root@db02 ~]<span class="comment"># unset flx</span></span><br><span class="line">[root@db02 ~]<span class="comment"># [ -z "$flx" ] &amp;&amp; echo 1 || echo 0  &lt;==ä¸ºé›¶ä¸ºçœŸ</span></span><br><span class="line">1</span><br></pre></td></tr></tbody></table></figure>

<p>å­—ç¬¦ä¸²æµ‹è¯•ç›¸ç­‰</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@db02 ~]<span class="comment"># echo "$flx"</span></span><br><span class="line">felix</span><br><span class="line">[root@db02 ~]<span class="comment"># nsu="12345"</span></span><br><span class="line">[root@db02 ~]<span class="comment"># echo $nsu</span></span><br><span class="line">12345</span><br><span class="line">[root@db02 ~]<span class="comment"># [ "$flx" = "$nsu" ] &amp;&amp; echo 1 || echo 0  &lt;==å˜é‡å†…å®¹ä¸ç›¸ç­‰ä¸ºå‡</span></span><br><span class="line">0</span><br><span class="line">[root@db02 ~]<span class="comment"># [ "$flx" = "felix" ] &amp;&amp; echo 1 || echo 0  &lt;==å†…å®¹ç›¸ç­‰ä¸ºçœŸ</span></span><br><span class="line">1</span><br><span class="line">[root@db02 ~]<span class="comment"># [ "${#flx}" = "${#nsu}" ] &amp;&amp; echo 1 || echo 0  &lt;==å­—ç¬¦ä¸²é•¿åº¦ç›¸ç­‰ä¸ºçœŸ</span></span><br><span class="line">1</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ä¼ å‚å’Œæ¡ä»¶æµ‹è¯•ç»ƒä¹ "><a href="#ä¼ å‚å’Œæ¡ä»¶æµ‹è¯•ç»ƒä¹ " class="headerlink" title="ä¼ å‚å’Œæ¡ä»¶æµ‹è¯•ç»ƒä¹ "></a>ä¼ å‚å’Œæ¡ä»¶æµ‹è¯•ç»ƒä¹ </h3><p>å¯¹ä¼ å…¥çš„å‚æ•°æˆ–è€…readè¯»å…¥çš„å˜é‡å†…å®¹åˆ¤æ–­ï¼Œå¦‚æœä¸ç¬¦åˆè®¡ç®—æ¡ä»¶ï¼Œæç¤ºç”¨æˆ·ï¼Œå¹¶é€€å‡ºã€‚</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">read</span> -p <span class="string">"è¯·è¾“å…¥ä¸¤ä¸ªæ•°ï¼Œä»¥ç©ºæ ¼åˆ†å‰²ï¼š"</span> a b</span><br><span class="line">[ -z <span class="variable">$a</span> ] || [ -z <span class="variable">$b</span> ] &amp;&amp; {</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"[error]:è¯·è¾“å…¥ä¸¤ä¸ªæ•°å€¼"</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> <span class="variable">$a</span> <span class="variable">$b</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="built_in">expr</span> <span class="variable">$n</span> + 1 &amp;&gt; /dev/null</span><br><span class="line">  [ $? -eq 0 ] &amp;&amp; {</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$n</span> [Data ok!]"</span>;</span><br><span class="line">  }||{</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"[ERROR Data are not Numbers!]"</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line">}</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span>+<span class="variable">$b</span>=<span class="subst">$((a+b)</span>)"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span>-<span class="variable">$b</span>=<span class="subst">$((a-b)</span>)"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span>*<span class="variable">$b</span>=<span class="subst">$((a*b)</span>)"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span>/<span class="variable">$b</span>=<span class="subst">$((a/b)</span>)"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span>%<span class="variable">$b</span>=<span class="subst">$((a%b)</span>)"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span>**<span class="variable">$b</span>=<span class="subst">$((a**b)</span>)"</span></span><br><span class="line"></span><br><span class="line">é€šè¿‡è„šæœ¬ä¼ å‚çš„æ–¹å¼å®Œæˆä¸Šé¢çš„ä¾‹å­</span><br><span class="line"><span class="comment">#/bin/bash</span></span><br><span class="line"><span class="comment">#1.åˆ¤æ–­æ˜¯å¦ä¸ºä¸¤ä¸ªå‚æ•°</span></span><br><span class="line">[ <span class="variable">$#</span> -ne 2 ]&amp;&amp;{</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$0</span> num1 num2 âœ”"</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">#2.åˆ¤æ–­å‚æ•°æ˜¯å¦ä¸ºæ•°å­—</span></span><br><span class="line"><span class="built_in">expr</span> <span class="variable">$1</span> + <span class="variable">$2</span> + 100 &amp;&gt;/dev/null</span><br><span class="line">[ $? -eq 0 ]&amp;&amp;{</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"[data ok]:<span class="variable">$1</span> <span class="variable">$2</span>"</span></span><br><span class="line">}||{</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"è¯·è¾“å…¥ä¸¤ä¸ªæ­£ç¡®çš„æ•´æ•°ï¼"</span></span><br><span class="line">    <span class="built_in">exit</span> 2</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">#3.å¼€å§‹è®¡ç®—</span></span><br><span class="line">a=<span class="variable">$1</span></span><br><span class="line">b=<span class="variable">$2</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$a</span>+<span class="variable">$b</span>=$((a+b))</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$a</span>-<span class="variable">$b</span>=$((a-b))</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$a</span>^<span class="variable">$b</span>=$((a**b))</span><br><span class="line">[ <span class="variable">$b</span> -eq 0 ]&amp;&amp;{</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">"[error] é™¤æ•°ä¸º0ï¼Œå–ä½™å’Œé™¤æ³•ä¸èƒ½è®¡ç®—ã€‚Ã—"</span></span><br><span class="line">}||{</span><br><span class="line">   <span class="built_in">echo</span> <span class="variable">$a</span>/<span class="variable">$b</span>=$((a/b))</span><br><span class="line">   <span class="built_in">echo</span> <span class="variable">$a</span>%<span class="variable">$b</span>=$((a%b))</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="äºŒå…ƒæ•´æ•°æ¯”è¾ƒ"><a href="#äºŒå…ƒæ•´æ•°æ¯”è¾ƒ" class="headerlink" title="äºŒå…ƒæ•´æ•°æ¯”è¾ƒ"></a>äºŒå…ƒæ•´æ•°æ¯”è¾ƒ</h3><p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-267.png" alt="äºŒå…ƒæ•´æ•°æ¯”è¾ƒ"></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">æ•´æ•°æ¯”è¾ƒï¼š</span><br><span class="line">[root@db02 ~]<span class="comment"># [ 1 -eq 1 ] &amp;&amp; echo 1 || echo 0  &lt;==ç­‰äº</span></span><br><span class="line">1</span><br><span class="line">[root@db02 ~]<span class="comment"># [ 1 -ne 1 ] &amp;&amp; echo 1 || echo 0  &lt;==ä¸ç­‰äº</span></span><br><span class="line">0</span><br><span class="line">[root@db02 ~]<span class="comment"># [ 1 -ge 1 ] &amp;&amp; echo 1 || echo 0  &lt;==å¤§äºç­‰äº</span></span><br><span class="line">1</span><br><span class="line">[root@db02 ~]<span class="comment"># [ 1 -gt 1 ] &amp;&amp; echo 1 || echo 0  &lt;==å¤§äº</span></span><br><span class="line">0</span><br><span class="line">[root@db02 ~]<span class="comment"># [ 1 -lt 1 ] &amp;&amp; echo 1 || echo 0  &lt;==å°äº</span></span><br><span class="line">0</span><br><span class="line">[root@db02 ~]<span class="comment"># [ 1 -le 1 ] &amp;&amp; echo 1 || echo 0  &lt;==å°äºç­‰äº</span></span><br><span class="line">1</span><br></pre></td></tr></tbody></table></figure>

<p><strong>é€»è¾‘æ“ä½œç¬¦</strong><br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-268.png" alt="é€»è¾‘æ“ä½œç¬¦"></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">åœ¨ä¸€ä¸ªè¡¨è¾¾å¼ä¸­ï¼Œæ”¾å…¥å¤šä¸ªæ¡ä»¶ã€‚</span><br><span class="line">[root@db02 ~]<span class="comment"># [ -f /etc/hosts -a 1 -eq 1 ] &amp;&amp; echo 1 || echo 0</span></span><br><span class="line">1</span><br><span class="line">[root@db02 ~]<span class="comment"># [ -f /etc/hosts -a 1 -eq 2 ] &amp;&amp; echo 1 || echo 0</span></span><br><span class="line">0</span><br><span class="line">[root@db02 ~]<span class="comment"># [ -f /etc/hosts -o 1 -eq 2 ] &amp;&amp; echo 1 || echo 0</span></span><br><span class="line">1</span><br><span class="line">[root@db02 ~]<span class="comment"># [ -f /etc/hosts -o 1 -eq 2 ] &amp;&amp; echo 1 || echo 0</span></span><br><span class="line">1</span><br><span class="line">[root@db02 ~]<span class="comment"># [ -f /etc/hosts -a ! 1 -eq 2 ] &amp;&amp; echo 1 || echo 0  &lt;==å¯¹æŒ‡å®šæ¡ä»¶è¿›è¡Œå–å</span></span><br><span class="line">1</span><br><span class="line"></span><br><span class="line">è¿æ¥ä¸¤ä¸ªæ‹¬å·çš„æ“ä½œç¬¦ï¼š</span><br><span class="line">[root@db02 ~]<span class="comment"># [ -f /etc/hosts ] &amp;&amp; [ 1 -eq 2 ] &amp;&amp; echo 1 || echo 0</span></span><br><span class="line">0</span><br><span class="line">[root@db02 ~]<span class="comment"># [ -f /etc/hosts ] || [ 1 -eq 2 ] &amp;&amp; echo 1 || echo 0</span></span><br><span class="line">1</span><br></pre></td></tr></tbody></table></figure>
<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-269.png" alt="é€»è¾‘æ“ä½œç¬¦"></p>
<h3 id="èœå•ç»ƒä¹ "><a href="#èœå•ç»ƒä¹ " class="headerlink" title="èœå•ç»ƒä¹ "></a>èœå•ç»ƒä¹ </h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#/bin/bash</span></span><br><span class="line">Inl=<span class="string">"å³å°†å®‰è£…:"</span></span><br><span class="line">One=<span class="string">"\033[40;32m MySQL\033[0m"</span></span><br><span class="line">Two=<span class="string">"\033[40;32m Nginx \033[0m"</span></span><br><span class="line">Three=<span class="string">"\033[40;32m PHP \033[0m"</span></span><br><span class="line">Four=<span class="string">"\033[40;32m Tomcat \033[0m"</span></span><br><span class="line">Five=<span class="string">"\033[40;32m ALL \033[0m"</span></span><br><span class="line">Err=<span class="string">"\033[40;31m[Error]\033[0m Please check the.."</span></span><br><span class="line">Ok=<span class="string">"\033[40;32m[OK] \033[0mSuccessful installation"</span></span><br><span class="line">/bin/clear</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"Please select a{1|2|3|4|5|6}:"</span> n</span><br><span class="line"><span class="built_in">expr</span> <span class="variable">$n</span> + 1 &amp;&gt;/dev/null</span><br><span class="line">[[ -z <span class="variable">$n</span> || $? -ne 0 || ! <span class="variable">$n</span> =~ [1-6] ]] &amp;&amp; {</span><br><span class="line">     /bin/clear</span><br><span class="line">     /bin/bash <span class="variable">$0</span></span><br><span class="line">     <span class="built_in">exit</span> 0</span><br><span class="line">}</span><br><span class="line">[ <span class="variable">$n</span> -eq 6 ] &amp;&amp; {</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">"\033[40;31mQuit!\033[0m"</span></span><br><span class="line">    <span class="built_in">exit</span> 0</span><br><span class="line">}||{</span><br><span class="line">    [ <span class="variable">$n</span> -eq 5 ] &amp;&amp; {</span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">"<span class="variable">${Inl}</span><span class="variable">${Five}</span>"</span></span><br><span class="line">        <span class="built_in">sleep</span> 5</span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">"<span class="variable">${Ok}</span><span class="variable">${Five}</span>"</span></span><br><span class="line">        <span class="built_in">exit</span> 0</span><br><span class="line">    }||</span><br><span class="line">        [ <span class="variable">$n</span> -eq 4 ] &amp;&amp; {</span><br><span class="line">            <span class="built_in">echo</span> -e <span class="string">"<span class="variable">${Inl}</span><span class="variable">${Four}</span>"</span></span><br><span class="line">            <span class="built_in">sleep</span> 5</span><br><span class="line">            <span class="built_in">echo</span> -e <span class="string">"<span class="variable">${Ok}</span><span class="variable">${Four}</span>"</span></span><br><span class="line">            <span class="built_in">exit</span> 0</span><br><span class="line">        }||</span><br><span class="line">            [ <span class="variable">$n</span> -eq 3 ] &amp;&amp; {</span><br><span class="line">                <span class="built_in">echo</span> -e <span class="string">"<span class="variable">${Inl}</span><span class="variable">${Three}</span>"</span></span><br><span class="line">                <span class="built_in">sleep</span> 5</span><br><span class="line">                <span class="built_in">echo</span> -e <span class="string">"<span class="variable">${Ok}</span><span class="variable">${Three}</span>"</span></span><br><span class="line">                <span class="built_in">exit</span> 0</span><br><span class="line">            }||</span><br><span class="line">                [ <span class="variable">$n</span> -eq 2 ] &amp;&amp; {</span><br><span class="line">                    <span class="built_in">echo</span> -e <span class="string">"<span class="variable">${Inl}</span><span class="variable">${Two}</span>"</span></span><br><span class="line">                    <span class="built_in">sleep</span> 5</span><br><span class="line">                    <span class="built_in">echo</span> -e <span class="string">"<span class="variable">${Ok}</span><span class="variable">${Two}</span>"</span></span><br><span class="line">                    <span class="built_in">exit</span> 0</span><br><span class="line">                }||</span><br><span class="line">                    [ <span class="variable">$n</span> -eq 1 ] &amp;&amp; {</span><br><span class="line">                        <span class="built_in">echo</span> -e <span class="string">"<span class="variable">${Inl}</span><span class="variable">${One}</span>"</span></span><br><span class="line">                        <span class="built_in">sleep</span> 5</span><br><span class="line">                        <span class="built_in">echo</span> -e <span class="string">"<span class="variable">${Ok}</span><span class="variable">${One}</span>"</span></span><br><span class="line">                        <span class="built_in">exit</span> 0</span><br><span class="line">                    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-270.png" alt="èœå•"></p>
<h3 id="ifåˆ¤æ–­"><a href="#ifåˆ¤æ–­" class="headerlink" title="ifåˆ¤æ–­"></a>ifåˆ¤æ–­</h3><p><strong>å•åˆ†æ”¯ï¼š</strong>ï¼ˆå¦‚æœâ€¦â€¦é‚£ä¹ˆï¼‰</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> &lt;æ¡ä»¶è¡¨è¾¾å¼&gt;</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        æŒ‡ä»¤</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> &lt;æ¡ä»¶è¡¨è¾¾å¼&gt;; <span class="keyword">then</span></span><br><span class="line">    æŒ‡ä»¤</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></tbody></table></figure>
<p><strong>åŒåˆ†æ”¯ï¼š</strong>ï¼ˆå¦‚æœâ€¦â€¦é‚£ä¹ˆâ€¦â€¦å¦åˆ™ï¼‰</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> &lt;æ¡ä»¶è¡¨è¾¾å¼&gt;</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        æŒ‡ä»¤</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">        æŒ‡ä»¤</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></tbody></table></figure>
<p><strong>å¤šåˆ†æï¼š</strong>ï¼ˆå¦‚æœâ€¦â€¦.é‚£ä¹ˆâ€¦â€¦æˆ–è€…é‚£ä¹ˆâ€¦â€¦æˆ–è€…é‚£ä¹ˆâ€¦â€¦å¦åˆ™ï¼‰</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> &lt;æ¡ä»¶è¡¨è¾¾å¼&gt;;<span class="keyword">then</span></span><br><span class="line">    æŒ‡ä»¤1</span><br><span class="line"><span class="keyword">elif</span> &lt;æ¡ä»¶è¡¨è¾¾å¼&gt;;<span class="keyword">then</span></span><br><span class="line">    æŒ‡ä»¤2</span><br><span class="line"><span class="keyword">elif</span> &lt;æ¡ä»¶è¡¨è¾¾å¼&gt;;<span class="keyword">then</span></span><br><span class="line">    æŒ‡ä»¤3</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    æŒ‡ä»¤4</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></tbody></table></figure>
<ol>
<li><strong>ä¼ å‚è®¡ç®—ï¼š</strong></li>
</ol>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#/bin/bash</span></span><br><span class="line"><span class="comment">#1.åˆ¤æ–­æ˜¯å¦ä¸ºä¸¤ä¸ªå‚æ•°</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> -ne 2 ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$0</span> num1 num2 âœ”"</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></tbody></table></figure>
<ol start="2">
<li><strong>åˆ¤æ–­å‚æ•°æ˜¯å¦ä¸ºæ•°å­—</strong></li>
</ol>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">expr</span> <span class="variable">$1</span> + <span class="variable">$2</span> + 100 &amp;&gt;/dev/null</span><br><span class="line"><span class="keyword">if</span> [ $? -eq 0 ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"[data ok]:<span class="variable">$1</span> <span class="variable">$2</span>"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"è¯·è¾“å…¥ä¸¤ä¸ªæ­£ç¡®çš„æ•´æ•°ï¼"</span></span><br><span class="line">    <span class="built_in">exit</span> 2</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></tbody></table></figure>
<ol start="3">
<li><strong>å¼€å§‹è®¡ç®—</strong></li>
</ol>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">a=<span class="variable">$1</span></span><br><span class="line">b=<span class="variable">$2</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$a</span>+<span class="variable">$b</span>=$((a+b))</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$a</span>-<span class="variable">$b</span>=$((a-b))</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$a</span>^<span class="variable">$b</span>=$((a**b))</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$b</span> -eq 0 ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">"[error] é™¤æ•°ä¸º0ï¼Œå–ä½™å’Œé™¤æ³•ä¸èƒ½è®¡ç®—ã€‚Ã—"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="variable">$a</span>/<span class="variable">$b</span>=$((a/b))</span><br><span class="line">   <span class="built_in">echo</span> <span class="variable">$a</span>%<span class="variable">$b</span>=$((a%b))</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></tbody></table></figure>

<ol start="4">
<li><strong>å†…å­˜å‘Šè­¦</strong></li>
</ol>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@KFSAMBA ~]<span class="comment"># tail -1 /etc/mail.rc</span></span><br><span class="line"><span class="built_in">set</span> from=513247869@qq.com smtp=smtp.qq.com smtp-auth-user=513247869 smtp-auth-password=qfztqqoggfblbgec</span><br><span class="line"></span><br><span class="line"><span class="comment">#/bin/bash</span></span><br><span class="line">free_mem=$(free -m | awk -F<span class="string">" "</span> <span class="string">'NR==2{print $7}'</span>)</span><br><span class="line">flx=`<span class="built_in">echo</span> <span class="string">"scale=2;<span class="variable">$free_mem</span>/1024"</span> |bc`</span><br><span class="line"><span class="built_in">date</span>=`<span class="built_in">date</span> +<span class="string">"%F %H:%M:%S"</span>`</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$free_mem</span> -lt 8000 ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"[<span class="variable">$date</span>] åºŸäº†ï¼Œæ²¡å†…å­˜äº†: <span class="variable">${flx}</span>G"</span> |<span class="built_in">tee</span> -a /var/log/mem.log <span class="comment">#è¿½åŠ å¹¶è¾“å‡º</span></span><br><span class="line">    /usr/bin/tail -1 /var/log/mem.log | /usr/bin/mail -s <span class="string">"<span class="subst">$(date)</span> å†…å­˜è­¦å‘Š"</span> 513247869@qq.com</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"[<span class="variable">$date</span>] å†…å­˜è¿˜å¤Ÿ: <span class="variable">${flx}</span>G"</span> |<span class="built_in">tee</span> -a /var/log/mem.log</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="æœåŠ¡ç›‘æ§"><a href="#æœåŠ¡ç›‘æ§" class="headerlink" title="æœåŠ¡ç›‘æ§"></a>æœåŠ¡ç›‘æ§</h3><p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-271.png" alt="æœåŠ¡ç›‘æ§"><br>ncçš„æ§åˆ¶å‚æ•°ä¸å°‘ï¼Œå¸¸ç”¨çš„å‡ ä¸ªå‚æ•°å¦‚ä¸‹æ‰€åˆ—ï¼š</p>
<ul>
<li>-l ç”¨äºæŒ‡å®šncå°†å¤„äºä¾¦å¬æ¨¡å¼ã€‚æŒ‡å®šè¯¥å‚æ•°ï¼Œåˆ™æ„å‘³ç€ncè¢«å½“ä½œserverï¼Œä¾¦å¬å¹¶æ¥å—è¿æ¥ï¼Œè€Œéå‘å…¶å®ƒåœ°å€å‘èµ·è¿æ¥ã€‚</li>
<li>-p <port> æš‚æœªç”¨åˆ°ï¼ˆè€ç‰ˆæœ¬çš„ncå¯èƒ½éœ€è¦åœ¨ç«¯å£å·å‰åŠ -på‚æ•°ï¼Œä¸‹é¢æµ‹è¯•ç¯å¢ƒæ˜¯centos6.6ï¼Œncç‰ˆæœ¬æ˜¯nc-1.84ï¼Œæœªç”¨åˆ°-på‚æ•°ï¼‰</port></li>
<li>-s æŒ‡å®šå‘é€æ•°æ®çš„æºIPåœ°å€ï¼Œé€‚ç”¨äºå¤šç½‘å¡æœº </li>
<li>-u æŒ‡å®šncä½¿ç”¨UDPåè®®ï¼Œé»˜è®¤ä¸ºTCP</li>
<li>-v è¾“å‡ºäº¤äº’æˆ–å‡ºé”™ä¿¡æ¯ï¼Œæ–°æ‰‹è°ƒè¯•æ—¶å°¤ä¸ºæœ‰ç”¨</li>
<li>-w è¶…æ—¶ç§’æ•°ï¼Œåé¢è·Ÿæ•°å­— </li>
<li>-z è¡¨ç¤ºzeroï¼Œè¡¨ç¤ºæ‰«ææ—¶ä¸å‘é€ä»»ä½•æ•°æ®</li>
</ul>
<p><strong>Nginxç›‘æ§</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#/bin/bash</span></span><br><span class="line"><span class="comment">#nginx=$(/application/nginx/sbin/nginx)</span></span><br><span class="line"><span class="built_in">date</span>=`<span class="built_in">date</span> +<span class="string">"%F %H:%M:%S"</span>`</span><br><span class="line">nginxcmd=<span class="string">"/application/nginx/sbin/nginx"</span></span><br><span class="line"><span class="comment">#ç›‘æ§æœåŠ¡</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> -eq 0 ];<span class="keyword">then</span></span><br><span class="line">    /usr/bin/netstat -lntup | grep 80 &amp;&gt; /dev/null</span><br><span class="line">    <span class="keyword">if</span> [ $? -ne 0 ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"[<span class="variable">$date</span>] ä¸è¡Œäº†ï¼Œnginxå´©äº†"</span> |<span class="built_in">tee</span> -a /var/log/nginx_state.log</span><br><span class="line">        /usr/bin/tail -1 /var/log/nginx_state.log | /usr/bin/mail -s <span class="string">"<span class="subst">$(date)</span> nginxå‘Šè­¦"</span> 513247869@qq.com</span><br><span class="line">        <span class="built_in">exit</span> 1</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"[<span class="variable">$date</span>]nginx çŠ¶æ€æ­£å¸¸!"</span></span><br><span class="line">        <span class="built_in">exit</span> 0</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯åŠ¨è„šæœ¬</span></span><br><span class="line">[[ <span class="variable">$#</span> -ne 1 ]] &amp;&amp; {</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$0</span> {start|stop|restart|reload}"</span> </span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"<span class="variable">$1</span>"</span> = <span class="string">"start"</span> ];<span class="keyword">then</span></span><br><span class="line">    <span class="variable">$nginxcmd</span> -c /application/nginx/conf/nginx.conf &amp;&gt; /dev/null</span><br><span class="line">    /bin/bash <span class="variable">$0</span></span><br><span class="line">    <span class="built_in">exit</span> 0</span><br><span class="line"><span class="keyword">elif</span> [ <span class="string">"<span class="variable">$1</span>"</span> = <span class="string">"restart"</span> -o <span class="string">"<span class="variable">$1</span>"</span> = <span class="string">"reload"</span> ];<span class="keyword">then</span></span><br><span class="line">    <span class="variable">$nginxcmd</span> -c /application/nginx/conf/nginx.conf &amp;&gt; /dev/null</span><br><span class="line">    <span class="variable">$nginxcmd</span> -s reload &amp;&gt; /dev/null</span><br><span class="line">    <span class="built_in">exit</span> 0</span><br><span class="line"><span class="keyword">elif</span> [ <span class="string">"<span class="variable">$1</span>"</span> = <span class="string">"stop"</span> ];<span class="keyword">then</span></span><br><span class="line">    <span class="variable">$nginxcmd</span> -s stop &amp;&gt; /dev/null</span><br><span class="line">    <span class="built_in">exit</span> 0</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"[ERROR] <span class="variable">$0</span> {start|stop|restart|reload}"</span></span><br><span class="line">    <span class="built_in">exit</span> 2</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="å‡½æ•°ä¼ å‚"><a href="#å‡½æ•°ä¼ å‚" class="headerlink" title="å‡½æ•°ä¼ å‚"></a>å‡½æ•°ä¼ å‚</h3><p>è¯­æ³•1ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> å‡½æ•°å() {</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>è¯­æ³•2ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> å‡½æ•°å {</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>è¯­æ³•3ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å‡½æ•°å () {</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p><strong>å‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹ï¼š</strong></p>
<ol>
<li>æ‰§è¡ŒShellå‡½æ•°æ—¶ï¼Œå‡½æ•°åå‰çš„functionå’Œå‡½æ•°åçš„å°æ‹¬å·éƒ½ä¸è¦å¸¦ã€‚</li>
<li>å‡½æ•°çš„å®šä¹‰å¿…é¡»åœ¨è¦æ‰§è¡Œå‰é¢å®šä¹‰æˆ–åŠ è½½å¥½ï¼ˆå…ˆå®šä¹‰ï¼Œå†æ‰§è¡Œï¼‰ã€‚</li>
<li>Shellæ‰§è¡Œç³»ç»Ÿä¸­å„ç§ç¨‹åºçš„é¡ºåºä¸ºï¼šç³»ç»Ÿåˆ«åâ†’å‡½æ•°â†’ç³»ç»Ÿå‘½ä»¤â†’å¯æ‰§è¡Œæ–‡ä»¶ã€‚</li>
<li>å‡½æ•°æ‰§è¡Œæ—¶ï¼Œä¼šå’Œè°ƒç”¨å®ƒçš„è„šæœ¬å…±ç”¨å˜é‡ï¼Œä¹Ÿå¯ä»¥ä¸ºå‡½æ•°è®¾å®šå±€éƒ¨å˜é‡ä»¥åŠç‰¹æ®Šä½ç½®å‚æ•°ã€‚</li>
<li>åœ¨shellå‡½æ•°é‡Œé¢ï¼Œreturnå‘½ä»¤åŠŸèƒ½ä¸exitç±»ä¼¼ï¼Œä½œç”¨æ˜¯é€€å‡ºå‡½æ•°ï¼Œè€Œexitæ˜¯é€€å‡ºè„šæœ¬æ–‡ä»¶ã€‚</li>
<li>return è¯­å¥ä¼šè¿”å›ä¸€ä¸ªé€€å‡ºå€¼ï¼ˆå³è¿”å›å€¼ï¼‰ç»™è°ƒç”¨å‡½æ•°çš„å½“å‰ç¨‹åºï¼Œè€Œexitä¼šè¿”å›ä¸€ä¸ªé€€å‡ºå€¼ï¼ˆå³è¿”å›å€¼ï¼‰ç»™æ‰§è¡Œç¨‹åºçš„å½“å‰Shellã€‚</li>
<li>å¦‚æœå‡½æ•°å­˜æ”¾åœ¨ç‹¬ç«‹çš„æ–‡ä»¶ä¸­ï¼Œè¢«è„šæœ¬åŠ è½½ä½¿ç”¨æ—¶ï¼Œéœ€è¦ä½¿ç”¨sourceæˆ–è€….æ¥åŠ è½½ã€‚</li>
<li>åœ¨å‡½æ•°å†…ä¸€èˆ¬ä½¿ç”¨localå®šä¹‰å±€éƒ¨å˜é‡ï¼Œè¿™äº›å˜é‡ç¦»å¼€å‡½æ•°åå³æ¶ˆå¤±ã€‚</li>
</ol>
<p><strong>å‡½æ•°ä¼ å‚ï¼š</strong></p>
<ul>
<li>Shellçš„ä½ç½®å‚æ•°ï¼ˆ$1ã€$2â€¦ã€$#ã€$*ã€$?ä»¥åŠ$@ï¼‰éƒ½å¯ä»¥ä½œä¸ºå‡½æ•°çš„å‚æ•°ä½¿ç”¨ã€‚</li>
<li>æ­¤æ—¶çˆ¶è„šæœ¬çš„å‚æ•°ä¸´æ—¶åœ°è¢«å‡½æ•°å‚æ•°æ‰€æ©ç›–æˆ–éšè—ã€‚</li>
<li>$0æ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒä»ç„¶æ˜¯çˆ¶è„šæœ¬çš„åç§°ã€‚</li>
<li>å½“å‡½æ•°æ‰§è¡Œå®Œæˆæ—¶ï¼ŒåŸæ¥çš„å‘½ä»¤è¡Œè„šæœ¬çš„å‚æ•°å³æ¢å¤ã€‚</li>
<li>å‡½æ•°çš„å‚æ•°å˜é‡æ˜¯åœ¨å‡½æ•°ä½“é‡Œé¢å®šä¹‰çš„ã€‚</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@KFSAMBA ~]<span class="comment"># sh function.sh </span></span><br><span class="line">I am felix</span><br><span class="line">[root@KFSAMBA ~]<span class="comment"># cat function.sh </span></span><br><span class="line"><span class="comment">#/bin/bash</span></span><br><span class="line"><span class="function"><span class="title">felix</span></span>(){</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"I am felix"</span></span><br><span class="line">}</span><br><span class="line">felix</span><br></pre></td></tr></tbody></table></figure>
<p><strong>ç¬¬ä¸€æ­¥ï¼š</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@KFSAMBA ~]<span class="comment"># sh function.sh </span></span><br><span class="line">I am ç¬¬ä¸€ä¸ªå‚æ•°</span><br><span class="line">[root@KFSAMBA ~]<span class="comment"># cat function.sh </span></span><br><span class="line"><span class="comment">#/bin/bash</span></span><br><span class="line"><span class="function"><span class="title">felix</span></span>(){</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"I am <span class="variable">$1</span>"</span></span><br><span class="line">}</span><br><span class="line">felix ç¬¬ä¸€ä¸ªå‚æ•°  &lt;==è¿™ä¸ªå‚æ•°ä¼ é€’ç»™äº†å‡½æ•°felixï¼Œfelixå‡½æ•°ä¸­å†é€šè¿‡<span class="variable">$1</span>è¿›è¡Œå¸¦å…¥</span><br></pre></td></tr></tbody></table></figure>
<p><strong>ç¬¬äºŒæ­¥ï¼š</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@KFSAMBA ~]<span class="comment"># sh function.sh ç¬¬ä¸€ </span></span><br><span class="line">I am ç¬¬ä¸€</span><br><span class="line">[root@KFSAMBA ~]<span class="comment"># cat function.sh </span></span><br><span class="line"><span class="comment">#/bin/bash</span></span><br><span class="line"><span class="function"><span class="title">felix</span></span>(){</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"I am <span class="variable">$1</span>"</span>  &lt;==2.è¿™é‡Œçš„<span class="variable">$1</span>æ˜¯æŒ‡å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚æ­¤è„šæœ¬ä¸­å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯è„šæœ¬çš„ç¬¬ä¸€ä¸ªå‚æ•°</span><br><span class="line">}</span><br><span class="line">felix <span class="variable">$1</span>  &lt;==1.è¿™é‡Œçš„<span class="variable">$1</span>æ˜¯æŒ‡è„šæœ¬çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå°†ç”¨æˆ·ä¼ å…¥è„šæœ¬çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼ ç»™å‡½æ•°</span><br><span class="line"></span><br><span class="line">å‡½æ•°å†…å®šä¹‰ç§æœ‰å˜é‡ï¼š</span><br><span class="line">å‡½æ•°(){</span><br><span class="line"><span class="built_in">local</span> s=1</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ£€æŸ¥urlæ˜¯å¦æ­£å¸¸</strong></p>
<ol>
<li>æ£€æŸ¥urlæ˜¯å¦æ­£å¸¸</li>
</ol>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@KFSAMBA ~]<span class="comment"># sh check_url.sh baidi.com</span></span><br><span class="line">URL is no</span><br><span class="line">[root@KFSAMBA ~]<span class="comment"># cat check_url.sh </span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">wegt -q <span class="variable">$1</span> &amp;&gt;/dev/null    &lt;==-q ä¸æ˜¾ç¤ºè¾“å‡º</span><br><span class="line">retval=$?</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$retval</span> -eq 0 ]   &lt;==åˆ¤æ–­è¿”å›å€¼</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"URL is ok"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"URL is no"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></tbody></table></figure>
<ol start="2">
<li>è°ƒç”¨å‡½æ•°å®ç°</li>
</ol>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="function"><span class="title">check_url</span></span>(){</span><br><span class="line">wget -q -o /dev/null --spider --tries=1 -T 5 <span class="variable">$1</span>   &lt;==3.checkå‡½æ•°æ¥æ”¶mainå‡½æ•°çš„å‚æ•°ï¼Œå¾—å‡ºç»“æœ</span><br><span class="line"><span class="comment">#T#è¶…æ—¶æ—¶é—´</span></span><br><span class="line"><span class="comment">#spider#çˆ¬è™«ï¼Œæ¨¡æ‹Ÿè®¿é—®ä¸ä¸‹è½½</span></span><br><span class="line"><span class="comment">#tries #wegtæ¬¡æ•°</span></span><br><span class="line"><span class="comment">#-T #è¶…æ—¶æ—¶é—´   </span></span><br><span class="line">retval=$?</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$retval</span> -eq 0 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"URL is ok"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"URL is no"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="title">main</span></span>(){</span><br><span class="line">    check_url <span class="variable">$1</span>   &lt;==2.mainå‡½æ•°çš„å‚æ•°ä¼ é€’ç»™checkå‡½æ•°</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">main $*   &lt;==1.ä¼ é€’è„šæœ¬å‚æ•°ç»™mainå‡½æ•°</span><br></pre></td></tr></tbody></table></figure>
<ol start="3">
<li>ä¼ å‚çš„æ–¹å¼è°ƒç”¨å‡½æ•°</li>
</ol>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="function"><span class="title">usage</span></span>(){</span><br><span class="line">    <span class="keyword">if</span> [[ ! <span class="variable">$1</span> =~ http://.*$ ]]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"Usage:<span class="variable">$0</span> http://www.xxx.com"</span></span><br><span class="line">        <span class="built_in">exit</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">check_url</span></span>(){</span><br><span class="line">wget -q <span class="variable">$1</span> &amp;&gt;/dev/null</span><br><span class="line">retval=$?</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$retval</span> -eq 0 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"URL is ok"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"URL is no"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="title">main</span></span>(){</span><br><span class="line">    usage <span class="variable">$1</span></span><br><span class="line">    check_url <span class="variable">$1</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">main $*</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ç³»ç»Ÿè‡ªå¸¦å‡½æ•°"><a href="#ç³»ç»Ÿè‡ªå¸¦å‡½æ•°" class="headerlink" title="ç³»ç»Ÿè‡ªå¸¦å‡½æ•°"></a>ç³»ç»Ÿè‡ªå¸¦å‡½æ•°</h3><p><strong>actionå‡½æ•°</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Run some action. Log its output.</span></span><br><span class="line"><span class="function"><span class="title">action</span></span>() {</span><br><span class="line">    <span class="built_in">local</span> STRING rc</span><br><span class="line"></span><br><span class="line">    STRING=<span class="variable">$1</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">"<span class="variable">$STRING</span> "</span></span><br><span class="line">    <span class="built_in">shift</span></span><br><span class="line">    <span class="string">"<span class="variable">$@</span>"</span> &amp;&amp; success $<span class="string">"<span class="variable">$STRING</span>"</span> || failure $<span class="string">"<span class="variable">$STRING</span>"</span></span><br><span class="line">    rc=$?</span><br><span class="line">    <span class="built_in">echo</span></span><br><span class="line">    <span class="built_in">return</span> <span class="variable">$rc</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p><strong>è°ƒç”¨action</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">[ -f /etc/init.d/functions ] &amp;&amp; . /etc/init.d/functions   &lt;==å‡½æ•°åº“æ–‡ä»¶å­˜åœ¨å°±åŠ è½½</span><br><span class="line"><span class="function"><span class="title">usage</span></span>(){</span><br><span class="line">    <span class="keyword">if</span> [[ ! <span class="variable">$1</span> =~ http://.*$ ]]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"Usage:<span class="variable">$0</span> http://www.xxx.com"</span></span><br><span class="line">        <span class="built_in">exit</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">check_url</span></span>(){</span><br><span class="line"></span><br><span class="line">wget -q -o /dev/null --spider --tries=1 -T 5 <span class="variable">$1</span>   </span><br><span class="line"><span class="comment">#spider#çˆ¬è™«ï¼Œæ¨¡æ‹Ÿè®¿é—®ä¸ä¸‹è½½</span></span><br><span class="line"><span class="comment">#tries #wegtæ¬¡æ•°</span></span><br><span class="line"><span class="comment">#-T #è¶…æ—¶æ—¶é—´</span></span><br><span class="line"></span><br><span class="line">retval=$?</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$retval</span> -eq 0 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    action <span class="string">"URL is ok"</span> /bin/true   &lt;==è°ƒç”¨actionå‡½æ•°</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    action <span class="string">"URL is no"</span> /bin/false</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="title">main</span></span>(){</span><br><span class="line">    usage <span class="variable">$1</span></span><br><span class="line">    check_url <span class="variable">$1</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">main $*</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æµ‹è¯•</strong><br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-272.png" alt="test"></p>
<h3 id="case"><a href="#case" class="headerlink" title="case"></a>case</h3><p>caseç»“æ„æ¡ä»¶å¥çš„è¯­æ³•æ ¼å¼ä¸º</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">"å˜é‡"</span> <span class="keyword">in</span> </span><br><span class="line">    å€¼1)</span><br><span class="line">        æŒ‡ä»¤1...</span><br><span class="line">        ;;</span><br><span class="line">    å€¼2)</span><br><span class="line">        æŒ‡ä»¤2...</span><br><span class="line">        ;;</span><br><span class="line">    *)</span><br><span class="line">        æŒ‡ä»¤3...</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"></span><br><span class="line">ç›¸å½“äº<span class="keyword">if</span>å¤šåˆ†æ”¯è¯­å¥ã€‚</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"å˜é‡"</span>  =<span class="string">"å€¼1"</span>  ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    æŒ‡ä»¤1...</span><br><span class="line"><span class="keyword">elif</span>  [ <span class="string">"å˜é‡"</span>  =<span class="string">"å€¼2"</span>  ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    æŒ‡ä»¤2...</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    æŒ‡ä»¤3...</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>èœå•å®ç°</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">###################################################</span></span><br><span class="line"><span class="comment"># File Name: 3.sh</span></span><br><span class="line"><span class="comment"># Created Time: Thu 26 Dec 2019 01:55:17 PM CST</span></span><br><span class="line"><span class="comment"># Version: V1.0</span></span><br><span class="line"><span class="comment"># Author: Felix</span></span><br><span class="line"><span class="comment"># Organization: 360JR OPS</span></span><br><span class="line"><span class="comment">###################################################</span></span><br><span class="line"><span class="comment">#vars</span></span><br><span class="line">Inl=<span class="string">"å³å°†å®‰è£…:"</span></span><br><span class="line">One=<span class="string">"\033[40;32m MySQL\033[0m"</span></span><br><span class="line">Two=<span class="string">"\033[40;32m Nginx \033[0m"</span></span><br><span class="line">Three=<span class="string">"\033[40;32m PHP \033[0m"</span></span><br><span class="line">Four=<span class="string">"\033[40;32m Tomcat \033[0m"</span></span><br><span class="line">Five=<span class="string">'\033[40;32m ALL \033[0m'</span></span><br><span class="line">Err=<span class="string">"\033[40;31m[Error]\033[0m Please check the.."</span></span><br><span class="line">Ok=<span class="string">"\033[40;32m[OK] \033[0mSuccessful installation"</span></span><br><span class="line">[ -f /etc/init.d/functions ] &amp;&amp; . /etc/init.d/functions</span><br><span class="line"></span><br><span class="line"><span class="comment">#menus</span></span><br><span class="line"><span class="function"><span class="title">list</span></span>(){</span><br><span class="line">    /bin/clear</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">"-------------------------</span></span><br><span class="line"><span class="string"> By Felix:</span></span><br><span class="line"><span class="string">  1.[\033[40;34m Install\033[0m<span class="variable">$One</span>  ].a</span></span><br><span class="line"><span class="string">  2.[\033[40;34m Install\033[0m<span class="variable">$Two</span> ].b</span></span><br><span class="line"><span class="string">  3.[\033[40;34m Install\033[0m<span class="variable">$Three</span>   ].c</span></span><br><span class="line"><span class="string">  4.[\033[40;34m Install\033[0m<span class="variable">$Four</span>].d</span></span><br><span class="line"><span class="string">  5.[\033[40;34m Install\033[0m<span class="variable">$Five</span>   ].e</span></span><br><span class="line"><span class="string">  6.[\033[40;34m Exit\033[0m           ].f</span></span><br><span class="line"><span class="string">-------------------------"</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"Please select a{1|a,2|b,3|c,4|d,5|e,6|f}:"</span></span><br><span class="line">    <span class="built_in">read</span> n</span><br><span class="line">    gather=<span class="variable">$n</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">ftc</span></span>(){</span><br><span class="line">    /bin/clear</span><br><span class="line">    /bin/bash <span class="variable">$0</span></span><br><span class="line">    <span class="built_in">exit</span> 1      </span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">#Input value judgment</span></span><br><span class="line"><span class="function"><span class="title">isdigit</span></span>(){</span><br><span class="line">    <span class="built_in">expr</span> <span class="variable">$gather</span> + 1 &amp;&gt;/dev/null</span><br><span class="line">    x=$?</span><br><span class="line">    <span class="keyword">if</span> [[ <span class="string">"<span class="variable">$gather</span>"</span> =~ ^[a-f]$ ]];<span class="keyword">then</span>   <span class="comment">#&lt;==å¦‚æœåŒ¹é…åˆ°a-få°±ä»€ä¹ˆéƒ½ä¸å¹²</span></span><br><span class="line">        :</span><br><span class="line">    <span class="keyword">elif</span> [[ -z <span class="variable">$gather</span> || <span class="variable">$x</span> -ne 0 || ! <span class="variable">$gather</span> =~ ^[1-6]$ ]];<span class="keyword">then</span>   <span class="comment">#&lt;==å¦‚æœä¼ å…¥å€¼ä¸ä¸ºæ•°å­—å°±é‡æ–°æ‰§è¡Œè„šæœ¬</span></span><br><span class="line">        ftc</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">#Installation status diagram</span></span><br><span class="line"><span class="function"><span class="title">choose</span></span>(){</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">"<span class="variable">${Inl}</span> $*"</span></span><br><span class="line">    <span class="built_in">sleep</span> 5</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="title">win</span></span>(){</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">"<span class="variable">${Ok}</span> $*"</span> </span><br><span class="line">    <span class="built_in">exit</span> 0</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#Choose to determine</span></span><br><span class="line"><span class="function"><span class="title">checkbox</span></span>(){</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"<span class="variable">$gather</span>"</span> <span class="keyword">in</span></span><br><span class="line">        6|f)</span><br><span class="line">            <span class="built_in">echo</span> -e <span class="string">"\033[40;31mQuit!\033[0m"</span></span><br><span class="line">            <span class="built_in">exit</span> 0</span><br><span class="line">            ;;</span><br><span class="line">        5|e)</span><br><span class="line">            choose <span class="variable">${Five}</span></span><br><span class="line">            win <span class="variable">${Five}</span></span><br><span class="line">            ;;</span><br><span class="line">        4|d)</span><br><span class="line">            choose <span class="variable">${Four}</span></span><br><span class="line">            win <span class="variable">${Four}</span></span><br><span class="line">            ;;</span><br><span class="line">        3|c)</span><br><span class="line">            choose <span class="variable">${Three}</span></span><br><span class="line">            win <span class="variable">${Three}</span></span><br><span class="line">            ;;</span><br><span class="line">        2|b)</span><br><span class="line">            choose <span class="variable">${Two}</span></span><br><span class="line">            win <span class="variable">${Two}</span></span><br><span class="line">            ;;</span><br><span class="line">        1|a)</span><br><span class="line">            choose <span class="variable">${One}</span></span><br><span class="line">            win <span class="variable">${One}</span></span><br><span class="line">            ;;</span><br><span class="line">        *)</span><br><span class="line">            :</span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">#Call all</span></span><br><span class="line"><span class="function"><span class="title">main</span></span>(){</span><br><span class="line">    list</span><br><span class="line">    isdigit</span><br><span class="line">    checkbox</span><br><span class="line">}</span><br><span class="line">main</span><br></pre></td></tr></tbody></table></figure>
<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-273.png" alt="èœå•"></p>
<h3 id="è¿”å›å€¼ä¼ é€’"><a href="#è¿”å›å€¼ä¼ é€’" class="headerlink" title="è¿”å›å€¼ä¼ é€’"></a>è¿”å›å€¼ä¼ é€’</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># chkconfig: 2345 21 81</span></span><br><span class="line"><span class="comment"># description: startup rsync scripts</span></span><br><span class="line">PID=/var/run/rsyncd.pid</span><br><span class="line"><span class="function"><span class="title">start</span></span>(){</span><br><span class="line">	<span class="keyword">if</span> [ -f <span class="variable">$PID</span> -a -s <span class="variable">$PID</span> ]</span><br><span class="line">	   <span class="keyword">then</span></span><br><span class="line">	       :</span><br><span class="line">	   <span class="keyword">else</span></span><br><span class="line">	       rsync --daemon</span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line">    <span class="built_in">return</span> $?   &lt;==æŠŠå‡½æ•°æ‰§è¡Œç»“æœé€šè¿‡<span class="built_in">return</span>ä¼ å‡º</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="title">stop</span></span>(){</span><br><span class="line">    <span class="keyword">if</span> [ -f <span class="variable">$PID</span> -a -s <span class="variable">$PID</span> ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">kill</span> `<span class="built_in">cat</span> <span class="variable">$PID</span>`</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="built_in">return</span> $?</span><br><span class="line">}</span><br><span class="line"><span class="keyword">case</span> <span class="string">"<span class="variable">$1</span>"</span> <span class="keyword">in</span></span><br><span class="line">    start)</span><br><span class="line">        start</span><br><span class="line">        retval=$?</span><br><span class="line">        ;;</span><br><span class="line">    stop)</span><br><span class="line">        stop</span><br><span class="line">        retval=$?</span><br><span class="line">        ;;</span><br><span class="line">    restart)</span><br><span class="line">        stop</span><br><span class="line">        <span class="built_in">sleep</span> 2</span><br><span class="line">        start</span><br><span class="line">        retval=$?</span><br><span class="line">        ;;</span><br><span class="line">    *)</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"Usageï¼›<span class="variable">$0</span> {start|stop|restart}"</span></span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"><span class="built_in">exit</span> <span class="variable">$retval</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="C6å¯åŠ¨è„šæœ¬"><a href="#C6å¯åŠ¨è„šæœ¬" class="headerlink" title="C6å¯åŠ¨è„šæœ¬"></a>C6å¯åŠ¨è„šæœ¬</h3><p>serviceç®¡ç†çš„æœåŠ¡éœ€è¦å°†å…¶è„šæœ¬æ–‡ä»¶æ”¾åœ¨/etc/init.dç›®å½•ä¸­ï¼Œé€šè¿‡chkconfigç®¡ç†ã€‚<br><strong>rsyncå¯åŠ¨è„šæœ¬è§£æ</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># chkconfig: 2345 21 81</span></span><br><span class="line"><span class="comment"># description: rsync service start and stop scripts</span></span><br><span class="line"><span class="comment"># Author: Felix</span></span><br><span class="line"><span class="comment"># Organization:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#åŠ è½½è‡ªå¸¦å‡½æ•°åº“</span></span><br><span class="line">[ -f /etc/rc.d/init.d/functions ] &amp;&amp; <span class="built_in">source</span> /etc/rc.d/init.d/functions</span><br><span class="line"><span class="comment">#ç¨‹åºé”æ–‡ä»¶ï¼Œç”¨æ¥åˆ¤æ–­ç¨‹åºæ˜¯å¦å¯åŠ¨</span></span><br><span class="line">lockdir=<span class="string">'/var/lock/subsys'</span></span><br><span class="line">lock_file_path=<span class="string">"<span class="variable">$lockdir</span>/rsync"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#pidæ–‡ä»¶</span></span><br><span class="line">rsyncd_pid_file_path=<span class="string">"/var/run/rsyncd.pid"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æˆåŠŸæç¤ºå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="title">log_success_msg</span></span>(){</span><br><span class="line">    <span class="comment">#actionä¸ºç‰¹æ®Šçš„æç¤ºå‡½æ•°ï¼Œ$@ä¸ºæ‰€æœ‰å‚æ•°ã€‚</span></span><br><span class="line">    action <span class="string">"SUCCESS! <span class="variable">$@</span>"</span> /bin/true</span><br><span class="line">}</span><br><span class="line"><span class="comment">#å¤±è´¥æç¤ºå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="title">log_failure_msg</span></span>(){</span><br><span class="line">    action  <span class="string">"ERROR! <span class="variable">$@</span>"</span> /bin/false</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯åŠ¨å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="title">start</span></span>(){</span><br><span class="line">    rsync --daemon &amp;&gt;/dev/null</span><br><span class="line">    retval=$?</span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$retval</span> -eq 0 ]  <span class="comment">#&lt;==è·å–çŠ¶æ€ç ï¼Œä¸º0è¡¨ç¤ºå¯åŠ¨æˆåŠŸ</span></span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        log_success_msg <span class="string">"Rsyncd is started."</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">test</span> -w <span class="string">"<span class="variable">$lockdir</span>"</span> <span class="comment">#åˆ¤æ–­é”ç›®å½•æ˜¯å¦å¯å†™ã€‚</span></span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">touch</span> <span class="string">"<span class="variable">$lock_file_path</span>"</span> <span class="comment">#åˆ›å»ºé”æ–‡ä»¶ï¼Œè¡¨ç¤ºç¨‹åºå·²ç»æ­£å¸¸å¯åŠ¨ã€‚</span></span><br><span class="line">            <span class="built_in">return</span> <span class="variable">$retval</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            log_failure_msg <span class="string">"Rsync lockfile denied"</span> <span class="comment">#ç›®å½•ä¸å¯å†™ï¼Œåˆ›å»ºé”æ–‡ä»¶å¤±è´¥ï¼Œè°ƒç”¨å¤±è´¥å‡½æ•°æç¤ºã€‚</span></span><br><span class="line">            <span class="built_in">return</span> 1</span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"Rsyncd startup fail."</span>  <span class="comment">#è¿”å›å€¼ä¸ä¸º0ï¼Œè¡¨ç¤ºå¯åŠ¨å¤±è´¥ã€‚</span></span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">#åœæ­¢å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="title">stop</span></span>(){</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">test</span> -s <span class="string">"<span class="variable">$rsyncd_pid_file_path</span>"</span>  <span class="comment">#åˆ¤æ–­æ–‡ä»¶æ˜¯å¦ä¸ä¸ºç©ºã€‚</span></span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        <span class="comment">#è¯»å–pidfile</span></span><br><span class="line">        rsyncd_pid=`<span class="built_in">cat</span> <span class="string">"<span class="variable">$rsyncd_pid_file_path</span>"</span>`  <span class="comment">#ä¸ä¸ºç©ºåˆ™è·å–pid</span></span><br><span class="line">      </span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">kill</span> -0 <span class="variable">$rsyncd_pid</span> 2&gt;/dev/null)  <span class="comment">#é€šè¿‡è¿›ç¨‹å·ï¼Œåˆ¤æ–­å¯¹åº”çš„è¿›ç¨‹æ˜¯å¦å­˜åœ¨ã€‚</span></span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">kill</span> <span class="variable">$rsyncd_pid</span>   <span class="comment">#è¿›ç¨‹å­˜åœ¨å°±æ€æ­»è¿›ç¨‹</span></span><br><span class="line">            retval=$?</span><br><span class="line">            <span class="keyword">if</span> [ <span class="variable">$retval</span> -eq 0 ]</span><br><span class="line">            <span class="keyword">then</span></span><br><span class="line">                log_success_msg <span class="string">"Rsync Stop"</span> <span class="comment">#è°ƒç”¨åœæ­¢æˆåŠŸå‡½æ•°ã€‚</span></span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">test</span> -f <span class="string">"<span class="variable">$lock_file_path</span>"</span></span><br><span class="line">                <span class="keyword">then</span></span><br><span class="line">                    <span class="built_in">rm</span> <span class="string">"<span class="variable">$lock_file_path</span>"</span>  <span class="comment">#åˆ é™¤é”æ–‡ä»¶ã€‚</span></span><br><span class="line">                <span class="keyword">fi</span></span><br><span class="line">                <span class="built_in">return</span> <span class="variable">$retval</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                log_failure_msg <span class="string">"Rsyncd Stop."</span></span><br><span class="line">                <span class="built_in">return</span> <span class="variable">$retval</span></span><br><span class="line">            <span class="keyword">fi</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            log_failure_msg <span class="string">"rsync server_pid's process is not running!"</span></span><br><span class="line">            <span class="built_in">rm</span> <span class="string">"<span class="variable">$rsyncd_pid_file_path</span>"</span>   <span class="comment">#è¿›ç¨‹å·å¯¹åº”çš„è¿›ç¨‹æœªå¯åŠ¨ï¼Œå°±åˆ é™¤pidæ–‡ä»¶ã€‚å¹¶æç¤º</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        log_failure_msg <span class="string">"Rsync server PID file is null or not exist!"</span>   <span class="comment">#è¿›ç¨‹å·ä¸å­˜ï¼Œæç¤º</span></span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">}</span><br><span class="line"><span class="keyword">case</span> <span class="string">"<span class="variable">$1</span>"</span> <span class="keyword">in</span></span><br><span class="line">    start)</span><br><span class="line">        start</span><br><span class="line">        retval=$?</span><br><span class="line">        ;;</span><br><span class="line">    stop)</span><br><span class="line">        stop</span><br><span class="line">        retval=$?</span><br><span class="line">        ;;</span><br><span class="line">    restart)</span><br><span class="line">        stop</span><br><span class="line">        <span class="built_in">sleep</span> 2</span><br><span class="line">        start</span><br><span class="line">        retval=$?</span><br><span class="line">        ;;</span><br><span class="line">    *)</span><br><span class="line">        <span class="built_in">echo</span> $<span class="string">"Usage:<span class="variable">$0</span> {start|stop|restart}"</span></span><br><span class="line">        <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"><span class="built_in">exit</span> <span class="variable">$retval</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>Nginxå¯åŠ¨è„šæœ¬è§£æ</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># chkconfig: 2345 21 81</span></span><br><span class="line"><span class="comment"># description: nginx service start and stop scripts</span></span><br><span class="line"><span class="comment"># Author: Felix</span></span><br><span class="line"><span class="comment"># Organization:</span></span><br><span class="line"><span class="comment">###################################################</span></span><br><span class="line"><span class="comment"># File Name: 2.sh</span></span><br><span class="line"><span class="comment"># Created Time: 2019å¹´12æœˆ30æ—¥ æ˜ŸæœŸä¸€ 13æ—¶52åˆ†38ç§’</span></span><br><span class="line"><span class="comment"># Version: V1.0</span></span><br><span class="line"><span class="comment"># Author: Felix</span></span><br><span class="line"><span class="comment"># Organization: 360JR OPS</span></span><br><span class="line"><span class="comment">###################################################</span></span><br><span class="line"><span class="comment">#åŠ è½½è‡ªå¸¦å‡½æ•°åº“</span></span><br><span class="line">[ -f /etc/rc.d/init.d/functions ] &amp;&amp; <span class="built_in">source</span> /etc/rc.d/init.d/functions</span><br><span class="line"><span class="comment">#ç¨‹åºé”æ–‡ä»¶ï¼Œç”¨æ¥åˆ¤æ–­ç¨‹åºæ˜¯å¦å¯åŠ¨</span></span><br><span class="line">lockdir=<span class="string">'/var/lock/subsys'</span></span><br><span class="line">lock_file_path=<span class="string">"<span class="variable">$lockdir</span>/nginx"</span></span><br><span class="line">installation_site=<span class="string">"/application/nginx"</span> </span><br><span class="line">sbin=<span class="string">"<span class="variable">$installation_site</span>/sbin/nginx"</span></span><br><span class="line">conf=<span class="string">"<span class="variable">$installation_site</span>/conf/nginx.conf"</span></span><br><span class="line"><span class="comment">#pidæ–‡ä»¶</span></span><br><span class="line">nginx_pid_file_path=<span class="string">"<span class="variable">$installation_site</span>/logs/nginx.pid"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æˆåŠŸæç¤ºå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="title">log_success_msg</span></span>(){</span><br><span class="line">    <span class="comment">#actionä¸ºç‰¹æ®Šçš„æç¤ºå‡½æ•°ï¼Œ$@ä¸ºæ‰€æœ‰å‚æ•°ã€‚</span></span><br><span class="line">    action <span class="string">"SUCCESS! <span class="variable">$@</span>"</span> /bin/true</span><br><span class="line">}</span><br><span class="line"><span class="comment">#å¤±è´¥æç¤ºå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="title">log_failure_msg</span></span>(){</span><br><span class="line">    action <span class="string">"ERROR! <span class="variable">$@</span>"</span> /bin/false</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">start</span></span>(){</span><br><span class="line">    <span class="keyword">if</span> [ -f <span class="variable">$lock_file_path</span> ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">exit</span> 0</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="variable">$sbin</span> -c <span class="variable">$conf</span> &amp;&gt; /dev/null</span><br><span class="line">    gather=$?</span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$gather</span> -eq 0 ];<span class="keyword">then</span></span><br><span class="line">        log_success_msg <span class="string">"Nginx is started."</span></span><br><span class="line">        [ -w <span class="variable">$lockdir</span> ] &amp;&amp; {</span><br><span class="line">            <span class="built_in">touch</span> <span class="variable">$lock_file_path</span></span><br><span class="line">            <span class="built_in">return</span> <span class="variable">$gather</span></span><br><span class="line">        }||{</span><br><span class="line">            log_failure_msg <span class="string">"Nginx lockfile denied"</span></span><br><span class="line">            <span class="built_in">return</span> 1</span><br><span class="line">        }</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        log_failure_msg <span class="string">"Nginx startd failed"</span></span><br><span class="line">        <span class="built_in">return</span> <span class="variable">$gather</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">stop</span></span>(){</span><br><span class="line">    <span class="keyword">if</span> [ -s <span class="variable">$nginx_pid_file_path</span> ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        nginx_pid=$(<span class="built_in">cat</span> <span class="string">"<span class="variable">$nginx_pid_file_path</span>"</span>)</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">kill</span> -0 <span class="variable">$nginx_pid</span> &amp;&gt;/dev/null)</span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">            <span class="variable">$sbin</span> -s stop</span><br><span class="line">            gather=$?</span><br><span class="line">            [ <span class="variable">$gather</span> -eq 0 ]&amp;&amp;{</span><br><span class="line">                log_success_msg <span class="string">"Nginx Stop"</span></span><br><span class="line">                <span class="keyword">if</span> [ -f <span class="string">"<span class="variable">$lock_file_path</span>"</span> ]</span><br><span class="line">                <span class="keyword">then</span></span><br><span class="line">                    <span class="built_in">rm</span> <span class="string">"<span class="variable">$lock_file_path</span>"</span></span><br><span class="line">                <span class="keyword">fi</span></span><br><span class="line">                <span class="built_in">return</span> <span class="variable">$gather</span></span><br><span class="line">            }||{</span><br><span class="line">                log_failure_msg <span class="string">"Nginx Stop"</span></span><br><span class="line">                <span class="built_in">return</span> <span class="variable">$gather</span></span><br><span class="line">            }</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            log_failure_msg <span class="string">"Nginx service has not been started"</span></span><br><span class="line">            <span class="built_in">rm</span> <span class="string">"<span class="variable">$nginx_pid_file_path</span>"</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        log_failure_msg <span class="string">"Nginx service PID file is null or not exist!"</span></span><br><span class="line">        <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">reload</span></span>(){</span><br><span class="line">   <span class="variable">$sbin</span> -t &amp;&gt; /dev/null</span><br><span class="line">   <span class="keyword">if</span> [ $? -eq 0 ]</span><br><span class="line">   <span class="keyword">then</span></span><br><span class="line">       <span class="built_in">kill</span> -HUP $(<span class="built_in">cat</span> <span class="string">"<span class="variable">$nginx_pid_file_path</span>"</span>)</span><br><span class="line">       log_success_msg <span class="string">"Nginx Reload"</span></span><br><span class="line">   <span class="keyword">fi</span></span><br><span class="line">   <span class="built_in">return</span> $?</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="string">"<span class="variable">$1</span>"</span> <span class="keyword">in</span></span><br><span class="line">    start)</span><br><span class="line">        start</span><br><span class="line">        retval=$?</span><br><span class="line">        ;;</span><br><span class="line">    stop)</span><br><span class="line">        stop</span><br><span class="line">        retval=$?</span><br><span class="line">        ;;</span><br><span class="line">    restart)</span><br><span class="line">        stop</span><br><span class="line">        <span class="built_in">sleep</span> 2</span><br><span class="line">        start</span><br><span class="line">        retval=$?</span><br><span class="line">        ;;</span><br><span class="line">    reload)</span><br><span class="line">        reload</span><br><span class="line">        retval=$?</span><br><span class="line">        ;;</span><br><span class="line">    *)</span><br><span class="line">        <span class="built_in">echo</span> $<span class="string">"Usage:<span class="variable">$0</span> {start|stop|restart|reload}"</span></span><br><span class="line">        <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"><span class="built_in">exit</span> <span class="variable">$retval</span></span><br></pre></td></tr></tbody></table></figure>
<h3 id="C7å¯åŠ¨è„šæœ¬"><a href="#C7å¯åŠ¨è„šæœ¬" class="headerlink" title="C7å¯åŠ¨è„šæœ¬"></a>C7å¯åŠ¨è„šæœ¬</h3><p>æ‰‹åŠ¨ç¼–å†™è„šæœ¬ï¼Œä¸€èˆ¬ä¼šåœ¨æºç åŒ…å®‰è£…æ—¶ä½¿ç”¨ã€‚<br>systemdæœ‰ç³»ç»Ÿå’Œç”¨æˆ·åŒºåˆ†ï¼›ç³»ç»Ÿï¼ˆ<code>/user/lib/systemd/system/</code>ï¼‰ã€ç”¨æˆ·ï¼ˆ<code>/etc/lib/systemd/user/</code>ï¼‰.ä¸€èˆ¬ç³»ç»Ÿç®¡ç†å‘˜æ‰‹å·¥åˆ›å»ºçš„å•å…ƒæ–‡ä»¶å»ºè®®å­˜æ”¾åœ¨<code>/etc/systemd/system/</code>ç›®å½•ä¸‹é¢;æ¯ä¸€ä¸ªæœåŠ¡ä»¥.serviceç»“å°¾ï¼Œä¸€èˆ¬ä¼šåˆ†ä¸º3éƒ¨åˆ†ï¼š[Unit]ã€[Service]å’Œ[Install]</p>
<p><code>vim /usr/lib/systemd/system/æœåŠ¡å.service</code></p>
<p>è„šæœ¬çš„å†…å®¹æ ¼å¼</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[Unit]:æœåŠ¡çš„è¯´æ˜æ¨¡å—</span><br><span class="line">Description:æè¿°æœåŠ¡</span><br><span class="line">Documentation=man:sshd(8) man:sshd_config(5) :æ–‡æ¡£åˆ—è¡¨è¯´æ˜</span><br><span class="line">After:æœåŠ¡ä¾èµ–ç±»åˆ«è¯´æ˜</span><br><span class="line">Wants=sshd-keygen.service:å¯é€‰çš„ä¾èµ–æœåŠ¡</span><br><span class="line"></span><br><span class="line">[Service]æœåŠ¡è¿è¡Œå‚æ•°çš„è®¾ç½®</span><br><span class="line">Type=forkingæ˜¯åå°è¿è¡Œçš„å½¢å¼</span><br><span class="line">PIDFileä¸ºå­˜æ”¾PIDçš„æ–‡ä»¶è·¯å¾„</span><br><span class="line">EnvironmentFile=/etc/sysconfig/sshdç¯å¢ƒå˜é‡ç­‰çš„é…ç½®æ–‡ä»¶</span><br><span class="line">ExecStartä¸ºæœåŠ¡çš„å…·ä½“è¿è¡Œå‘½ä»¤</span><br><span class="line">ExecReloadä¸ºé‡å¯å‘½ä»¤</span><br><span class="line">ExecStopä¸ºåœæ­¢å‘½ä»¤</span><br><span class="line">PrivateTmp=Trueè¡¨ç¤ºç»™æœåŠ¡åˆ†é…ç‹¬ç«‹çš„ä¸´æ—¶ç©ºé—´</span><br><span class="line">æ³¨æ„ï¼šå¯åŠ¨ã€é‡å¯ã€åœæ­¢å‘½ä»¤å…¨éƒ¨è¦æ±‚ä½¿ç”¨ç»å¯¹è·¯å¾„</span><br><span class="line"></span><br><span class="line">[Install]æœåŠ¡å®‰è£…çš„ç›¸å…³è®¾ç½®ï¼Œå¯è®¾ç½®ä¸ºå¤šç”¨æˆ·</span><br><span class="line">WantedBy=multi-user.targetè¿™é‡Œä¸ºè®¾ç½®å¤šç”¨æˆ·çº§åˆ«ã€‚å¯ä¸ºç©ºæ ¼åˆ†éš”çš„åˆ—è¡¨ï¼Œ è¡¨ç¤ºåœ¨ä½¿ç”¨ systemctl <span class="built_in">enable</span> å¯ç”¨æ­¤å•å…ƒæ—¶ï¼Œ å°†ä¼šåœ¨å¯¹åº”çš„ç›®å½•è®¾ç½®å¯¹åº”æ–‡ä»¶çš„è½¯è¿æ¥/etc/systemd/system/multi-user.target.wants/ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª/usr/lib/systemd/system/nginx.service æ–‡ä»¶çš„é“¾æ¥ã€‚æƒ³å¯¹åº”ï¼Œå¯ä»¥ç”¨ <span class="built_in">disable</span> æŠŠå®ƒä» wants ç›®å½•ç»™åˆ é™¤</span><br></pre></td></tr></tbody></table></figure>
<p><strong>é™„å½•ï¼š</strong></p>
<ul>
<li>Type=simpleï¼ˆé»˜è®¤å€¼ï¼‰ï¼šsystemdè®¤ä¸ºè¯¥æœåŠ¡å°†ç«‹å³å¯åŠ¨ã€‚æœåŠ¡è¿›ç¨‹ä¸ä¼šforkã€‚å¦‚æœè¯¥æœåŠ¡è¦å¯åŠ¨å…¶ä»–æœåŠ¡ï¼Œä¸è¦ä½¿ç”¨æ­¤ç±»å‹å¯åŠ¨ï¼Œé™¤éè¯¥æœåŠ¡æ˜¯socketæ¿€æ´»å‹ã€‚</li>
<li>Type=forkingï¼šsystemdè®¤ä¸ºå½“è¯¥æœåŠ¡è¿›ç¨‹forkï¼Œä¸”çˆ¶è¿›ç¨‹é€€å‡ºåæœåŠ¡å¯åŠ¨æˆåŠŸã€‚å¯¹äºå¸¸è§„çš„å®ˆæŠ¤è¿›ç¨‹ï¼ˆdaemonï¼‰ï¼Œé™¤éä½ ç¡®å®šæ­¤å¯åŠ¨æ–¹å¼æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œä½¿ç”¨æ­¤ç±»å‹å¯åŠ¨å³å¯ã€‚ä½¿ç”¨æ­¤å¯åŠ¨ç±»å‹åº”åŒæ—¶æŒ‡å®š PIDFile=ï¼Œä»¥ä¾¿systemdèƒ½å¤Ÿè·Ÿè¸ªæœåŠ¡çš„ä¸»è¿›ç¨‹ã€‚</li>
<li>Type=oneshotï¼šè¿™ä¸€é€‰é¡¹é€‚ç”¨äºåªæ‰§è¡Œä¸€é¡¹ä»»åŠ¡ã€éšåç«‹å³é€€å‡ºçš„æœåŠ¡ã€‚å¯èƒ½éœ€è¦åŒæ—¶è®¾ç½® RemainAfterExit=yes ä½¿å¾— systemd åœ¨æœåŠ¡è¿›ç¨‹é€€å‡ºä¹‹åä»ç„¶è®¤ä¸ºæœåŠ¡å¤„äºæ¿€æ´»çŠ¶æ€ã€‚</li>
<li>Type=notifyï¼šä¸ Type=simple ç›¸åŒï¼Œä½†çº¦å®šæœåŠ¡ä¼šåœ¨å°±ç»ªåå‘ systemd å‘é€ä¸€ä¸ªä¿¡å·ã€‚è¿™ä¸€é€šçŸ¥çš„å®ç°ç”± libsystemd-daemon.so æä¾›ã€‚</li>
<li>Type=dbusï¼šè‹¥ä»¥æ­¤æ–¹å¼å¯åŠ¨ï¼Œå½“æŒ‡å®šçš„ BusName å‡ºç°åœ¨DBusç³»ç»Ÿæ€»çº¿ä¸Šæ—¶ï¼Œsystemdè®¤ä¸ºæœåŠ¡å°±ç»ªã€‚</li>
</ul>
<p>ç¼–å†™php-fpmçš„å¯åŠ¨è„šæœ¬</p>
<ol>
<li>åˆ›å»ºphp-fpm.service è„šæœ¬æ–‡ä»¶<br><code>vim /usr/lib/systemd/system/nginx.service</code></li>
<li>ç¼–å†™è„šæœ¬å†…å®¹<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=php</span><br><span class="line">After=network.target remote-fs.target nss-lookup.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">ExecStart=/usr/local/php/sbin/php-fpm</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<h3 id="PPTPå®‰è£…è„šæœ¬"><a href="#PPTPå®‰è£…è„šæœ¬" class="headerlink" title="PPTPå®‰è£…è„šæœ¬"></a>PPTPå®‰è£…è„šæœ¬</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin</span><br><span class="line"><span class="comment"># Check if user is root</span></span><br><span class="line">[ $(<span class="built_in">id</span> -u) != <span class="string">"0"</span> ] &amp;&amp; { <span class="built_in">echo</span> -e <span class="string">"\033[31mError: You must be root to run this script\033[0m"</span>; <span class="built_in">exit</span> 1; } </span><br><span class="line">clear</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ–‡ä»¶ä¸å­˜åœ¨åˆ™æ‰§è¡Œå®‰è£…</span></span><br><span class="line">[ ! -e <span class="string">'/usr/bin/curl'</span> ] &amp;&amp; yum -y install curl</span><br><span class="line"></span><br><span class="line"><span class="comment">#è·å–å…¬ç½‘IP</span></span><br><span class="line">VPN_IP=`curl ipv4.icanhazip.com`</span><br><span class="line"><span class="comment">#ç½‘å…³</span></span><br><span class="line">VPN_LOCAL=<span class="string">"192.168.0.150"</span></span><br><span class="line"><span class="comment">#åœ°å€æ± </span></span><br><span class="line">VPN_REMOTE=<span class="string">"192.168.0.151-200"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#è¾“å…¥å†…å®¹ä¸ä¸ºç©ºåˆ™è·³å‡ºå¾ªç¯</span></span><br><span class="line"><span class="keyword">while</span> :; <span class="keyword">do</span> <span class="built_in">echo</span></span><br><span class="line">    <span class="built_in">read</span> -p <span class="string">"Please input UserName: "</span> VPN_USER </span><br><span class="line">    [ -n <span class="string">"<span class="variable">$VPN_USER</span>"</span> ] &amp;&amp; <span class="built_in">break</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#è¾“å…¥å†…å®¹ä¸ä¸ºç©ºåˆ™è·³å‡ºå¾ªç¯</span></span><br><span class="line"><span class="keyword">while</span> :; <span class="keyword">do</span> <span class="built_in">echo</span></span><br><span class="line">    <span class="built_in">read</span> -p <span class="string">"Please input PassWord: "</span> VPN_PASS</span><br><span class="line">    [ -n <span class="string">"<span class="variable">$VPN_PASS</span>"</span> ] &amp;&amp; <span class="built_in">break</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">clear</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ¤æ–­æ˜¯æ–‡ä»¶æ˜¯å¦å­˜åœ¨&amp;&amp;è¿‡æ»¤å‡ºçš„å­—ç¬¦ä¸²é•¿åº¦æ˜¯å¦ä¸º0ã€‚å¦‚æœä¸ä¸º0å°±æ˜¯C7ç³»ç»Ÿ</span></span><br><span class="line"><span class="comment">#if [ -f /etc/redhat-release -a -n "`grep ' 7\.' /etc/redhat-release`" ];then</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ¤æ–­æ˜¯æ–‡ä»¶æ˜¯å¦å­˜åœ¨&amp;&amp;è¿‡æ»¤å‡ºçš„å­—ç¬¦ä¸²é•¿åº¦æ˜¯å¦ä¸º0ã€‚å¦‚æœä¸ä¸º0å°±æ˜¯C6ç³»ç»Ÿ</span></span><br><span class="line">[ -f /etc/redhat-release -a -n <span class="string">"`grep ' 6\.' /etc/redhat-release`"</span> ];<span class="keyword">then</span></span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="title">C7</span></span>(){  </span><br><span class="line">    <span class="comment">#CentOS_REL=7 å®‰è£…epelæº</span></span><br><span class="line">    <span class="keyword">if</span> [ ! -e /etc/yum.repos.d/epel.repo ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">cat</span> &gt; /etc/yum.repos.d/epel.repo &lt;&lt; <span class="string">'EOF'</span></span><br><span class="line">[epel]</span><br><span class="line">name=Extra Packages <span class="keyword">for</span> Enterprise Linux 7 - <span class="variable">$basearch</span></span><br><span class="line"><span class="comment">#baseurl=http://download.fedoraproject.org/pub/epel/7/$basearch</span></span><br><span class="line">mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-7&amp;<span class="built_in">arch</span>=<span class="variable">$basearch</span></span><br><span class="line">failovermethod=priority</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">EOF</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="comment">#å®‰è£…ä¾èµ–åŒ…ï¼Œå’Œiptables</span></span><br><span class="line">    <span class="keyword">for</span> Package <span class="keyword">in</span> wget make openssl gcc-c++ ppp pptpd iptables iptables-services </span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">        yum -y install <span class="variable">$Package</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">	[ $? -ne 0 ] &amp;&amp; <span class="built_in">exit</span> 1</span><br><span class="line">    <span class="comment">#å¼€å¯é˜²ç«å¢™è½¬å‘åŠŸèƒ½</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">'net.ipv4.ip_forward = 1'</span> &gt;&gt; /etc/sysctl.conf</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">C6</span></span>(){</span><br><span class="line">    <span class="comment">#CentOS_REL=6</span></span><br><span class="line">    <span class="keyword">for</span> Package <span class="keyword">in</span> wget make openssl gcc-c++ iptables ppp </span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">        yum -y install <span class="variable">$Package</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">    </span><br><span class="line">    [ $? -eq 0 ] &amp;&amp; {</span><br><span class="line">    sed -i <span class="string">'s@net.ipv4.ip_forward.*@net.ipv4.ip_forward = 1@g'</span> /etc/sysctl.conf</span><br><span class="line">    rpm -Uvh http://poptop.sourceforge.net/yum/stable/rhel6/pptp-release-current.noarch.rpm</span><br><span class="line">    yum -y install pptpd</span><br><span class="line">    }  </span><br><span class="line">    <span class="built_in">return</span> $?</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">es</span></span>(){</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">"\033[31mDoes not support this OS, Please contact the author! \033[0m"</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">conf</span></span>(){</span><br><span class="line"><span class="keyword">if</span> [ $? -eq 0 ]</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"1"</span> &gt; /proc/sys/net/ipv4/ip_forward</span><br><span class="line">    sysctl -p /etc/sysctl.conf</span><br><span class="line">    <span class="comment">#pptpd.confé…ç½®</span></span><br><span class="line">    <span class="comment"># Local IP address of your VPN server</span></span><br><span class="line">    [ -z <span class="string">"`grep '^localip' /etc/pptpd.conf`"</span> ] &amp;&amp; <span class="built_in">echo</span> <span class="string">"localip <span class="variable">$VPN_LOCAL</span>"</span> &gt;&gt; /etc/pptpd.conf </span><br><span class="line">    </span><br><span class="line">    <span class="comment">#Scope for your home network</span></span><br><span class="line">    [ -z <span class="string">"`grep '^remoteip' /etc/pptpd.conf`"</span> ] &amp;&amp; <span class="built_in">echo</span> <span class="string">"remoteip <span class="variable">$VPN_REMOTE</span>"</span> &gt;&gt; /etc/pptpd.conf </span><br><span class="line">    </span><br><span class="line">    [ -z <span class="string">"`grep '^stimeout' /etc/pptpd.conf`"</span> ] &amp;&amp; <span class="built_in">echo</span> <span class="string">"stimeout 172800"</span> &gt;&gt; /etc/pptpd.conf</span><br><span class="line">    </span><br><span class="line">    <span class="comment">#dnsé…ç½®</span></span><br><span class="line">    <span class="keyword">if</span> [ -z <span class="string">"`grep '^ms-dns' /etc/ppp/options.pptpd`"</span> ];<span class="keyword">then</span></span><br><span class="line">         <span class="built_in">cat</span> &gt;&gt; /etc/ppp/options.pptpd &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">ms-dns 223.5.5.5 # Aliyun DNS Primary</span></span><br><span class="line"><span class="string">ms-dns 114.114.114.114 # 114 DNS Primary</span></span><br><span class="line"><span class="string">ms-dns 8.8.8.8 # Google DNS Primary</span></span><br><span class="line"><span class="string">ms-dns 209.244.0.3 # Level3 Primary</span></span><br><span class="line"><span class="string">ms-dns 208.67.222.222 # OpenDNS Primary</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">    <span class="comment">#è´¦å·å¯†ç é…ç½®</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$VPN_USER</span> pptpd <span class="variable">$VPN_PASS</span> *"</span> &gt;&gt; /etc/ppp/chap-secrets</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">FiWa</span></span>(){</span><br><span class="line">ETH=`route | grep default | awk <span class="string">'{print $NF}'</span>`</span><br><span class="line">iptables -F</span><br><span class="line">iptables -X</span><br><span class="line">iptables -Z</span><br><span class="line"><span class="comment">#å…è®¸22ç«¯å£</span></span><br><span class="line">iptables -A INPUT -p tcp -m tcp --dport 22 -j ACCEPT</span><br><span class="line"><span class="comment">#å…è®¸æœ¬åœ°ç¯å›å£</span></span><br><span class="line">iptables -A INPUT -i lo -j ACCEPT</span><br><span class="line"></span><br><span class="line"><span class="comment">#å…è®¸pptpç«¯å£ï¼Œé’ˆå¯¹å·²ç»æˆ–å³å°†å¯åŠ¨çš„æ–°é“¾æ¥</span></span><br><span class="line">[ -z <span class="string">"`grep '1723 -j ACCEPT' /etc/sysconfig/iptables`"</span> ] &amp;&amp; iptables -I INPUT 1 -p tcp -m state --state NEW -m tcp --dport 1723 -j ACCEPT</span><br><span class="line"></span><br><span class="line"><span class="comment">#å…è®¸47ç«¯å£</span></span><br><span class="line">[ -z <span class="string">"`grep 'gre -j ACCEPT' /etc/sysconfig/iptables`"</span> ] &amp;&amp; iptables -I INPUT 2 -p gre -j ACCEPT</span><br><span class="line"></span><br><span class="line"><span class="comment">#åªæ”¾è¡Œå…³ç³»è¿æ¥å’Œå›åº”æŠ¥æ–‡ï¼Œé˜²æ­¢æ”»å‡»</span></span><br><span class="line">iptables -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT</span><br><span class="line">iptables -t nat -A POSTROUTING -o <span class="variable">$ETH</span> -j MASQUERADE</span><br><span class="line">iptables -I FORWARD -p tcp --syn -i ppp+ -j TCPMSS --set-mss 1356</span><br><span class="line">service iptables save</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sed -i <span class="string">'s@^-A INPUT -j REJECT --reject-with icmp-host-prohibited@#-A INPUT -j REJECT --reject-with icmp-host-prohibited@'</span> /etc/sysconfig/iptables </span><br><span class="line">sed -i <span class="string">'s@^-A FORWARD -j REJECT --reject-with icmp-host-prohibited@#-A FORWARD -j REJECT --reject-with icmp-host-prohibited@'</span> /etc/sysconfig/iptables </span><br><span class="line">service iptables restart</span><br><span class="line">chkconfig iptables on</span><br><span class="line">}</span><br><span class="line">service pptpd restart</span><br><span class="line">chkconfig pptpd on</span><br><span class="line">clear</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"You can now connect to your VPN via your external IP \033[32m<span class="variable">${VPN_IP}</span>\033[0m"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"Username: \033[32m<span class="variable">${VPN_USER}</span>\033[0m"</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"Password: \033[32m<span class="variable">${VPN_PASS}</span>\033[0m"</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="while"><a href="#while" class="headerlink" title="while"></a>while</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> &lt;æ¡ä»¶è¡¨è¾¾å¼&gt;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">   å‘½ä»¤é›†</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> &lt;æ¡ä»¶è¡¨è¾¾å¼&gt;;<span class="keyword">do</span></span><br><span class="line">    å‘½ä»¤é›†</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>è®¡ç®—å™¨æ— é™å¾ªç¯</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#/bin/bash</span></span><br><span class="line"><span class="comment">#1.åˆ¤æ–­æ˜¯å¦ä¸ºä¸¤ä¸ªå‚æ•°</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span>;<span class="keyword">do</span></span><br><span class="line"><span class="comment">#å¦‚æœç”¨æˆ·æœªè¾“å…¥ï¼Œå°±ä¸€ç›´è¿›è¡Œå¾ªç¯ã€‚å¦åˆ™è·³å‡ºå¾ªç¯ è¿›è¡Œä¸‹é¢çš„åˆ¤æ–­</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"Please enter two Numbersï¼š"</span> x y</span><br><span class="line"><span class="keyword">if</span> [ -z <span class="variable">$x</span> -o -z <span class="variable">$y</span> ]</span><br><span class="line"><span class="keyword">then</span> </span><br><span class="line">   <span class="built_in">echo</span> <span class="string">"<span class="variable">$0</span> num1 num2 âœ”"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">break</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="comment">#if [ $# -ne 2 ]</span></span><br><span class="line"><span class="comment">#    then</span></span><br><span class="line"><span class="comment">#    echo "$0 num1 num2 âœ”"</span></span><br><span class="line"><span class="comment">#    exit 1</span></span><br><span class="line"><span class="comment">#fi</span></span><br><span class="line"><span class="comment">#2.åˆ¤æ–­å‚æ•°æ˜¯å¦ä¸ºæ•°å­—</span></span><br><span class="line"><span class="built_in">expr</span> <span class="variable">$x</span> + <span class="variable">$y</span> + 100 &amp;&gt;/dev/null</span><br><span class="line"><span class="keyword">if</span> [ $? -eq 0 ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"[data ok]:<span class="variable">$x</span> <span class="variable">$y</span>"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"è¯·è¾“å…¥ä¸¤ä¸ªæ­£ç¡®çš„æ•´æ•°ï¼"</span></span><br><span class="line">    <span class="built_in">exit</span> 2</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#3.å¼€å§‹è®¡ç®—</span></span><br><span class="line">a=<span class="variable">$x</span></span><br><span class="line">b=<span class="variable">$y</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$a</span>+<span class="variable">$b</span>=$((a+b))</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$a</span>-<span class="variable">$b</span>=$((a-b))</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$a</span>^<span class="variable">$b</span>=$((a**b))</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$b</span> -eq 0 ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">"[error] é™¤æ•°ä¸º0ï¼Œå–ä½™å’Œé™¤æ³•ä¸èƒ½è®¡ç®—ã€‚Ã—"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="variable">$a</span>/<span class="variable">$b</span>=$((a/b))</span><br><span class="line">   <span class="built_in">echo</span> <span class="variable">$a</span>%<span class="variable">$b</span>=$((a%b))</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ£€æŸ¥URLæ˜¯å¦æ­£å¸¸</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#/bin/bash</span></span><br><span class="line">[ -f /etc/init.d/functions ] &amp;&amp; . /etc/init.d/functions</span><br><span class="line"><span class="function"><span class="title">usage</span></span>(){</span><br><span class="line">    <span class="keyword">if</span> [[ ! <span class="variable">$1</span> =~ http://.*$ ]]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"Usage:<span class="variable">$0</span> http://www.xxx.com"</span></span><br><span class="line">        <span class="built_in">exit</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">check_url</span></span>(){</span><br><span class="line">    wget -q -o /dev/null --spider --tries=1 -T 5 <span class="variable">$1</span></span><br><span class="line">    retval=$?</span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$retval</span> -eq 0 ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        action <span class="string">"URL is ok"</span> /bin/true</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        action <span class="string">"URL is no"</span> /bin/false</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="title">main</span></span>(){</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span>;<span class="keyword">do</span></span><br><span class="line">    usage <span class="variable">$1</span></span><br><span class="line">    check_url <span class="variable">$1</span></span><br><span class="line">    <span class="built_in">sleep</span> 2</span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">main $*</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è®¡ç®—ä»1++åˆ°100</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> 1 <span class="comment">#!/bin/bash</span></span><br><span class="line"> 2 <span class="comment">###################################################</span></span><br><span class="line"> 3 <span class="comment"># File Name: 1+100.sh  </span></span><br><span class="line"> 4 <span class="comment"># Created Time: Thu 09 Jan 2020 03:23:14 PM CST</span></span><br><span class="line"> 5 <span class="comment"># Version: V1.0 </span></span><br><span class="line"> 6 <span class="comment"># Author: Felix </span></span><br><span class="line"> 7 <span class="comment"># Organization: 360JR OPS</span></span><br><span class="line"> 8 <span class="comment">###################################################</span></span><br><span class="line"> 9 <span class="built_in">sum</span>=0    </span><br><span class="line">10 i=1                                                                                                                 </span><br><span class="line">11 <span class="keyword">while</span> [ <span class="variable">$i</span> -lt 101 ]</span><br><span class="line">12 <span class="keyword">do</span>  </span><br><span class="line">13     ((sum=<span class="variable">$sum</span>+<span class="variable">$i</span>))  &lt;==<span class="built_in">let</span>çš„è¯ä¸è¦åŠ $</span><br><span class="line">14     ((i++))</span><br><span class="line">15 <span class="keyword">done</span></span><br><span class="line">16 <span class="built_in">echo</span> <span class="variable">$sum</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>è¯»å…¥æ–‡ä»¶é‡Œçš„å¹´é¾„å¹¶è®¡ç®—</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@KFSAMBA ~]<span class="comment"># cat age.txt </span></span><br><span class="line">feichi 20</span><br><span class="line">feichi01 22</span><br><span class="line">feichi02 23</span><br><span class="line">feichi03 24</span><br><span class="line">feichi04 25</span><br><span class="line">[root@KFSAMBA ~]<span class="comment"># cat age.sh</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">###################################################</span></span><br><span class="line"><span class="comment"># File Name: age.sh</span></span><br><span class="line"><span class="comment"># Created Time: Fri 10 Jan 2020 01:02:34 PM CST</span></span><br><span class="line"><span class="comment"># Version: V1.0</span></span><br><span class="line"><span class="comment"># Author: Felix</span></span><br><span class="line"><span class="comment"># Organization: 360JR OPS</span></span><br><span class="line"><span class="comment">###################################################</span></span><br><span class="line">age=0</span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> line  &lt;==ä¸€è¡Œä¸€è¡Œè¯»å…¥</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    i=`<span class="built_in">echo</span> <span class="variable">$line</span> | awk -F<span class="string">" "</span> <span class="string">'{print $NF}'</span>`  &lt;==é€šè¿‡awkå–å¹´é¾„</span><br><span class="line">    ((age=<span class="variable">$age</span>+<span class="variable">$i</span>))  &lt;==è®¡ç®—èµ‹å€¼</span><br><span class="line"><span class="keyword">done</span>&lt;./age.txt </span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$age</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="ç”Ÿæˆéšæœºæ•°"><a href="#ç”Ÿæˆéšæœºæ•°" class="headerlink" title="ç”Ÿæˆéšæœºæ•°"></a>ç”Ÿæˆéšæœºæ•°</h3><ol>
<li><p>ä½¿ç”¨opensslç”Ÿæˆéšæœºå¯†ç <br><code>openssl rand -base64 20</code>å‡ ä¹æ‰€æœ‰Linuxå‘è¡Œç‰ˆéƒ½åŒ…å«opensslã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨å®ƒçš„éšæœºåŠŸèƒ½æ¥ç”Ÿæˆå¯ä»¥ç”¨ä½œå¯†ç çš„éšæœºå­—æ¯å­—ç¬¦ä¸²ï¼Œå…¶ä¸­åé¢çš„æ•°å­—10å’Œ20æ˜¯æŒ‡å®šå¯†ç çš„é•¿åº¦ã€‚</p>
</li>
<li><p>ä½¿ç”¨urandomç”Ÿæˆéšæœºå¯†ç <br><code>strings /dev/urandom |tr -dc A-Za-z0-9 | head -c20; echo</code></p>
</li>
</ol>
<ul>
<li>tr -dc ä¿ç•™å“ªäº›å­—ç¬¦</li>
</ul>
<ol start="3">
<li><code>$RANDOM</code>ï¼š<br>ä½œç”¨ï¼šå¯ä»¥éšæœºç”Ÿæˆ0~32767ä¹‹é—´çš„æ•´æ•°æ•°å­—</li>
</ol>
<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-276.png" alt="RANDOM"></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$RANDOM</span>|<span class="built_in">md5sum</span>|<span class="built_in">cut</span> -c 1-10|<span class="built_in">tr</span> <span class="string">"[A-Z0-9]"</span> <span class="string">"[a-z]"</span></span><br><span class="line">       éšæœºæ•°      md5è®¡ç®—   æˆªå–1-10  æ›¿æ¢æ•°å­—ä¸ºå­—ç¬¦</span><br></pre></td></tr></tbody></table></figure>

<ol start="4">
<li><p>UUIDéšæœºæ•°<br><code>cat /proc/sys/kernel/random/uuid</code></p>
</li>
<li><p>ä½¿ç”¨md5sumç”Ÿæˆéšæœºå¯†ç <br><code>date |md5sum</code><br>ä»¥ä¸Šæ˜¯ç”¨Linuxå‘½ä»¤ç”Ÿæˆéšæœºå¯†ç ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹å·¥å…·è¿›è¡Œç”Ÿæˆï¼Œå¦‚mkpasswdã€randpwã€pwgenã€spwï¼Œgpgã€xkcdpassç­‰ï¼Œæœ‰å…´è¶£çš„å¯ä»¥äº†è§£ä¸€ä¸‹ï¼</p>
</li>
<li><p>mkpasswdå‘½ä»¤<br>mkpasswdå‘½ä»¤ æ˜¯make passwordçš„ç®€å†™ã€‚å¯ä»¥éšæœºç”Ÿæˆå­—ç¬¦ä¸²ã€‚<br>å®‰è£…ï¼š<code>yum install -y expect</code><br>è¯­æ³•ï¼š<br>mkpasswd [é€‰é¡¹] [å‚æ•°]<br>é€‰é¡¹ï¼š</p>
</li>
</ol>
<ul>
<li>-lï¼šæŒ‡å®šé•¿åº¦</li>
<li>-dï¼šæ•°å­—çš„ä¸ªæ•°</li>
<li>-cï¼šå°å†™å­—æ¯ä¸ªæ•°</li>
<li>-Cï¼šå¤§å†™å­—æ¯ä¸ªæ•°</li>
<li>-sï¼šç‰¹æ®Šå­—ç¬¦ä¸ªæ•°</li>
</ul>
<p><strong>éšæœºæ–‡ä»¶ç”Ÿæˆ</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[ ! -d felix ] &amp;&amp; <span class="built_in">mkdir</span> -p felix</span><br><span class="line"><span class="built_in">cd</span> felix/</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"How many do I need to create: "</span> x</span><br><span class="line">c=`<span class="built_in">seq</span> <span class="variable">$x</span>`</span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> <span class="variable">$c</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    prefix=`<span class="built_in">date</span> +%N|<span class="built_in">md5sum</span>| <span class="built_in">echo</span> <span class="variable">$RANDOM</span>|<span class="built_in">md5sum</span>|<span class="built_in">cut</span> -c 1-6|<span class="built_in">tr</span> <span class="string">'[0-9]'</span> <span class="string">'[a-z]'</span>`</span><br><span class="line">    <span class="built_in">touch</span> <span class="variable">${prefix}</span>_felix.html</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$n</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>è„šæœ¬æ‰§è¡ŒæŠ€å·§</strong><br>åå°æ‰§è¡Œè„šæœ¬<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-274.png" alt="åå°æ‰§è¡Œè„šæœ¬"><br>æ€æ­»åå°è„šæœ¬<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-275.png" alt="æ€æ­»åå°è„šæœ¬"></p>
<p><strong>ç®€å•çš„æ–‡æœ¬å¤„ç†</strong><br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-277.png" alt="ç®€å•çš„æ–‡æœ¬å¤„ç†"></p>
<p><strong>éšæœºæ–‡ä»¶+æ‰¹é‡æ”¹å</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">æ‰¹é‡åˆ›å»ºéšæœºæ–‡ä»¶</span><br><span class="line">[ ! -d felix ] &amp;&amp; <span class="built_in">mkdir</span> -p felix</span><br><span class="line"><span class="built_in">cd</span> felix/</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"How many do I need to create: "</span> x</span><br><span class="line">c=`<span class="built_in">seq</span> <span class="variable">$x</span>`</span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> <span class="variable">$c</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    prefix=`<span class="built_in">date</span> +%N|<span class="built_in">md5sum</span>|<span class="built_in">cut</span> -c 1-6|<span class="built_in">tr</span> <span class="string">'[0-9]'</span> <span class="string">'[a-z]'</span>`</span><br><span class="line">    <span class="built_in">touch</span> <span class="variable">${prefix}</span>_felix.html</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$n</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">æ‰¹é‡ä¿®æ”¹æ–‡ä»¶</span><br><span class="line">æ–¹æ³•1ï¼š<span class="keyword">for</span>å¾ªç¯</span><br><span class="line">files=`<span class="built_in">ls</span> felix/`</span><br><span class="line"><span class="built_in">cd</span> felix</span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> <span class="variable">$files</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">   <span class="built_in">mv</span> <span class="variable">$file</span> <span class="variable">${file//felix.html/feieileks.HTML}</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">æ–¹æ³•2ï¼šrenameå‘½ä»¤</span><br><span class="line">rename from  to towards</span><br><span class="line">ä¾‹ï¼šé£é©°.html æ”¹æˆé©¬é£é£.html</span><br><span class="line">rename é£é©°.html é©¬é£é£.html *é£é©°.html</span><br><span class="line">            æºæ–‡ä»¶å ç›®æ ‡æ–‡ä»¶å  é’ˆå¯¹å“ªäº›æ–‡ä»¶è¿›è¡Œä¿®æ”¹</span><br><span class="line"></span><br><span class="line">æ–¹æ³•3ï¼šæ‹¼æ¥æ³•</span><br><span class="line">[root@KFSAMBA ~/felix]<span class="comment"># ls | awk -F '_' '{print "mv",$0,$1"_felix.html"}' | bash</span></span><br><span class="line">bcechf_felix.html  cfbbbc_felix.html  djeaad_felix.html  fchafb_felix.html  hcgagf_felix.html</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ddosé˜²å¾¡</strong></p>
<blockquote>
<p>æ€è·¯ï¼šæŸ¥ESTABLISHEDå¹¶å¯¹å…¶è¿›è¡Œæ’åºå»é‡ï¼Œçœ‹ESTABLISHEDçŠ¶æ€ä¸‹æ˜¯å¦æœ‰IPå¤§äºæŒ‡å®šæ¬¡æ•°ã€‚å¦‚æœå¤§äºæŒ‡å®šæ¬¡æ•°å°±åˆ©ç”¨é˜²ç«å¢™è¿›è¡Œå±è”½ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">###################################################</span></span><br><span class="line"><span class="comment"># File Name: ctrl_ddos.sh</span></span><br><span class="line"><span class="comment"># Created Time: Tue 14 Jan 2020 02:36:15 PM CST</span></span><br><span class="line"><span class="comment"># Version: V1.0</span></span><br><span class="line"><span class="comment"># Author: Felix</span></span><br><span class="line"><span class="comment"># Organization: 360JR OPS</span></span><br><span class="line"><span class="comment">###################################################</span></span><br><span class="line">[ -f /etc/init.d/functions ] &amp;&amp; . /etc/init.d/functions</span><br><span class="line"><span class="built_in">log</span>=/tmp/ip.log</span><br><span class="line"><span class="function"><span class="title">pan</span></span>(){</span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$1</span> -eq 0 ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        action <span class="string">"<span class="variable">$2</span>"</span> /bin/true</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        action <span class="string">"<span class="variable">$2</span>"</span> /bin/false</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">defense</span></span>(){</span><br><span class="line">netstat -na | awk -F<span class="string">'[ :]+'</span> <span class="string">'$NF~/ESTABLISHED/{print $(NF-2)}'</span>|<span class="built_in">sort</span>|<span class="built_in">uniq</span> -c|<span class="built_in">sort</span> -nr|<span class="built_in">head</span> -10 &gt; <span class="variable">$log</span> &amp;&amp; <span class="built_in">echo</span> --operation: <span class="variable">$i</span>--</span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> line</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    ip=`<span class="built_in">echo</span> <span class="variable">$line</span>|awk <span class="string">'{print $(NF)}'</span>`</span><br><span class="line">    zahl=`<span class="built_in">echo</span> <span class="variable">$line</span>|awk <span class="string">'{print $(NF-1)}'</span>`</span><br><span class="line">    fw=`iptables -nL|grep -w <span class="variable">$ip</span> |<span class="built_in">wc</span> -l`</span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$zahl</span> -gt 10 ] &amp;&amp; [ <span class="variable">$fw</span> -eq 0 ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        pan 1 <span class="string">"Source IP: <span class="variable">$ip</span>"</span></span><br><span class="line">        iptables -I INPUT -s <span class="variable">$ip</span> -j DROP</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        pan 0 <span class="string">"Source IP: <span class="variable">$ip</span>"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span>&lt;<span class="variable">$log</span></span><br><span class="line">    ((i++))</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">main</span></span>(){</span><br><span class="line">   <span class="keyword">while</span> <span class="literal">true</span></span><br><span class="line">   <span class="keyword">do</span></span><br><span class="line">       <span class="built_in">sleep</span> 5</span><br><span class="line">       defense</span><br><span class="line">   <span class="keyword">done</span></span><br><span class="line">}</span><br><span class="line"><span class="keyword">while</span> :;<span class="keyword">do</span></span><br><span class="line">    <span class="built_in">read</span> -p<span class="string">"æ˜¯å¦å¯åŠ¨DDOSä¸»åŠ¨é˜²å¾¡ [Y/n] "</span> n</span><br><span class="line">    [ -n <span class="variable">${n:=y}</span> ] &amp;&amp; <span class="built_in">break</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">gather=`<span class="built_in">echo</span> <span class="variable">$n</span>|<span class="built_in">tr</span> [A-Z] [a-z]`</span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"<span class="variable">${gather}</span>"</span> = <span class="string">"y"</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    pan 0 <span class="string">"å·²å¼€å¯"</span></span><br><span class="line">    main</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    pan 1 <span class="string">"<span class="variable">$gather</span> æœªè¯†åˆ«"</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>å•è¯é•¿åº¦åˆ¤æ–­</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åˆ¤æ–­å¥å­ä¸­çš„å•è¯æ˜¯å¦å¤§äºä¸‰ä¸ªå­—æ¯</span></span><br><span class="line"><span class="built_in">log</span>=<span class="string">"To be or not to be that is a question"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$log</span></span><br><span class="line"><span class="keyword">for</span> l <span class="keyword">in</span> <span class="variable">$log</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">${#l}</span> -le 3 ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"è¿™æ˜¯ä¸å¤§äº3ä¸ªå­—æ¯çš„å•è¯"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$l</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"è¿™æ˜¯å¤§äº3ä¸ªå­—æ¯çš„å•è¯"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$l</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>åä¸ºåä¸‰äº¤æ¢æœºé…ç½®å¤‡ä»½</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">###################################################</span></span><br><span class="line"><span class="comment"># File Name: back_swcfg.sh</span></span><br><span class="line"><span class="comment"># Created Time: Thu Jan 16 12:27:00 2020</span></span><br><span class="line"><span class="comment"># Version: V2.0</span></span><br><span class="line"><span class="comment"># Author: Felix</span></span><br><span class="line"><span class="comment"># Organization: 360JR OPS</span></span><br><span class="line"><span class="comment">###################################################</span></span><br><span class="line">[ -f /etc/init.d/functions ] &amp;&amp; . /etc/init.d/functions</span><br><span class="line">[ <span class="variable">$UID</span> -ne 0 ] &amp;&amp; <span class="built_in">echo</span> <span class="string">"Please use the root account!"</span> &amp;&amp; <span class="built_in">exit</span> 1</span><br><span class="line"><span class="function"><span class="title">pan</span></span>(){</span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$1</span> -eq 0 ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        action <span class="string">"<span class="variable">$2</span>"</span> /bin/true</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        action <span class="string">"<span class="variable">$2</span>"</span> /bin/false</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">sw=(`<span class="built_in">seq</span> 1 16` `<span class="built_in">seq</span> 31 47` 61 `<span class="built_in">seq</span> 63 76`)</span><br><span class="line"><span class="built_in">date</span>=`<span class="built_in">date</span> +%F`</span><br><span class="line">net=<span class="string">"10.93.130."</span></span><br><span class="line">logfile=<span class="string">"/cfgdata/backup_cfg.log"</span></span><br><span class="line">cfgname=<span class="string">"startup.cfg"</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /cfgdata/<span class="variable">$date</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">'SAMBA:\\\10.93.131.251\SWCFG USER:zjadmin PASS:591740 \nAutomatic backup every Friday morning at 1:30 a.m\n'</span> &gt; <span class="variable">$logfile</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"The SWCFG backup situation:"</span> &gt;&gt; <span class="variable">$logfile</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">${sw[@]}</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    sshpass -p admin=h3c scp admin@<span class="variable">${net}</span><span class="variable">${i}</span>:flash:/<span class="variable">$cfgname</span> /cfgdata/<span class="variable">$date</span>/<span class="variable">${net}</span><span class="variable">${i}</span>_<span class="variable">$cfgname</span></span><br><span class="line">    cfg_file=<span class="string">"/cfgdata/<span class="variable">$date</span>/<span class="variable">${net}</span><span class="variable">${i}</span>_<span class="variable">$cfgname</span>"</span></span><br><span class="line">    <span class="keyword">if</span> [ -f <span class="variable">$cfg_file</span> ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        pan 0 <span class="string">"<span class="variable">$cfg_file</span> BACKUP"</span> </span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"<span class="variable">$cfg_file</span>  BACKUP   [OK]"</span> &gt;&gt; <span class="variable">$logfile</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        pan 1 <span class="string">"<span class="variable">$cfg_file</span> BACKUP"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"<span class="variable">$cfg_file</span>  BACKUP   [BAD!]"</span> &gt;&gt; <span class="variable">$logfile</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">find /cfgdata/ -<span class="built_in">type</span> d -mtime +30 | xargs <span class="built_in">rm</span> -rf </span><br><span class="line">mail -s <span class="string">"<span class="subst">$(date +%S_%T)</span> ZJSW Configuration file backup report!"</span> liwenjie@360jinrong.net &lt;  <span class="variable">$logfile</span></span><br><span class="line">mail -s <span class="string">"<span class="subst">$(date +%S_%T)</span> ZJSW Configuration file backup report!"</span> yaofeichi-jk@360jinrong.net &lt;  <span class="variable">$logfile</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="å¾ªç¯çŠ¶æ€æ§åˆ¶"><a href="#å¾ªç¯çŠ¶æ€æ§åˆ¶" class="headerlink" title="å¾ªç¯çŠ¶æ€æ§åˆ¶"></a>å¾ªç¯çŠ¶æ€æ§åˆ¶</h3><p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-278.png" alt="å¾ªç¯çŠ¶æ€æ§åˆ¶"></p>
<p><strong>éšæœºMD5ç ´è§£</strong><br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-279.png" alt="éšæœºMD5ç ´è§£"><br>f4cb084dc0  &lt;==ç ´è§£è¿™ä¸ª</p>
<p>åŸç†ï¼š$RANDOMå¯ä»¥éšæœºç”Ÿæˆ0~32767</p>
<ol>
<li><p>åˆ©ç”¨seqè¿›è¡Œç”Ÿæˆseq 0 32767</p>
</li>
<li><p>åˆ©ç”¨md5è¿›è¡ŒåŠ å¯†è¿ç®—å¹¶å‰1-10ä½å’Œæºå­—ç¬¦ä¸²è¿›è¡Œæ¯”å¯¹</p>
</li>
</ol>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"è®¡ç®—ä¸­..."</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> `<span class="built_in">seq</span> 0 32767`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    pass=`<span class="built_in">echo</span> <span class="variable">$x</span>|<span class="built_in">md5sum</span>|<span class="built_in">cut</span> -c 1-10`  &lt;==æ­¤å¤„æœ‰å°é—®é¢˜</span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">"<span class="variable">$pass</span>"</span> == <span class="string">"f4cb084dc0"</span> ] </span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"Calculate the number to be <span class="variable">$x</span>!"</span></span><br><span class="line">        <span class="built_in">break</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></tbody></table></figure>
<p>æ­£è§£:</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"è®¡ç®—ä¸­..."</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> `<span class="built_in">seq</span> 0 32767`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    pass=`<span class="built_in">echo</span> <span class="variable">$x</span>|<span class="built_in">md5sum</span>`</span><br><span class="line">    <span class="keyword">if</span> [[ <span class="variable">$pass</span> =~ ^.*f4cb084dc0.*$ ]]   <span class="comment">#æ­£åˆ™åŒ¹é…</span></span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"Calculate the number to be <span class="variable">$x</span>!"</span></span><br><span class="line">        <span class="built_in">break</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ•°ç»„æ”¹ç¼–åˆ¤æ–­å•è¯é•¿åº¦</span></span><br><span class="line">array=(1 2 3 4 5)</span><br><span class="line"><span class="built_in">log</span>=(To be or not to be that is a questio)</span><br><span class="line">i=0                                       </span><br><span class="line"><span class="keyword">while</span> [ <span class="variable">$i</span> -lt <span class="variable">${#log[@]}</span> ]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">${#log[i]}</span> -le 3 ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æ­¤å•è¯ <span class="variable">${log[i]}</span>ï¼Œå°äºç­‰äº3"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æ­¤å•è¯ <span class="variable">${log[i]}</span>ï¼Œå¤§äº3"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    ((i++))</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">length=(To be or not to be that is a questio)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">${length[*]}</span>"</span></span><br><span class="line"><span class="keyword">for</span>((i=<span class="number">0</span>;i&lt;<span class="variable">${#length[*]}</span>;i++))</span><br><span class="line"><span class="keyword">do</span>   </span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">${#length[i]}</span> -ge 3 ]               </span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"<span class="variable">${length[i]}</span>"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">#æ£€æŸ¥url</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">[ -f /etc/init.d/functions ] &amp;&amp; . /etc/init.d/functions</span><br><span class="line">url_arr=(</span><br><span class="line">    https://www.baidu.com/</span><br><span class="line">    https://www.qq.com/</span><br><span class="line">    https://www.jd.com/</span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="title">pan</span></span>(){</span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$1</span> -eq 0 ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        action <span class="string">"<span class="variable">$2</span>"</span> /bin/true</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        action <span class="string">"<span class="variable">$2</span>"</span> /bin/false</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="title">check_url</span></span>(){</span><br><span class="line">    wget -q -o /dev/null --spider --tries=1 -T 5 <span class="variable">$1</span></span><br><span class="line">    retval=$?</span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$retval</span> -eq 0 ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        pan 0 <span class="string">"<span class="variable">$1</span>"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        pan 1 <span class="string">"<span class="variable">$1</span>"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="title">loop</span></span>(){</span><br><span class="line">    <span class="keyword">for</span> url <span class="keyword">in</span> <span class="variable">$@</span></span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">        check_url <span class="variable">$url</span></span><br><span class="line">        <span class="built_in">sleep</span> 2</span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="title">main</span></span>(){</span><br><span class="line">    <span class="keyword">while</span> :;<span class="keyword">do</span></span><br><span class="line">        loop <span class="variable">${url_arr[*]}</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">}</span><br><span class="line">main</span><br></pre></td></tr></tbody></table></figure>



<h1 id="å®šæ—¶ä»»åŠ¡"><a href="#å®šæ—¶ä»»åŠ¡" class="headerlink" title="å®šæ—¶ä»»åŠ¡"></a>å®šæ—¶ä»»åŠ¡</h1><p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-237.png" alt="cron"><br><strong>ç”¨æˆ·çš„å®šæ—¶ä»»åŠ¡</strong></p>
<ul>
<li><code>cron</code> å®šæ—¶ä»»åŠ¡çš„è½¯ä»¶å</li>
<li><code>crond</code> æœåŠ¡è¿›ç¨‹å</li>
<li><code>crontab</code> å‘½ä»¤æ˜¯ç”¨æ¥è®¾ç½®å®šæ—¶ä»»åŠ¡è§„åˆ™çš„é…ç½®å‘½ä»¤</li>
</ul>
<p><strong>è¯­æ³•ï¼š</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@lihuaning ~]<span class="comment"># cat /etc/crontab </span></span><br><span class="line">SHELL=/bin/bash</span><br><span class="line">PATH=/sbin:/bin:/usr/sbin:/usr/bin</span><br><span class="line">MAILTO=root</span><br><span class="line"></span><br><span class="line"><span class="comment"># For details see man 4 crontabs</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Example of job definition:</span></span><br><span class="line"><span class="comment"># ---------------- minute (0 - 59)</span></span><br><span class="line"><span class="comment"># |  .------------- hour (0 - 23)</span></span><br><span class="line"><span class="comment"># |  |  .---------- day of month (1 - 31)</span></span><br><span class="line"><span class="comment"># |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...</span></span><br><span class="line"><span class="comment"># |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span></span><br><span class="line"><span class="comment"># |  |  |  |  |</span></span><br><span class="line"><span class="comment"># *  *  *  *  * (command to be executed)</span></span><br></pre></td></tr></tbody></table></figure>
<p><strong>å…±6åˆ—ï¼š</strong></p>
<ol>
<li>åˆ†é’Ÿï¼ˆ0-59ï¼‰ </li>
<li>å°æ—¶ï¼ˆ0-23ï¼‰ </li>
<li>æ—¥ï¼ˆ1-31ï¼‰</li>
<li>æœˆï¼ˆ1-12ï¼‰</li>
<li>å‘¨ï¼ˆ0-6ï¼‰</li>
<li>è¦æ‰§è¡Œçš„å‘½ä»¤æˆ–ç¨‹åº</li>
</ol>
<p><strong>ç‰¹æ®Šå­—ç¬¦ï¼š</strong></p>
<ul>
<li>* &lt;==æ¯ï¼Œæ¯ä¸ª<ul>
<li>00 23 * * * cmd &lt;==æ¯å¤©çš„23:00æ‰§è¡Œcmd</li>
</ul>
</li>
<li>- &lt;==è¿ç»­çš„åŒºé—´<ul>
<li>00 8-23 * * * cmd &lt;==æ¯å¤©çš„8:00 9:00 â€¦23:00 æ‰§è¡Œcmd</li>
</ul>
</li>
<li>åˆ—ä¸¾ 1,2,5,8<ul>
<li>00 1,2,5,8 * * * cmd &lt;==æ¯å¤©çš„1:00,2:00,5:00,8:00æ‰§è¡Œcmd</li>
</ul>
</li>
<li>/n nä»»æ„æ•°å­— æ¯éš”nå•ä½æ—¶é—´<ul>
<li>00 */10 * * * cmd &lt;==æ¯éš”10å°æ—¶æ‰§è¡Œcmd</li>
</ul>
</li>
</ul>
<p><strong>æ–¹æ³•è®ºï¼š</strong>å¤§è±¡æ”¾å†°ç®±åˆ†ä¸‰æ­¥<br>   a.å‘½ä»¤è¡Œæ‰§è¡ŒæˆåŠŸ<br>   b.é…ç½®å®šæ—¶ä»»åŠ¡ crontab -e<br>   c.æ£€æŸ¥</p>
<p><strong>ç»ƒä¹ ï¼š</strong></p>
<ol>
<li>è®©æœåŠ¡å™¨æ¯5åˆ†é’Ÿå’Œäº’è”ç½‘æ—¶é—´åšä¸€æ¬¡åŒæ­¥</li>
<li>æ¯å¤©æ™šä¸Š0å¸¦ä½ æŠŠç«™ç‚¹ç›®å½•/var/www/htmlä¸‹çš„å†…å®¹æ‰“åŒ…å¤‡ä»½åˆ°/dataç›®å½•ä¸‹ï¼Œå¹¶ç”Ÿæˆä¸åŒçš„å¤‡ä»½åç§°</li>
</ol>
<p>è§£ç­”ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@lihuaning ~]<span class="comment"># crontab -l</span></span><br><span class="line">*/5 * * * * /usr/sbin/ntpdate ntp1.aliyun.com  &amp;&gt;/dev/null == &gt;/dev/null 2&gt;&amp;1 &lt;==é˜²æ­¢ç”Ÿæˆçš„å°æ–‡ä»¶å ç”¨inode</span><br><span class="line">00 00 */1 * * /usr/bin/tar -czf /root/www_$(<span class="built_in">date</span> +%F).tar.gz /root/felix &amp;&gt;/dev/null</span><br><span class="line"></span><br><span class="line">æŠ¥é”™æ—¥å¿—ï¼š<span class="built_in">cat</span> /var/log/cron</span><br><span class="line">Oct 15 23:08:01 lihuaning CROND[2483]: (root) CMD (/usr/bin/tar -czf /root/www_$(<span class="built_in">date</span> +)</span><br><span class="line">åŸå› ï¼šå®šæ—¶ä»»åŠ¡å¯¹äº%çš„è¦æ±‚ï¼Œéœ€è¦\è½¬ä¹‰</span><br></pre></td></tr></tbody></table></figure>
<p>æ­£ç¡®ç­”æ¡ˆï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*/1 * * * * /usr/bin/tar -czf /root/www_$(<span class="built_in">date</span> +\%F\%T).tar.gz /root/felix &amp;&gt; /dev/null</span><br></pre></td></tr></tbody></table></figure>
<p>ä¼˜ç§€ç­”æ¡ˆï¼š</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1.å‘½ä»¤è¡Œæ‰§è¡Œ</span><br><span class="line">cd /root</span><br><span class="line">/usr/bin/tar -czf /root/www_$(date +\%F\%T).tar.gz ./felix</span><br><span class="line"></span><br><span class="line">2.å°½é‡ç”¨è„šæœ¬æ–‡ä»¶å®ç°</span><br><span class="line">[root@lihuaning ~]# mkdir /server/scripts -p  &lt;==å»ºç«‹ä¸“é—¨å­˜æ”¾è„šæœ¬çš„ç›®å½•</span><br><span class="line">[root@lihuaning ~]# cd /server/scripts/ </span><br><span class="line">[root@lihuaning scripts]# vim bak.sh  &lt;==ç¼–å†™å¤‡ä»½è„šæœ¬</span><br><span class="line">cd /root</span><br><span class="line">/usr/bin/tar -czf /root/www_$(date +%F_%T).tar.gz ./felix</span><br><span class="line">[root@lihuaning scripts]# /bin/sh /server/scripts/bak.sh  &lt;==/bin/bash ä½œç”¨æ˜¯ä¸éœ€è¦é¢å¤–å†ç»™è„šæœ¬åŠ ä¸Šæ‰§è¡Œæƒé™</span><br><span class="line">ç¼–å†™å®šæ—¶ä»»åŠ¡</span><br><span class="line">*/1 * * * * /bin/sh /server/scripts/bak.sh &amp;&gt; /dev/null</span><br></pre></td></tr></tbody></table></figure>
<p><strong>ç³»ç»Ÿå®šæ—¶ä»»åŠ¡è®¡åˆ’</strong></p>
<ol>
<li>ä¸ç”¨ç®¡ç†å‘˜å¹²é¢„ï¼Œç³»ç»Ÿè‡ªåŠ¨æ‰§è¡Œã€‚</li>
<li>ä¹Ÿå¯ä»¥åˆ©ç”¨ç³»ç»Ÿä»»åŠ¡ä½ç®¡ç†å‘˜æœåŠ¡ã€‚</li>
</ol>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@lihuaning ~]<span class="comment"># ll /var/log/messages*  &lt;==ç³»ç»Ÿçš„æ—¥å¿—</span></span><br><span class="line">-rw------- 1 root root   88198 2019-10-15 20:52 /var/log/messages</span><br><span class="line">-rw------- 1 root root  785720 2019-09-22 03:41 /var/log/messages-20190922</span><br><span class="line">-rw------- 1 root root 1762523 2019-09-29 03:42 /var/log/messages-20190929</span><br><span class="line">-rw------- 1 root root  240134 2019-10-07 03:17 /var/log/messages-20191007</span><br><span class="line">-rw------- 1 root root  153081 2019-10-13 03:25 /var/log/messages-20191013</span><br><span class="line">[root@lihuaning ~]<span class="comment"># ll /var/log/secure*  &lt;==ç³»ç»Ÿå®‰å…¨æ—¥å¿—</span></span><br><span class="line">-rw------- 1 root root 2728 2019-10-15 20:52 /var/log/secure</span><br><span class="line">-rw------- 1 root root 3869 2019-09-21 17:10 /var/log/secure-20190922</span><br><span class="line">-rw------- 1 root root 2940 2019-09-29 03:05 /var/log/secure-20190929</span><br><span class="line">-rw------- 1 root root 2580 2019-10-07 00:01 /var/log/secure-20191007</span><br><span class="line">-rw------- 1 root root 4750 2019-10-12 18:05 /var/log/secure-20191013</span><br><span class="line"></span><br><span class="line">[root@lihuaning ~]<span class="comment"># ll /etc/cron.daily/logrotate /etc/logrotate.conf </span></span><br><span class="line">-rwx------. 1 root root 180 2013-07-31 19:46 /etc/cron.daily/logrotate</span><br><span class="line">-rw-r--r--. 1 root root 662 2013-07-31 19:46 /etc/logrotate.conf</span><br><span class="line">æŒ‰å¤©åˆ‡å‰²æ—¥å¿—ï¼Œå°±å¯ä»¥ç”¨logrottate</span><br></pre></td></tr></tbody></table></figure>

<h2 id="å¸¸è§é”™è¯¯"><a href="#å¸¸è§é”™è¯¯" class="headerlink" title="å¸¸è§é”™è¯¯"></a>å¸¸è§é”™è¯¯</h2><ol>
<li>No space left on device</li>
</ol>
<p><strong>åŸå› ï¼š</strong>ç£ç›˜æ»¡çš„æŠ¥é”™ï¼Œå¾€å¾€æ˜¯inodeè¢«å æ»¡äº†ã€‚(df -i)<br><strong>è¯±å› ï¼š</strong>å› ä¸ºå®šæ—¶ä»»åŠ¡ç»“å°¾æ²¡æ·»åŠ ï¼š&amp;&gt; /dev/nullï¼Œå¯¼è‡´å®šæ—¶ä»»åŠ¡æ‰§è¡Œçš„æ—¶å€™æŠŠè¾“å‡ºéƒ¨åˆ†ç»™ç³»ç»Ÿ(root)å‘é‚®ä»¶ã€‚ç³»ç»Ÿé‚®ä»¶æœåŠ¡postfixé»˜è®¤ä¸å¼€ï¼Œè¿™äº›ç»™ç³»ç»Ÿå‘çš„é‚®ä»¶å°±ä¼šå †åœ¨ä¸´æ—¶ç›®å½•ï¼ˆå¤§é‡å°æ–‡ä»¶å †ç§¯ï¼‰</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C5 /var/spool/clientmqueue/</span><br><span class="line">C6 C7 /var/spool/postfix/maildrop/</span><br></pre></td></tr></tbody></table></figure>
<ol start="2">
<li>å®šæ—¶ä»»åŠ¡æ‰‹åŠ¨å¯ä»¥æ‰§è¡Œï¼Œä½†æ˜¯æ”¾å®šæ—¶ä»»åŠ¡ä¸­ä¸æ‰§è¡Œã€‚<br>exportå˜é‡ç”Ÿäº§æ¡ˆä¾‹<br>ç°è±¡ï¼šç™»é™†åæ€ä¹ˆæ“ä½œå‘½ä»¤éƒ½å¯¹ï¼Œä½†æ˜¯å‘½ä»¤å°±æ˜¯æ”¾åˆ°å®šæ—¶ä»»åŠ¡ä¸è¡Œã€‚<br>åŸå› ï¼šå®šæ—¶ä»»åŠ¡åœ¨æ‰§è¡Œè„šæœ¬çš„æ—¶å€™ï¼Œå¤šæ•°æƒ…å†µæ²¡åŠæ³•åŠ è½½ç¯å¢ƒå˜é‡ï¼Œç‰¹åˆ«æ˜¯ï¼ˆ/etc/profileï¼‰ä¸­æ‰€å®šä¹‰çš„å˜é‡ã€‚</li>
</ol>
<p><strong>æœ¬è´¨åŸå› ï¼š</strong>bashçš„ç™»é™†æ–¹å¼</p>
<ul>
<li>æ‰‹å·¥ç™»å½•ï¼ŒåŠ è½½æ‰€æœ‰ç¯å¢ƒå˜é‡(/.bash_profile,~/.bash_rc,/etc/profile,/etc/bashrc)ã€‚</li>
<li>å®šæ—¶ä»»åŠ¡æ‰§è¡Œè„šæœ¬å±äºéç™»é™†çŠ¶æ€(/etc/bashrc)ã€‚</li>
</ul>
<p>ç”±äºå¤§éƒ¨åˆ†è¿ç»´éƒ½ä¼šæŠŠå˜é‡æ”¾åˆ°æ­¤æ–‡ä»¶/etc/profileï¼ŒæŠŠè¿™ä¸ªæ–‡ä»¶é‡Œçš„å˜é‡å®šä¹‰åœ¨æ‰§è¡Œçš„è„šæœ¬ä¸­è¿›è¡Œ é‡æ–°å®šä¹‰å³å¯ã€‚è€Œåœ¨crondæ‰§è¡ŒShellæ—¶åªèƒ½è¯†åˆ«ä½æ•°ä¸å¤šçš„ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œæ™®é€šç¯å¢ƒå˜é‡ä¸€èˆ¬æ˜¯æ— æ³•è¯†åˆ«çš„ï¼Œå¦‚æœåœ¨ç¼–å†™çš„è„šæœ¬ä¸­éœ€è¦ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œæœ€å¥½ä½¿ç”¨exproté‡æ–°å£°æ˜ä¸€ä¸‹è¯¥å˜é‡ï¼Œä»¥ç¡®ä¿è„šæœ¬æ­£ç¡®æ‰§è¡Œã€‚</p>
<h2 id="ç¼–å†™ä¾‹å­"><a href="#ç¼–å†™ä¾‹å­" class="headerlink" title="ç¼–å†™ä¾‹å­"></a>ç¼–å†™ä¾‹å­</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">å‘½ä»¤å®ä¾‹1ï¼š*/1 * * * * /bin/sh /scripts/data.sh</span><br><span class="line">åœ¨æœ¬ä¾‹ä¸­é™¤äº†æ•°å­—ä¸å‘½ä»¤è„šæœ¬å¤–ï¼Œè¿˜ä½¿ç”¨åˆ°äº†ç¬¦å·<span class="string">"*"</span>ï¼Œ*å·çš„æ„æ€â€œæ¯ä¸€â€ã€‚</span><br><span class="line">ç¬¬ä¸€åˆ—çš„æ„æ€ä¸ºåˆ†é’Ÿï¼Œç‰¹æ®Šç¬¦å·â€œ/â€è¡¨ç¤ºæ¯éš”çš„æ„æ€ï¼Œå³è¡¨ç¤ºæ¯éš”ä¸€åˆ†é’Ÿæ‰§è¡Œ/bin/sh /scripts/data.shç¨‹åºã€‚</span><br><span class="line"></span><br><span class="line">å‘½ä»¤å®ä¾‹2ï¼š30 3,12 * * * /bin/sh /scripts/oldboy.sh</span><br><span class="line">åœ¨æœ¬ä¾‹ä¸­ï¼Œç¬¬ä¸€åˆ—ä¸º30ï¼Œè¡¨ç¤º30åˆ†é’Ÿï¼›ç¬¬äºŒåˆ—ä¸º 3,12ï¼Œè¿™ä»£è¡¨3ç‚¹åŠ 12ç‚¹ï¼Œæ­¤å®šæ—¶ä»»åŠ¡çš„æ„æ€æ˜¯æ¯å¤©å‡Œæ™¨3ç‚¹å’Œä¸­åˆ12ç‚¹çš„åŠç‚¹æ—¶åˆ»ï¼ˆæˆ–æè¿°ä¸ºæ¯å¤©å‡Œæ™¨3ï¼š30å’Œä¸­åˆ12ï¼š30ï¼‰æ‰§è¡Œ/scripts/oldboy.shè„šæœ¬ã€‚</span><br><span class="line"></span><br><span class="line">å‘½ä»¤å®ä¾‹3ï¼š30 */6 * * * /bin/sh /scripts/oldboy.sh</span><br><span class="line">åœ¨æœ¬ä¾‹ä¸­ï¼Œç¬¬ä¸€åˆ—ä¸º30ï¼Œè¡¨ç¤º30åˆ†é’Ÿï¼›ç¬¬äºŒåˆ—*/6ä»£è¡¨æ¯6ä¸ªå°æ—¶ï¼Œä¹Ÿç›¸å½“äº 6ã€12ã€18ã€24 çš„ä½œç”¨ã€‚æ­¤å®šæ—¶ä»»åŠ¡çš„æ„æ€æ˜¯æ¯éš”6ä¸ªå°æ—¶çš„åŠç‚¹æ—¶åˆ»æ‰§è¡Œ/scripts/oldboy.shè„šæœ¬ä»»åŠ¡ã€‚</span><br><span class="line"></span><br><span class="line">å‘½ä»¤å®ä¾‹4ï¼š30 8-18/2 * * * /bin/sh /scripts/oldboy.sh </span><br><span class="line">åœ¨æœ¬ä¾‹ä¸­ï¼Œå…¶ä¸­çš„ç¬¬ä¸€åˆ—ä¸º30ï¼Œè¡¨ç¤º30åˆ†é’Ÿï¼›ç¬¬äºŒåˆ—8-18/2ä»£è¡¨åœ¨æ—©æ™¨8ç‚¹åˆ°ä¸‹åˆ18ç‚¹ä¹‹é—´æ¯éš”2å°æ—¶ï¼Œä¹Ÿç›¸å½“äºæŠŠ8ã€10ã€12ã€14ã€16ã€18å•ç‹¬åˆ—å‡ºã€‚</span><br><span class="line">é‚£ä¹ˆï¼Œæ­¤å®šæ—¶ä»»åŠ¡çš„æ„æ€å°±æ˜¯æ—©æ™¨8ç‚¹åˆ°ä¸‹åˆ18ç‚¹ä¹‹é—´ï¼Œæ¯éš”2å°æ—¶çš„åŠç‚¹æ—¶åˆ»æ‰§è¡Œ/scripts/oldboy.shè„šæœ¬ä»»åŠ¡ã€‚</span><br><span class="line"></span><br><span class="line">å‘½ä»¤å®ä¾‹5ï¼š30 21 * * * /application/apache/bin/apachectl graceful</span><br><span class="line">æœ¬ä¾‹è¡¨ç¤ºæ¯æ™šçš„21:30é‡å¯apacheã€‚</span><br><span class="line"></span><br><span class="line">å‘½ä»¤å®ä¾‹6ï¼š45 4 1,10,22 * * /application/apache/bin/apachectl graceful</span><br><span class="line">æœ¬ä¾‹è¡¨ç¤ºæ¯æœˆ1ã€10ã€22æ—¥çš„å‡Œæ™¨4 : 45åˆ†é‡å¯apacheã€‚</span><br><span class="line"></span><br><span class="line">å‘½ä»¤å®ä¾‹7ï¼š10 1 * * 6,0 /application/apache/bin/apachectl graceful</span><br><span class="line">æœ¬ä¾‹è¡¨ç¤ºæ¯å‘¨å…­ã€å‘¨æ—¥çš„å‡Œæ™¨1 : 10åˆ†é‡å¯apacheã€‚</span><br><span class="line"></span><br><span class="line">å‘½ä»¤å®ä¾‹8ï¼š0,30 18-23 * * * /application/apache/bin/apachectl graceful</span><br><span class="line">æœ¬ä¾‹è¡¨ç¤ºåœ¨æ¯å¤©18 : 00è‡³23 : 00ä¹‹é—´æ¯éš”30åˆ†é’Ÿé‡å¯apacheã€‚</span><br><span class="line"></span><br><span class="line">å‘½ä»¤å®ä¾‹9ï¼š00 */1 * * * /application/apache/bin/apachectl graceful</span><br><span class="line">æœ¬ä¾‹è¡¨ç¤ºæ¯éš”ä¸€å°æ—¶æ•´ç‚¹é‡å¯apache</span><br><span class="line"></span><br><span class="line">å‘½ä»¤å®ä¾‹10ï¼š* 23,00-07/1 * * * /application/apache/bin/apachectl graceful</span><br><span class="line">æœ¬ä¾‹å¹¶ä¸è¡¨ç¤ºæ™šä¸Š23ç‚¹å’Œæ—©ä¸Š0-7ç‚¹ä¹‹é—´æ¯éš”ä¸€å°æ—¶é‡å¯Apacheã€‚</span><br><span class="line">è¦è¯´æ˜çš„æ˜¯ï¼Œä»¥ä¸Šç»“æœæ˜¯ä¸è§„èŒƒçš„ï¼Œä¹Ÿæ˜¯ä¸å¯¹çš„ã€‚å¤§å®¶æƒ³æƒ³ä¸ºä»€ä¹ˆï¼Ÿ</span><br><span class="line">ä»¥ä¸Šå®šæ—¶ä»»åŠ¡çš„ç¬¬ä¸€åˆ—ä¸º*ï¼Œè¡¨ç¤ºæ¯åˆ†éƒ½æ‰§è¡Œä»»åŠ¡å³æ™šä¸Š23ç‚¹å’Œæ—©ä¸Š0-7ç‚¹ä¹‹é—´æ¯éš”ä¸€å°æ—¶çš„æ¯åˆ†éƒ½é‡å¯Apacheï¼Œå¾ˆå¯æ€•å§ã€‚</span><br><span class="line"></span><br><span class="line">å‘½ä»¤å®ä¾‹11ï¼š00 11 * 4 1-3 /application/apache/bin/apachectl graceful</span><br><span class="line">æœ¬ä¾‹è¡¨ç¤º4æœˆçš„æ¯å‘¨ä¸€åˆ°å‘¨ä¸‰çš„ä¸Šåˆ11ç‚¹æ•´é‡å¯Apacheã€‚</span><br><span class="line"></span><br><span class="line">å‘½ä»¤å®ä¾‹12ï¼š30 09 * * 0 å»åšå…¼èŒ</span><br><span class="line">æœ¬ä¾‹è¡¨ç¤ºæ¯å‘¨æ—¥ä¸Šåˆ9:30å»åšå…¼èŒã€‚</span><br><span class="line"></span><br><span class="line">å‘½ä»¤å®ä¾‹13ï¼š00 10 * * * å»å›½æ”¿ä¸­å¿ƒä¸Šç­</span><br><span class="line">æœ¬ä¾‹è¡¨ç¤ºæ¯ä¸Šåˆ10:00å»å›½æ”¿ä¸­å¿ƒä¸Šç­ã€‚</span><br></pre></td></tr></tbody></table></figure>

<h1 id="ç£ç›˜å’Œå­˜å‚¨"><a href="#ç£ç›˜å’Œå­˜å‚¨" class="headerlink" title="ç£ç›˜å’Œå­˜å‚¨"></a>ç£ç›˜å’Œå­˜å‚¨</h1><h2 id="å­˜å‚¨ä»‹ç»"><a href="#å­˜å‚¨ä»‹ç»" class="headerlink" title="å­˜å‚¨ä»‹ç»"></a>å­˜å‚¨ä»‹ç»</h2><p>SCSIæ¯”å–»æˆé©´ï¼ŒSATAæ¯”å–»ä¸ºé©¬ï¼ŒSASæ¯”å–»ä¸ºéª¡å­ï¼Œéª¡å­æ—¢ä¸çˆ±å¾—ç—…ï¼ŒåŠ›æ°”åˆå¤§ã€‚å› æ­¤SASæ¯”SATAã€SCSIçš„ç»¼åˆæƒ…å†µè¦æ›´ä¼˜ç§€ã€‚</p>
<p>SASæ˜¯æ–°ä¸€ä»£çš„SCSIæŠ€æœ¯ï¼Œå’Œç°åœ¨æµè¡Œçš„Serial ATAï¼ˆSATAï¼‰ç£ç›˜ç›¸åŒï¼Œéƒ½æ˜¯é‡‡ç”¨ä¸²è¡ŒæŠ€æœ¯ä»¥è·å¾—æ›´é«˜çš„ä¼ è¾“é€Ÿåº¦<br>SASä¼˜åŠ¿ï¼š</p>
<ul>
<li>SASæŠ€æœ¯é™ä½äº†ç£ç›˜é˜µåˆ—çš„æˆæœ¬</li>
<li>ä¸²è¡Œæ¥å£è®©ä¼ è¾“æ€§èƒ½æé«˜</li>
<li>æ‰©å±•æ€§æ›´å¥½</li>
<li>å®‰è£…ç®€å•ï¼Œå¯ä»¥çƒ­æ’æ‹”</li>
<li>å…¼å®¹æ€§å¥½ï¼Œå…¼å®¹SATA</li>
</ul>
<p>å¯¹æ¯”ï¼š</p>
<ul>
<li>ä¼ä¸šç”Ÿäº§åœºæ™¯æ™®åŠç¨‹åº¦ï¼šSAS&gt;SSD&gt;SATA</li>
<li>å•ä½å®¹é‡å¯¹æ¯”æ€§èƒ½å’Œä»·æ ¼ï¼šSSD&gt;SAS&gt;SATAï¼ˆä¸€å—SSDå’Œä¸€å—SATAï¼‰</li>
<li>å•ä½ä»·æ ¼è´­ä¹°ç£ç›˜å®¹é‡ï¼šSATA&gt;SAS&gt;SSD</li>
</ul>
<p>å…‰çº¤é€šé“<br>ä½œç”¨ï¼šå…‰çº¤é€šé“ç£ç›˜æ˜¯ä¸ºäº†æé«˜ç£ç›˜å­˜å‚¨ç³»ç»Ÿçš„é€Ÿåº¦å’Œçµæ´»æ€§æ‰å¼€å‘çš„ï¼Œå®ƒçš„å‡ºç°å¤§å¤§æé«˜äº†å¤šç£ç›˜ç³»ç»Ÿçš„é€šä¿¡é€Ÿåº¦ã€‚å…‰çº¤é€šé“æ˜¯ä¸ºåœ¨åƒæœåŠ¡å™¨è¿™æ ·çš„å¤šç£ç›˜ç³»ç»Ÿç¯å¢ƒè€Œè®¾è®¡ï¼Œèƒ½æ»¡è¶³é«˜ç«¯å·¥ä½œç«™ã€æœåŠ¡å™¨ã€æµ·é‡å­˜å‚¨å­ç½‘ç»œã€å¤–è®¾é—´é€šè¿‡é›†çº¿å™¨ã€äº¤æ¢æœºå’Œç‚¹å¯¹ç‚¹è¿æ¥è¿›è¡ŒåŒå‘ã€ä¸²è¡Œæ•°æ®é€šè®¯ç­‰ç³»ç»Ÿå¯¹é«˜æ•°æ®ä¼ è¾“ç‡çš„è¦æ±‚ã€‚<br>ç‰¹æ€§ï¼šçƒ­æ‹”æ’æ€§ã€é«˜é€Ÿå¸¦å®½ã€è¿œç¨‹è¿æ¥ã€è¿æ¥è®¾å¤‡æ•°é‡å¤§ç­‰ã€‚</p>
<p>SSDç¡¬ç›˜ï¼š<br>å›ºæ€ç£ç›˜ï¼ˆSolid State Driveã€IDE FLASH DISKï¼‰æ˜¯ç”±æ§åˆ¶å•å…ƒå’Œå­˜å‚¨å•å…ƒï¼ˆFLASHèŠ¯ç‰‡ï¼‰ç»„æˆçš„ã€‚ç®€å•è¯´ï¼šå°±æ˜¯ç”¨å›ºæ€ç”µå­å­˜å‚¨èŠ¯ç‰‡é˜µåˆ—è€Œåˆ¶æˆçš„ç£ç›˜ã€‚</p>
<p>åˆ†ç±»ï¼š</p>
<ol>
<li>åŸºäºé—ªå­˜ï¼ˆFLASH èŠ¯ç‰‡ï¼‰çš„å›ºæ€ç£ç›˜ï¼Œç±»ä¼¼äºUç›˜</li>
<li>åŸºäºDROMçš„å›ºæ€ç£ç›˜</li>
</ol>
<p>æ¥å£ç±»å‹ï¼š</p>
<ul>
<li>SATAæ¥å£ï¼šSATA SATA2 SATA3.0</li>
<li>PATA(IDEæ¥å£)ï¼šIDE44PIN IDE40PIN</li>
<li>PCI-Eæ¥å£ï¼šmSATA PCIE(IDE) PCIE(SATA)ZIF:ZIFæ¥å£ç­‰</li>
</ul>
<h2 id="ç£ç›˜é€‰å‹"><a href="#ç£ç›˜é€‰å‹" class="headerlink" title="ç£ç›˜é€‰å‹"></a>ç£ç›˜é€‰å‹</h2><ol>
<li><p>ä¼ä¸šçº§SASç¡¬ç›˜ï¼ˆé»˜è®¤ï¼‰<br>å¸¸è§çš„SASç¡¬ç›˜æ˜¯15000è½¬/åˆ†ï¼Œæ²¡æœ‰ç‰¹æ®Šéœ€æ±‚é»˜è®¤ä¹°SASç¡¬ç›˜ã€‚æ»¡è¶³å®¹é‡çš„åŸºç¡€ä¸Šï¼Œå°½é‡ä¿æŒ4å—ç£ç›˜ä»¥ä¸Šã€‚</p>
</li>
<li><p>ä¼ä¸šçº§SATAç¡¬ç›˜<br>7200-10000è½¬/åˆ†ï¼Œå¸¸è§å®¹é‡ä¸º1Tã€2Tã€4Tã€6Tï¼Œä¼˜ç‚¹æ˜¯ç»æµå®æƒ ï¼Œå®¹é‡å¤§ï¼Œä»å…·ä½“éœ€æ±‚å’Œæ€§ä»·æ¯”è€ƒè™‘ã€‚åœ¨å·¥ä½œä¸­å¤šç”¨SATAç›˜åšçº¿ä¸‹å¤‡ä»½ï¼ˆå³ä¸æä¾›æœåŠ¡çš„æ•°æ®å­˜å‚¨æˆ–è€…å¹¶å‘ä¸šåŠ¡è®¿é—®ä¸æ˜¯å¾ˆå¤§çš„ä¸šåŠ¡åº”ç”¨ï¼‰ï¼Œæ¯”å¦‚ç«™ç‚¹ç¨‹åºåŠæ•°æ®åº“ã€å›¾ç‰‡çš„çº¿ä¸‹å¤‡ä»½ç­‰<br>é€‚ç”¨åœºæ™¯ï¼šæ²¡é’±ã€æ•°æ®é‡å°‘ã€æ•°æ®ä¸ç»™ç”¨æˆ·æä¾›æœåŠ¡ã€ç”¨äºå¤‡ä»½</p>
</li>
</ol>
<p>å°ç»“ï¼š</p>
<ul>
<li>çº¿ä¸Šä¸šåŠ¡ï¼Œç”¨SASç£ç›˜</li>
<li>çº¿ä¸‹ä¸šåŠ¡ï¼Œç”¨SATAç£ç›˜ï¼Œç£å¸¦åº“</li>
<li>çº¿ä¸Šé«˜å¹¶å‘ï¼Œå°å®¹é‡ä¸šåŠ¡ï¼ŒSSDç£ç›˜</li>
<li>æˆæœ¬æ€æƒ³ï¼šæ ¹æ®æ•°æ®çš„è®¿é—®çƒ­åº¦ï¼Œæ™ºèƒ½åˆ†æåˆ†å±‚å­˜å‚¨ã€‚SATA+SSD</li>
</ul>
<ol start="3">
<li>SSDå›ºæ€ç›˜<br>ç‰¹ç‚¹ï¼šå®¹é‡å°ï¼Œä»·æ ¼è´µï¼Œé€Ÿåº¦å¿«ã€‚ä¸€èˆ¬ç”¨äºæ•°æ®é‡å°å¹¶ä¸”æœ‰è¶…å¤§è§„æ¨¡é«˜å¹¶å‘çš„ä¸šåŠ¡ï¼ˆè¿™ä¸æ˜¯å”¯ä¸€çš„åŠæ³•ï¼Œè¿˜å¯ä»¥é€šè¿‡ç£ç›˜åŠ å†…å­˜ç¼“å­˜çš„æŠ€æœ¯æ–¹å¼è§£å†³è¿™ä¸ªå¤§è§„æ¨¡å¹¶å‘é—®é¢˜ã€‚ï¼‰</li>
</ol>
<p>ç™¾åº¦ã€è…¾è®¯ã€360æ ¸å¿ƒä¸šåŠ¡éƒ½ä¼šé‡‡ç”¨SSDç£ç›˜ï¼Œåº”ç”¨å±‚ä¹Ÿå¿…é¡»ä¼šåœ¨é¡¹ç›®æ¶æ„å±‚é¢åšå„ç§ç¼“å­˜ã€‚<br>å¤§å…¬å¸å¦‚æ·˜å®ï¼ŒæŸäº›ä¸šåŠ¡å¯èƒ½ä¼šæ ¹æ®æ•°æ®çš„çƒ­åº¦æ¥ç»¼åˆä½¿ç”¨åˆ†å±‚å­˜å‚¨ï¼Œä»¥è¾¾åˆ°æ€§ä»·æ¯”æœ€ä½³çš„æƒ…å†µã€‚</p>
<p>æœåŠ¡å™¨é»˜è®¤çš„RAIDæ¿å¡ï¼Œä¸€èˆ¬åªæ”¯æŒï¼š0å’Œ1<br>å¦‚æœæ˜¯ç‹¬ç«‹RAIDæ¿å¡ï¼Œä¸€èˆ¬æ”¯æŒï¼š0ã€1ã€5ã€10ç­‰å¸¸è§çº§åˆ«</p>
<h2 id="RAID"><a href="#RAID" class="headerlink" title="RAID"></a>RAID</h2><p><strong>ä»€ä¹ˆæ˜¯Raid?</strong><br>Raidæ˜¯å»‰ä»·å†—ä½™ç£ç›˜é˜µåˆ—( Redundant Array of Inexpensive Disk)çš„ç®€ç§°,æœ‰æ—¶ä¹Ÿç®€ç§°ç£ç›˜é˜µåˆ—( Disk Array)Raidæ˜¯ä¸€ç§æŠŠå¤šå—ç‹¬ç«‹çš„ç‰©ç†ç£ç›˜æŒ‰ä¸åŒçš„æŠ€æœ¯æ–¹å¼ç»„åˆèµ·æ¥å½¢æˆä¸€ä¸ªç£ç›˜ç»„,åœ¨é€»è¾‘ä¸Š(åšå®ŒRAID,è£…ç³»ç»Ÿå)çœ‹èµ·æ¥å°±æ˜¯ä¸€å—å¤§çš„ç£ç›˜,å¯ä»¥æä¾›æ¯”å•ä¸ªç‰©ç†ç£ç›˜æ›´å¤§çš„å­˜å‚¨å®¹é‡æˆ–æ›´é«˜çš„å­˜å‚¨æ€§èƒ½,åŒæ—¶åˆèƒ½æä¾›ä¸åŒçº§åˆ«æ•°æ®å†—ä½™å¤‡ä»½çš„ä¸€ç§æŠ€æœ¯ã€‚</p>
<p><strong>Raidçº§åˆ«ä»‹ç»</strong><br>æŠŠå¤šä¸ªç‰©ç†ç£ç›˜é€šè¿‡ä¸åŒçš„æŠ€æœ¯æ–¹å¼ç»„æˆç£ç›˜é˜µåˆ—,è¿™ä¸ªä¸åŒçš„æŠ€æœ¯æ–¹å¼å°±è¢«ç§°ä¸º<br>RAIDçº§åˆ«</p>
<ul>
<li>Raidçº§åˆ«ä¸€èˆ¬æœ‰:Raid0ã€Raid1ã€Raid2ã€Raid3ã€Raid4ã€Raid5,Raid6ã€Raid7ã€Raid0+1ï¼ˆå³Raid10ï¼‰ã€Raid53ç­‰</li>
<li>ç”Ÿäº§ç¯å¢ƒå¸¸ç”¨Raidçº§åˆ«ï¼šRaid0ï¼ŒRaid1ï¼ŒRaid5ï¼ŒRaid10ã€‚</li>
</ul>
<p>å†—ä½™ï¼šå†—ä½™,æŒ‡é‡å¤é…ç½®ç³»ç»Ÿçš„ä¸€äº›éƒ¨ä»¶,å½“ç³»ç»Ÿå‘ç”Ÿæ•…éšœæ—¶,å†—ä½™é…ç½®çš„éƒ¨ä»¶ä»‹å…¥å¹¶æ‰¿æ‹…æ•…éšœéƒ¨ä»¶çš„å·¥ä½œ,ç”±æ­¤å‡å°‘ç³»ç»Ÿçš„æ•…éšœæ—¶é—´ Redundant,è‡ªåŠ¨å¤‡æ´,å³å½“æŸä¸€è®¾å¤‡å‘ç”ŸæŸåæ—¶å®ƒå¯ä»¥è‡ªåŠ¨ä½œä¸ºåå¤‡å¼è®¾å¤‡æ›¿ä»£è¯¥è®¾å¤‡ã€‚</p>
<p><strong>RAIDåˆ†ç±»ï¼š</strong></p>
<ol>
<li><p>è½¯RAIDæŠ€æœ¯ï¼ˆé€€å‡ºå†å²èˆå°ï¼‰<br>åœ¨Linuâ…¸ä¸‹åœ¨å®‰è£…ç³»ç»Ÿè¿‡ç¨‹ä¸­æˆ–è€…å®‰è£…ç³»ç»Ÿåé€šè¿‡è‡ªå¸¦çš„è½¯ä»¶å°±èƒ½å®ç°è½¯RAIDåŠŸèƒ½ä½¿ç”¨è½¯RAIDå¯çœå»è´­ä¹°æ˜‚è´µçš„ç¡¬ä»¶RAIDæ§åˆ¶å™¨å’Œé™„ä»¶å°±èƒ½æå¤§åœ°å¢å¼ºç£ç›˜çš„IOæ€§èƒ½å’Œå¯é æ€§ã€‚ç”±äºæ˜¯ç”¨è½¯ä»¶å»å®ç°çš„RAIDåŠŸèƒ½,æ‰€ä»¥å®ƒé…ç½®çµæ´»ã€ç®¡ç†æ–¹ä¾¿ã€‚åŒæ—¶ä½¿ç”¨è½¯ä»¶RAID,è¿˜å¯ä»¥å®ç°å°†å‡ ä¸ªç‰©ç†ç£ç›˜åˆå¹¶æˆä¸€ä¸ªæ›´å¤§çš„è™šæ‹Ÿè®¾å¤‡,ä»è€Œè¾¾åˆ°æ€§èƒ½æ”¹è¿›å’Œæ•°æ®å†—ä½™çš„ç›®çš„ã€‚</p>
</li>
<li><p>ç¡¬RAIDæŠ€æœ¯<br>åŸºäºç¡¬ä»¶çš„RAIDè§£å†³æ–¹æ¡ˆæ¯”åŸºäºè½¯ä»¶RAIDæŠ€æœ¯åœ¨ä½¿ç”¨æ€§èƒ½å’ŒæœåŠ¡æ€§èƒ½ä¸Šä¼šæ›´èƒœç­¹,å…·ä½“è¡¨ç°åœ¨æ£€æµ‹å’Œä¿®å¤å¤šä½é”™è¯¯çš„èƒ½åŠ›ã€é”™è¯¯ç£ç›˜è‡ªåŠ¨æ£€æµ‹å’Œé˜µåˆ—é‡å»ºç­‰æ–¹é¢ã€‚ä»å®‰å…¨æ€§ä¸Šè€ƒè™‘,åŸºäºç¡¬ä»¶çš„RAIDè§£å†³æ–¹æ¡ˆä¹Ÿæ˜¯æ›´å®‰å…¨çš„,å› æ­¤,åœ¨å®é™…çš„ç”Ÿäº§åœºæ™¯å·¥ä½œä¸­,åŸºäºç¡¬ä»¶çš„RADè§£å†³æ–¹æ¡ˆåº”è¯¥æ˜¯æˆ‘ä»¬çš„é¦–é€‰ã€‚äº’è”ç½‘å…¬å¸å¸¸ç”¨çš„ç”Ÿäº§DELLæœåŠ¡å™¨,é»˜è®¤çš„å°±ä¼šæ”¯æŒRAID0,1,å¦‚æœRAID5,10å°±éœ€è¦ä¹°RAIDå¡ã€‚</p>
</li>
<li><p>LVMå…¨ç§°ï¼ˆLogic Volume Managementï¼ˆManagerï¼‰ï¼‰é€»è¾‘å·ç®¡ç†ï¼Œå®ƒçš„æœ€å¤§ç”¨é€”æ˜¯å¯ä»¥ã€çµæ´»çš„ç®¡ç†ç£ç›˜çš„å®¹é‡ã€‘ï¼Œè®©ç£ç›˜åˆ†åŒºå¯ä»¥éšæ„æ”¾å¤§æˆ–ç¼©å°ï¼Œä¾¿äºæ›´å¥½çš„åº”ç”¨ç£ç›˜çš„å‰©ä½™ç©ºé—´ï¼Œå¦‚æœè¿‡äºå¼ºè°ƒæ€§èƒ½ä¸å¤‡ä»½ï¼Œé‚£ä¹ˆè¿˜æ˜¯åº”è¯¥ä½¿ç”¨RAIDåŠŸèƒ½ï¼Œè€Œä¸æ˜¯LVMã€‚</p>
</li>
</ol>
<p>LVMæ˜¯è½¯ä»¶å®ç°çš„ï¼Œæ€§èƒ½ä¸€èˆ¬é™ä½5%-10%ã€‚ä¹°æœåŠ¡å™¨æ’æ»¡ç£ç›˜åšå¥½RAIDï¼Œåˆ†åŒºè§„åˆ’å¥½ï¼Œæ°¸è¿œéƒ½ä¸éœ€è¦LVMã€‚<br><strong>RAIDå’ŒLVMåŒºåˆ«ï¼š</strong></p>
<ul>
<li>LVMï¼šçµæ´»çš„ç®¡è·¯ç£ç›˜å®¹é‡ï¼Œæœ‰ä¸€å®šçš„å†—ä½™å’Œæ€§èƒ½ï¼Œå¾ˆå¼±ã€‚</li>
<li>RAIDï¼šæ›´ä¾§é‡æ€§èƒ½å’Œæ•°æ®å®‰å…¨ã€‚</li>
</ul>
<p>ç£ç›˜é˜µåˆ—å¯ä»¥æŠŠå¤šä¸ªç£ç›˜é©±åŠ¨å™¨é€šè¿‡ä¸åŒçš„è¿æ¥æ–¹å¼è¿æ¥åœ¨ä¸€èµ·ååŒå·¥ä½œï¼Œå¤§å¤§æé«˜è¯»å–é€Ÿåº¦ï¼ŒåŒæ—¶æŠŠç£ç›˜ç³»ç»Ÿçš„å¯é æ€§æé«˜åˆ°æ¥è¿‘æ— é”™çš„å¢ƒç•Œï¼Œä½¿å…¶å¯é æ€§æé«˜ã€‚<br>ç”¨RAIDæœ€ç›´æ¥çš„å¥½å¤„æ˜¯ï¼š</p>
<ul>
<li>æå‡æ•°æ®å®‰å…¨æ€§ã€‚</li>
<li>æå‡æ•°æ®è¯»å†™æ€§èƒ½ã€‚</li>
<li>æä¾›æ›´å¤§çš„å•ä¸€é€»è¾‘ç£ç›˜æ•°æ®å®¹é‡å­˜å‚¨ã€‚</li>
</ul>
<p>DELLR740ä½¿ç”¨6å—ç›˜å®è·µRAIDåˆ¶ä½œç»“è®º</p>
<ul>
<li>Raid0æ”¯æŒ1å—ç›˜åˆ°å¤šå—ç›˜ï¼Œå®¹é‡æ˜¯æ‰€æœ‰ç›˜ä¹‹å’Œã€‚(å¯é æ€§æœ€ä½ï¼Œåä¸€å—å…¨éƒ¨å)</li>
<li>Raid1åªæ”¯æŒ2å—ç›˜ï¼Œå®¹é‡æŸå¤±ä¸€å—ç›˜ã€‚ï¼ˆé•œåƒï¼‰</li>
<li>Raid5æœ€å°‘ä¸‰å—ç›˜ï¼Œä¸ç®¡ç¡¬ç›˜æ•°é‡å¤šå°‘ï¼ŒåªæŸå¤±ä¸€å—ç›˜å®¹é‡ã€‚ï¼ˆå¥‡å¶æ ¡éªŒï¼‰</li>
<li>Raid6æœ€å°‘4å—ç›˜ï¼Œ5å—ç›˜ä¹Ÿå¯ä»¥ï¼ŒæŸå¤±2å—ç›˜ï¼Œä¸ç®¡ç¡¬ç›˜å¤šå°‘ï¼ŒåªæŸå¤±ä¸¤å—ç›˜å®¹é‡ã€‚</li>
<li>Raid10æœ€å°‘4å—ç›˜ï¼Œå¿…é¡»å¶æ•°ç¡¬ç›˜ï¼Œä¸ç®¡ç¡¬ç›˜å¤šå°‘ï¼Œéƒ½æŸå¤±ä¸€åŠå®¹é‡ï¼Œä¸æ”¯æŒè™šæ‹Ÿç£ç›˜ã€‚ï¼ˆé•œåƒè¿‡ååšæ¡å¸¦ï¼‰</li>
</ul>
<h3 id="RAID0"><a href="#RAID0" class="headerlink" title="RAID0"></a>RAID0</h3><p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-238.png" alt="RAID0"><br>ç”Ÿäº§åº”ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>è´Ÿè½½å‡è¡¡é›†ç¾¤ä¸‹é¢çš„å¤šä¸ªç›¸åŒRSèŠ‚ç‚¹æœåŠ¡å™¨ã€‚</li>
<li>åˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨ä¸‹é¢çš„ä¸»èŠ‚ç‚¹æˆ–CHUNK SERVERã€‚</li>
<li>MySQLä¸»ä»å¤åˆ¶çš„å¤šä¸ªSlaveæœåŠ¡å™¨ã€‚</li>
<li>å¯¹æ€§èƒ½è¦æ±‚å¾ˆé«˜ï¼Œå¯¹å†—ä½™è¦æ±‚å¾ˆä½çš„ç›¸å…³ä¸šåŠ¡ã€‚<br>ä»¥4å—åšRAID0ä¸ºä¾‹ï¼š<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-239.png" alt="RAID0"></li>
</ul>
<h3 id="RAID1"><a href="#RAID1" class="headerlink" title="RAID1"></a>RAID1</h3><p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-240.png" alt="RAID1"></p>
<ol>
<li>RAID1åˆç§°ä¸ºMirroræˆ–Mirroringï¼ˆé•œåƒï¼‰ï¼Œå®ƒçš„å®—æ—¨æ˜¯æœ€å¤§é™åº¦çš„ä¿è¯ç”¨æˆ·æ•°æ®çš„å¯ç”¨æ€§å’Œå¯ä¿®å¤æ€§ã€‚RAID1çš„æ“ä½œæ–¹å¼æ˜¯æŠŠç”¨æˆ·å†™å…¥ä¸€ä¸ªç£ç›˜çš„æ•°æ®ç™¾åˆ†ä¹‹ç™¾åœ°è‡ªåŠ¨å¤åˆ¶åˆ°å¦å¤–ä¸€ä¸ªç£ç›˜ä¸Šï¼Œä»è€Œå®ç°å­˜å‚¨åŒä»½çš„æ•°æ®ã€‚</li>
<li>è¦åˆ¶ä½œRAID1ï¼Œè¦æ±‚è‡³å°‘æ˜¯ä¸¤å—ç£ç›˜ï¼ˆä»…æ”¯æŒ2å—ç›˜ï¼Ÿï¼‰ï¼Œæ•´ä¸ªRAIDå¤§å°ç­‰äºä¸¤ä¸ªç£ç›˜ä¸­æœ€å°çš„é‚£å—ç£ç›˜çš„å®¹é‡ï¼ˆå½“ç„¶ï¼Œæœ€å¥½ä½¿ç”¨åŒæ ·å¤§å°çš„ç£ç›˜ï¼‰ï¼Œæ•°æ®æœ‰50%çš„å†—ä½™ï¼Œåœ¨å­˜å‚¨æ—¶åŒæ—¶å†™å…¥ä¸¤å—ç£ç›˜ï¼Œå®ç°äº†æ•°æ®å®Œæ•´å¤‡ä»½ï¼›ä½†ç›¸å¯¹é™ä½äº†å†™å…¥æ€§èƒ½ï¼Œä½†æ˜¯è¯»å–æ•°æ®æ—¶å¯ä»¥å¹¶å‘ï¼Œç›¸å½“äºä¸¤å—Raid0çš„è¯»å–æ•ˆç‡ï¼ˆæœ‰å¾…å®è·µéªŒè¯ï¼‰ã€‚</li>
</ol>
<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-241.png" alt="RAID1"></p>
<h3 id="RAID5"><a href="#RAID5" class="headerlink" title="RAID5"></a>RAID5</h3><p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-242.png" alt="RAID5"></p>
<ol>
<li>RAID5æ˜¯ä¸€ç§å­˜å‚¨æ€§èƒ½ã€æ•°æ®å®‰å…¨å’Œå­˜å‚¨æˆæœ¬å…¼é¡¾ï¼ˆä¸­åº¸ï¼‰çš„å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚</li>
<li>RAID5éœ€è¦ä¸‰å—æˆ–ä»¥ä¸Šçš„ç‰©ç†ç£ç›˜ï¼Œå¯ä»¥æä¾›çƒ­å¤‡ç›˜å®ç°æ•…éšœçš„æ¢å¤ï¼›é‡‡ç”¨å¥‡å¶æ ¡éªŒï¼Œå¯é æ€§å¼ºï¼Œä¸”åªæœ‰åŒæ—¶æŸåä¸¤å—ç¡¬ç›˜æ—¶æ•°æ®æ‰ä¼šå®Œå…¨æŸåï¼ŒåªæŸåä¸€å—ç¡¬ç›˜æ—¶ï¼Œç³»ç»Ÿä¼šæ ¹æ®å­˜å‚¨çš„å¥‡å¶æ ¡éªŒä½é‡å»ºæ•°æ®ï¼Œä¸´æ—¶æä¾›æœåŠ¡ï¼›æ­¤æ—¶å¦‚æœæœ‰çƒ­å¤‡ç›˜ï¼Œç³»ç»Ÿè¿˜ä¼šè‡ªåŠ¨åœ¨çƒ­å¤‡ç›˜ä¸Šé‡å»ºæ•…éšœç£ç›˜ä¸Šçš„æ•°æ®ï¼›</li>
</ol>
<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-243.png" alt="RAID5"><br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-244.png" alt="RAID5"></p>
<h3 id="RAID10"><a href="#RAID10" class="headerlink" title="RAID10"></a>RAID10</h3><p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-245.png" alt="RAID10"><br>RAID10æ˜¯å…ˆå°†å››å—ç¡¬ç›˜åœ¨çºµå‘ä¸Šåˆ†åˆ«ä¸¤ä¸¤åšé•œåƒï¼Œé•œåƒåå†åœ¨æ¨ªå‘ä¸Šåšæ¡å¸¦ã€‚<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-246.png" alt="RAID10"><br>RAID10æç«¯æƒ…å†µä¸‹ï¼Œæ”¯æŒä¸€è¾¹å1å—ã€‚</p>
<h3 id="RAID01"><a href="#RAID01" class="headerlink" title="RAID01"></a>RAID01</h3><p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-247.png" alt="RAID01"><br>RAID01æ˜¯å…ˆå°†å››å—ç¡¬ç›˜ä¸­æ¨ªå‘ä¸Šåˆ†åˆ«ä¸¤ä¸¤åšæ¡å¸¦ï¼Œæ¡å¸¦åå†åœ¨çºµå‘ä¸Šåšé•œåƒã€‚<br>RAID01æç«¯æƒ…å†µä¸‹ï¼Œæ”¯æŒå•è¾¹å2å—ã€‚</p>
<p>æ€»ç»“ï¼šRAID10å’ŒRAID01åœ¨è¯»å’Œå†™çš„æ€§èƒ½ä¸Šæ²¡æœ‰å¤ªå¤§å·®è·ï¼Œä»å‘ç”Ÿæ•…éšœçš„æ¦‚ç‡ä¸Šçœ‹RAID01è¿œå¤§äºRAID10</p>
<h2 id="åˆ†åŒº"><a href="#åˆ†åŒº" class="headerlink" title="åˆ†åŒº"></a>åˆ†åŒº</h2><p>ç”Ÿäº§åœºæ™¯åˆ†åŒºæ–¹æ¡ˆï¼š<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-250.png" alt="åˆ†åŒº"></p>
<p>ç£ç›˜å‘½åè§„åˆ™ï¼š</p>
<ul>
<li>IDE: /dev/hda /dev/hdb</li>
<li>SCSI:/dev/sda /dev/sdb</li>
<li>NVME:/dev/nvme0n1 nvme1n1 ï¼ˆå†…æ ¸ç‰ˆæœ¬3.3å¼€å§‹æ”¯æŒï¼‰<br>åˆ†åŒºï¼š</li>
<li>sda1 sda2 sda3</li>
<li>nvme0n1p1 nvme0n1p2 nvme0n1p3</li>
</ul>
<p><strong>ç£ç›˜åˆ†åŒºçš„ç±»å‹ï¼š</strong></p>
<ol>
<li><p>ä¸»åˆ†åŒºï¼ˆprimaryï¼‰</p>
<ul>
<li>ç³»ç»Ÿä¸­å¿…é¡»è¦å­˜åœ¨çš„åˆ†åŒºï¼Œç³»ç»Ÿç›˜é€‰æ‹©ä¸»åˆ†åŒºå®‰è£…ã€‚</li>
<li>æ•°å­—ç¼–å·1-4(sda1-sda4)ã€‚</li>
<li>ä¸»åˆ†åŒºæœ€å¤šå››ä¸ªï¼Œæœ€å°‘ä¸€ä¸ªã€‚</li>
</ul>
</li>
<li><p>æ‰©å±•åˆ†åŒºï¼ˆextendï¼‰</p>
<ul>
<li>ç›¸å½“äºä¸€ä¸ªç‹¬ç«‹çš„å°ç£ç›˜ã€‚</li>
<li>æ‹¥æœ‰ç‹¬ç«‹çš„åˆ†åŒºè¡¨ã€‚</li>
<li>ä¸èƒ½ç‹¬ç«‹å­˜åœ¨ï¼Œå³ä¸èƒ½å­˜æ”¾æ•°æ®ã€‚</li>
<li>å¿…é¡»åœ¨æ‰©å±•åˆ†åŒºä¸Šå»ºç«‹é€»è¾‘åˆ†åŒºèƒ½å­˜æ”¾æ•°æ®ã€‚</li>
<li>å ç”¨ä¸»åˆ†åŒºçš„ç¼–å·ï¼ˆä¸»åˆ†åŒº+æ‰©å±•åˆ†åŒºï¼‰æœ€å¤š4ä¸ªã€‚</li>
<li>æ‰©å±•åˆ†åŒºå¯ä»¥æ²¡æœ‰ï¼Œæœ€å¤šä¸€ä¸ªã€‚</li>
</ul>
</li>
<li><p>é€»è¾‘åˆ†åŒºï¼ˆlogicï¼‰</p>
<ul>
<li>æ•°å­—ç¼–å·ä»5å¼€å§‹ã€‚</li>
<li>é€»è¾‘åˆ†åŒºå­˜æ”¾äºæ‰©å±•åˆ†åŒºä¹‹ä¸Šã€‚</li>
<li>å­˜æ”¾ä»»æ„æ™®é€šæ•°æ®ã€‚</li>
</ul>
</li>
</ol>
<p><strong>ç£ç›˜åˆ†åŒºçš„å·¥ä½œåŸç†ï¼š</strong><br>ç£ç›˜å­˜å‚¨é€»è¾‘ç»“æ„å›¾<br><img src= "/img/loading.gif" data-lazy-src="/images/pasted-248.png" alt="upload successful"></p>
<ol>
<li>ç£ç›˜æ˜¯æŒ‰æŸ±é¢åˆ†åŒºçš„</li>
<li>ç£ç›˜åˆ†åŒºç™»è®°çš„åœ°ç‚¹ï¼Œç£ç›˜åˆ†åŒºè¡¨<ul>
<li>ç£ç›˜åˆ†åŒºè¡¨å­˜æ”¾åˆ†åŒºæ˜¯ç»“æœä¿¡æ¯çš„ï¼ˆèµ·å§‹æŸ±é¢-ç»“æŸæŸ±é¢ï¼‰C6ç²¾ç»†åˆ°äº†æ‰‡åŒºã€‚</li>
<li>ç£ç›˜åˆ†åŒºè¡¨å­˜æ”¾ä½ç½®ï¼Œ0ç£é“(æœ€å¤–å›´)ï¼Œ0ç£å¤´(ç¬¬ä¸€ä¸ªç›˜é¢)ï¼Œ1æ‰‡åŒºã€‚ï¼ˆ512å­—èŠ‚ï¼‰ã€‚</li>
<li>å ç”¨1æ‰‡åŒºå‰512å­—èŠ‚çš„æœ€å64å­—èŠ‚ï¼ˆåˆ†åŒºè¡¨ï¼‰ï¼Œå‰446å­—èŠ‚å­˜æ”¾ç³»ç»Ÿå¼•å¯¼ä¿¡æ¯ã€‚åä¸¤ä¸ªå­—èŠ‚å­˜æ”¾åˆ†åŒºç»“æŸæ ‡å¿—ï¼ˆ55AAï¼‰</li>
<li>ç£ç›˜åˆ†åŒºè¡¨å®¹é‡æœ‰é™ä¸º64å­—èŠ‚ï¼Œä¸€ä¸ªåˆ†åŒºå›ºå®šå 16å­—èŠ‚ã€‚æ‰€ä»¥64/16=4ä¸ªåˆ†åŒºï¼ˆä¸»åˆ†åŒº+æ‰©å±•åˆ†åŒºï¼‰</li>
</ul>
</li>
</ol>
<p><strong>ç£ç›˜åˆ†åŒºçš„å®è·µï¼š</strong><br>ç£ç›˜åˆ†åŒºçš„æœ¬è´¨ï¼Œå°±æ˜¯ä¿®æ”¹64å­—èŠ‚çš„åˆ†åŒºè¡¨ã€‚ï¼ˆå¦‚æœæ˜¯æ‰©å±•åˆ†åŒºï¼Œåˆ™ä¿®æ”¹æ‰©å±•åˆ†åŒºç‹¬ç«‹çš„åˆ†åŒºè¡¨ï¼‰</p>
<h3 id="fdisk"><a href="#fdisk" class="headerlink" title="fdisk"></a>fdisk</h3><p><strong>fdiskå‘½ä»¤</strong>ï¼Œä¿®æ”¹MBRåˆ†åŒºè¡¨ï¼š<br>æ—¢èƒ½ä¿®æ”¹å°äº2Tä¹Ÿèƒ½ä¿®æ”¹å¤§äº2Tçš„ç£ç›˜.</p>
<ul>
<li>fdisk-Partition table manipulator for Linux linuxä¸‹æœ€å¸¸ç”¨çš„åˆ†åŒºå·¥å…·ï¼Œä¸€èˆ¬æ˜¯è£…å®Œç³»ç»Ÿåè¿›è¡Œåˆ†åŒºã€‚è£…ç³»ç»Ÿä¹‹å‰çš„åˆ†åŒºï¼Œå¤šæ•°éƒ½æ˜¯ç³»ç»ŸISOé‡Œé¢çš„å·¥å…·åˆ†ï¼Œæˆ–è€…raidé‡Œåˆ†å°ç£ç›˜ã€‚</li>
<li>fdiskåªèƒ½rootæƒé™ç”¨æˆ·ä½¿ç”¨ã€‚</li>
<li>fdiské€‚åˆäºå¯¹è£…ç³»ç»Ÿåçš„å‰©ä½™ç©ºé—´è¿›è¡Œåˆ†åŒºï¼Œä¾‹å¦‚ï¼šå®‰è£…ç³»ç»Ÿæ—¶æ²¡æœ‰å…¨éƒ¨åˆ†åŒºï¼Œæˆ–è€…å®‰è£…ç³»ç»Ÿåæ·»åŠ æ–°ç£ç›˜ã€‚</li>
<li>fdisk æ”¯æŒmbråˆ†åŒºè¡¨ï¼ˆ2TBä»¥å†…ï¼‰,å¤§äº2TBçš„ç£ç›˜éœ€è¦å…ˆè½¬æ¢ç¡¬ç›˜æ ¼å¼ä¸ºgptæ ¼å¼ <code>g</code>å‚æ•°è¿›è¡Œè½¬æ¢ã€‚</li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br></pre></td><td class="code"><pre><span class="line">åˆ†åŒºå®æˆ˜ï¼š3P+1E(3L)  1 2 3 5 6 7 æ¯ä¸ª150M</span><br><span class="line">[root@S1 ~]# ll /dev/sd*</span><br><span class="line">brw-rw----. 1 root disk 8,  0 Oct 20 23:59 /dev/sda</span><br><span class="line">brw-rw----. 1 root disk 8,  1 Oct 20 23:59 /dev/sda1</span><br><span class="line">brw-rw----. 1 root disk 8,  2 Oct 20 23:59 /dev/sda2</span><br><span class="line">brw-rw----. 1 root disk 8,  3 Oct 20 23:59 /dev/sda3</span><br><span class="line">brw-rw----. 1 root disk 8, 16 Oct 20 23:59 /dev/sdb</span><br><span class="line">[root@S1 ~]# fdisk -l  &lt;==æŸ¥çœ‹åˆ†åŒºä¿¡æ¯</span><br><span class="line"></span><br><span class="line">Disk /dev/sda: 21.5 GB, 21474836480 bytes, 41943040 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk label type: dos</span><br><span class="line">Disk identifier: 0x000ed3d3</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sda1   *        2048     1050623      524288   83  Linux</span><br><span class="line">/dev/sda2         1050624     5244927     2097152   82  Linux swap / Solaris</span><br><span class="line">/dev/sda3         5244928    41943039    18349056   83  Linux</span><br><span class="line"></span><br><span class="line">Disk /dev/sdb: 1073 MB, 1073741824 bytes, 2097152 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line"></span><br><span class="line">[root@S1 ~]# fdisk /dev/sdb &lt;==å¯¹sdbè¿›è¡Œåˆ†åŒº</span><br><span class="line">Welcome to fdisk (util-linux 2.23.2).</span><br><span class="line"></span><br><span class="line">Changes will remain in memory only, until you decide to write them.</span><br><span class="line">Be careful before using the write command.</span><br><span class="line"></span><br><span class="line">Device does not contain a recognized partition table</span><br><span class="line">Building a new DOS disklabel with disk identifier 0x8ecef2f8.</span><br><span class="line"></span><br><span class="line">Command (m for help): m</span><br><span class="line">Command action</span><br><span class="line">   a   toggle a bootable flag</span><br><span class="line">   b   edit bsd disklabel</span><br><span class="line">   c   toggle the dos compatibility flag</span><br><span class="line">   d   delete a partition		&lt;==åˆ é™¤ä¸€ä¸ªåˆ†åŒº</span><br><span class="line">   g   create a new empty GPT partition table &lt;==è½¬æ¢ç¡¬ç›˜æ ¼å¼ä¸ºgpt</span><br><span class="line">   G   create an IRIX (SGI) partition table</span><br><span class="line">   l   list known partition types	&lt;==æŸ¥çœ‹å·²çŸ¥çš„åˆ†åŒºç±»å‹</span><br><span class="line">   m   print this menu		&lt;==æŸ¥çœ‹åˆ†åŒºçš„å¸®åŠ©ä¿¡æ¯</span><br><span class="line">   n   add a new partition		&lt;==æ·»åŠ ä¸€ä¸ªæ–°åˆ†åŒº</span><br><span class="line">   o   create a new empty DOS partition table</span><br><span class="line">   p   print the partition table	&lt;==æŸ¥çœ‹åˆ†åŒºç»“æœä¿¡æ¯</span><br><span class="line">   q   quit without saving changes	&lt;==é€€å‡ºä¸ä¿å­˜</span><br><span class="line">   s   create a new empty Sun disklabel</span><br><span class="line">   t   change a partition's system id&lt;==è°ƒæ•´åˆ†åŒºç±»å‹</span><br><span class="line">   u   change display/entry units</span><br><span class="line">   v   verify the partition table</span><br><span class="line">   w   write table to disk and exit	&lt;==ä¿å­˜å¹¶é€€å‡º</span><br><span class="line">   x   extra functionality (experts only)</span><br><span class="line"></span><br><span class="line">Command (m for help): p</span><br><span class="line"></span><br><span class="line">Disk /dev/sdb: 1073 MB, 1073741824 bytes, 2097152 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk label type: dos</span><br><span class="line">Disk identifier: 0x5faeac4d</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line"></span><br><span class="line">=======================å¼€å§‹åˆ›å»ºä¸»åˆ†åŒº==========================</span><br><span class="line">Command (m for help): n</span><br><span class="line">Partition type:</span><br><span class="line">   p   primary (0 primary, 0 extended, 4 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p): </span><br><span class="line">Using default response p</span><br><span class="line">Partition number (1-4, default 1): </span><br><span class="line">First sector (2048-2097151, default 2048): </span><br><span class="line">Using default value 2048</span><br><span class="line">Last sector, +sectors or +size{K,M,G} (2048-2097151, default 2097151): +150M</span><br><span class="line">Partition 1 of type Linux and of size 150 MiB is set</span><br><span class="line"></span><br><span class="line">Command (m for help): n   </span><br><span class="line">Partition type:</span><br><span class="line">   p   primary (1 primary, 0 extended, 3 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p): p</span><br><span class="line">Partition number (2-4, default 2): </span><br><span class="line">First sector (309248-2097151, default 309248): </span><br><span class="line">Using default value 309248</span><br><span class="line">Last sector, +sectors or +size{K,M,G} (309248-2097151, default 2097151): +150M</span><br><span class="line">Partition 2 of type Linux and of size 150 MiB is set</span><br><span class="line"></span><br><span class="line">Command (m for help): n</span><br><span class="line">Partition type:</span><br><span class="line">   p   primary (2 primary, 0 extended, 2 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p): p</span><br><span class="line">Partition number (3,4, default 3): </span><br><span class="line">First sector (616448-2097151, default 616448): </span><br><span class="line">Using default value 616448</span><br><span class="line">Last sector, +sectors or +size{K,M,G} (616448-2097151, default 2097151): +150M</span><br><span class="line">Partition 3 of type Linux and of size 150 MiB is set</span><br><span class="line"></span><br><span class="line">=======================å¼€å§‹åˆ›å»ºæ‰©å±•åˆ†åŒº==========================</span><br><span class="line">Command (m for help): n</span><br><span class="line">Partition type:</span><br><span class="line">   p   primary (3 primary, 0 extended, 1 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default e): </span><br><span class="line">Using default response e</span><br><span class="line">Selected partition 4</span><br><span class="line">First sector (923648-2097151, default 923648): </span><br><span class="line">Using default value 923648</span><br><span class="line">Last sector, +sectors or +size{K,M,G} (923648-2097151, default 2097151): 	&lt;==ç»™å‰©ä½™å…¨éƒ¨ç©ºé—´</span><br><span class="line">Using default value 2097151</span><br><span class="line">Partition 4 of type Extended and of size 573 MiB is set</span><br><span class="line"></span><br><span class="line">Command (m for help): p</span><br><span class="line"></span><br><span class="line">Disk /dev/sdb: 1073 MB, 1073741824 bytes, 2097152 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk label type: dos</span><br><span class="line">Disk identifier: 0x5faeac4d</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sdb1            2048      309247      153600   83  Linux</span><br><span class="line">/dev/sdb2          309248      616447      153600   83  Linux</span><br><span class="line">/dev/sdb3          616448      923647      153600   83  Linux</span><br><span class="line">/dev/sdb4          923648     2097151      586752    5  Extended</span><br><span class="line"></span><br><span class="line">=======================å¼€å§‹åˆ›å»ºé€»è¾‘åˆ†åŒº==========================</span><br><span class="line">Command (m for help): n</span><br><span class="line">All primary partitions are in use</span><br><span class="line">Adding logical partition 5</span><br><span class="line">First sector (925696-2097151, default 925696): </span><br><span class="line">Using default value 925696</span><br><span class="line">Last sector, +sectors or +size{K,M,G} (925696-2097151, default 2097151): +150M</span><br><span class="line">Partition 5 of type Linux and of size 150 MiB is set</span><br><span class="line"></span><br><span class="line">Command (m for help): n</span><br><span class="line">All primary partitions are in use</span><br><span class="line">Adding logical partition 6</span><br><span class="line">First sector (1234944-2097151, default 1234944): </span><br><span class="line">Using default value 1234944</span><br><span class="line">Last sector, +sectors or +size{K,M,G} (1234944-2097151, default 2097151): +150M</span><br><span class="line">Partition 6 of type Linux and of size 150 MiB is set</span><br><span class="line"></span><br><span class="line">Command (m for help): n</span><br><span class="line">All primary partitions are in use</span><br><span class="line">Adding logical partition 7</span><br><span class="line">First sector (1544192-2097151, default 1544192): </span><br><span class="line">Using default value 1544192</span><br><span class="line">Last sector, +sectors or +size{K,M,G} (1544192-2097151, default 2097151):  </span><br><span class="line">Using default value 2097151</span><br><span class="line">Partition 7 of type Linux and of size 270 MiB is set</span><br><span class="line"></span><br><span class="line">=======================æŸ¥çœ‹ç»“æœ3P 1E(3L)==========================</span><br><span class="line">Command (m for help): p</span><br><span class="line"></span><br><span class="line">Disk /dev/sdb: 1073 MB, 1073741824 bytes, 2097152 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk label type: dos</span><br><span class="line">Disk identifier: 0x5faeac4d</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sdb1            2048      309247      153600   83  Linux</span><br><span class="line">/dev/sdb2          309248      616447      153600   83  Linux</span><br><span class="line">/dev/sdb3          616448      923647      153600   83  Linux</span><br><span class="line">/dev/sdb4          923648     2097151      586752    5  Extended</span><br><span class="line">/dev/sdb5          925696     1232895      153600   83  Linux</span><br><span class="line">/dev/sdb6         1234944     1542143      153600   83  Linux</span><br><span class="line">/dev/sdb7         1544192     2097151      276480   83  Linux</span><br><span class="line"></span><br><span class="line">Command (m for help):</span><br></pre></td></tr></tbody></table></figure>

<h3 id="parted"><a href="#parted" class="headerlink" title="parted"></a>parted</h3><p><strong>partedå‘½ä»¤</strong>ï¼Œgptåˆ†åŒºæ ¼å¼ï¼š<br>æ—¢èƒ½ä¿®æ”¹å°äº2Tä¹Ÿèƒ½ä¿®æ”¹å¤§äº2Tçš„ç£ç›˜.</p>
<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-249.png" alt="partedå‘½ä»¤"><br>æ”¹ç¡¬ç›˜æ ¼å¼ï¼š<code>parted -s /dev/sdb mklabel gpt/msdos</code> äºŒé€‰ä¸€ï¼Œå¤§äºä¸¤Tç”¨gptåä¹‹é€‰msdoså³mbr<br>å¢åŠ åˆ†åŒºï¼š<code>parted -s /dev/sdb mkpart primary 581 100%==-1</code><br>åˆ é™¤åˆ†åŒºï¼š<code>parted -s /dev/sdb rm [åˆ†åŒºå·]</code><br>æŸ¥çœ‹åˆ†åŒºï¼š<code>parted -s /dev/sdb p</code></p>
<p><strong>mkpart PART-TYPE START END</strong><br>PART-TYPE(åˆ†åŒºç±»å‹)</p>
<ul>
<li>primary ä¸»åˆ†åŒº</li>
<li>logical é€»è¾‘åˆ†åŒº</li>
<li>extended æ‰©å±•åˆ†åŒº</li>
</ul>
<p><strong>START è®¾å®šç£ç›˜åˆ†åŒºèµ·å§‹ç‚¹ï¼›å¯ä»¥ä¸º0ï¼ŒnumberMiB/GiB/TiBï¼›</strong></p>
<ul>
<li>0 è®¾å®šå½“å‰åˆ†åŒºçš„èµ·å§‹ç‚¹ä¸ºç£ç›˜çš„ç¬¬ä¸€ä¸ªæ‰‡åŒºï¼›</li>
<li>1G è®¾å®šå½“å‰åˆ†åŒºçš„èµ·å§‹ç‚¹ä¸ºç£ç›˜çš„1Gå¤„å¼€å§‹ï¼›</li>
</ul>
<p><strong>END è®¾å®šç£ç›˜åˆ†åŒºç»“æŸç‚¹ï¼›</strong></p>
<ul>
<li>-1 è®¾å®šå½“å‰åˆ†åŒºçš„ç»“æŸç‚¹ä¸ºç£ç›˜çš„æœ€åä¸€ä¸ªæ‰‡åŒºï¼›</li>
<li>10G è®¾å®šå½“å‰åˆ†åŒºçš„ç»“æŸç‚¹ä¸ºç£ç›˜çš„10Gå¤„ï¼›</li>
</ul>
<p>éœ€æ±‚ï¼š4å—2Tç›˜ï¼ŒRAID5å¤§å°6Tï¼ˆRAID5æŸå¤±äº†1å—ç›˜çš„å®¹é‡ï¼‰<br>ç°æœ‰ä¸€ä¸ªåšäº†RAID5çš„ç¡¬ç›˜ï¼Œè¦æ±‚ä¸‰ä¸ªåˆ†åŒº<br>ç¡¬ç›˜åˆ†åŒºæ€»å¤§å°ï¼š    6.2T<br>/data0            4.8T<br>/data1            1T<br>            400G ï¼ˆæ— éœ€æ ¼å¼åŒ–ï¼Œä½œDRBD+Hearbeat+MySQLé«˜å¯ç”¨é›†ç¾¤ï¼‰</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">[root@S1 ~]# parted /dev/sdb</span><br><span class="line">GNU Parted 3.1</span><br><span class="line">Using /dev/sdb</span><br><span class="line">Welcome to GNU Parted! Type 'help' to view a list of commands.</span><br><span class="line">(parted) p                                                                </span><br><span class="line">Model: ATA VBOX HARDDISK (scsi)</span><br><span class="line">Disk /dev/sdb: 1074MB</span><br><span class="line">Sector size (logical/physical): 512B/512B</span><br><span class="line">Partition Table: msdos		&lt;==æ­¤æ—¶æ–‡ä»¶ç³»ç»Ÿä¸ºmsdos</span><br><span class="line">Disk Flags: </span><br><span class="line"></span><br><span class="line">Number  Start  End  Size  Type  File system  Flags</span><br><span class="line"></span><br><span class="line">(parted) mklabel gpt                  &lt;==ä¿®æ”¹ç£ç›˜ä¸ºGPTæ ¼å¼[MBRæ ¼å¼ä¸º msdos ]</span><br><span class="line">		ç­‰ä»·äºï¼šparted -s /dev/sdb mklabel gpt &lt;==éäº¤äº’å¼ç£ç›˜ä¸ºGPTæ ¼å¼ï¼Œ-så–æ¶ˆæç¤º</span><br><span class="line">Warning: The existing disk label on /dev/sdb will be destroyed and all data on this disk will be lost. Do you want to</span><br><span class="line">continue?</span><br><span class="line">Yes/No? Y                                                                 </span><br><span class="line">(parted) p                                                                </span><br><span class="line">Model: ATA VBOX HARDDISK (scsi)</span><br><span class="line">Disk /dev/sdb: 1074MB</span><br><span class="line">Sector size (logical/physical): 512B/512B</span><br><span class="line">Partition Table: gpt		&lt;==ä¿®æ”¹ç»“æœ</span><br><span class="line">Disk Flags: </span><br><span class="line"></span><br><span class="line">Number  Start  End  Size  File system  Name  Flags</span><br><span class="line"></span><br><span class="line">(parted) mkpart primary 0 124	&lt;==æ–°å»ºåˆ†åŒºå®šä¹‰èµ·å§‹å¤§å°ï¼ˆMï¼‰ä¸ºå•ä½</span><br><span class="line">				ç­‰ä»·äºï¼šparted -s /dev/sdb mkpart primary 0 124</span><br><span class="line">Warning: The resulting partition is not properly aligned for best performance.</span><br><span class="line">Ignore/Cancel? I                                                          </span><br><span class="line">(parted) p              		&lt;==æ˜¾ç¤ºåˆ†åŒºä¿¡æ¯                                                  </span><br><span class="line">Model: ATA VBOX HARDDISK (scsi)</span><br><span class="line">Disk /dev/sdb: 1074MB</span><br><span class="line">Sector size (logical/physical): 512B/512B</span><br><span class="line">Partition Table: gpt</span><br><span class="line">Disk Flags: </span><br><span class="line"></span><br><span class="line">Number  Start   End    Size   File system  Name     Flags</span><br><span class="line"> 1      17.4kB  124MB  124MB               primary</span><br><span class="line"></span><br><span class="line">(parted) mkpart primary 581 -1    &lt;==åˆ†é…æ‰€æœ‰å‰©ä½™ç©ºé—´ç»™ç¬¬2ä¸ªåˆ†åŒº</span><br><span class="line">				 ç­‰ä»·äºï¼šparted -s /dev/sdb mkpart primary 581 100%</span><br><span class="line">(parted) p                                                                </span><br><span class="line">Model: ATA VBOX HARDDISK (scsi)</span><br><span class="line">Disk /dev/sdb: 1074MB</span><br><span class="line">Sector size (logical/physical): 512B/512B</span><br><span class="line">Partition Table: gpt</span><br><span class="line">Disk Flags: </span><br><span class="line"></span><br><span class="line">Number  Start   End     Size   File system  Name     Flags</span><br><span class="line"> 1      17.4kB  580MB   580MB               primary</span><br><span class="line"> 2      581MB   1073MB  492MB              primary</span><br><span class="line"></span><br><span class="line">(parted) rm 2 &lt;==åˆ é™¤åˆ†åŒº2</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h2 id="æ–‡ä»¶ç³»ç»Ÿ"><a href="#æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿ"></a>æ–‡ä»¶ç³»ç»Ÿ</h2><p><strong>æ–‡ä»¶ç³»ç»Ÿï¼š</strong></p>
<ul>
<li>ä»€ä¹ˆæ˜¯æ–‡ä»¶ç³»ç»Ÿï¼Ÿ<ul>
<li>æ˜¯è®¡ç®—æœºå­˜å‚¨å’Œç»„ç»‡æ•°æ®çš„æ–¹æ³•æˆ–æœºåˆ¶ã€‚è½åœ°æ˜¯ä¸€ä¸ªè½¯ä»¶ã€‚</li>
</ul>
</li>
<li>ä¸ºä»€ä¹ˆéœ€è¦æ–‡ä»¶ç³»ç»Ÿï¼Ÿ<ul>
<li>ç£ç›˜ã€ç‰©ç†ä»‹è´¨ã€ç£ç²’å­ç‰©ç†å…ƒç´ ã€‚ç¡¬ä»¶éœ€è¦è½¯ä»¶é©±åŠ¨ä½¿ç”¨ï¼Œç£ç›˜éœ€è¦æ–‡ä»¶ç³»ç»Ÿé©±åŠ¨ã€‚</li>
<li>æ–‡ä»¶ç³»ç»Ÿé€šè¿‡ç£ç›˜å®ç°ç®¡ç†è§„åˆ’ã€å­˜å–æ•°æ®ã€‚</li>
</ul>
</li>
<li>æ–‡ä»¶ç³»ç»Ÿéƒ½æœ‰å“ªäº›å¸¸è§ç§ç±»ï¼Ÿ<ul>
<li>Windows: NTFSã€fat32ã€msdos</li>
<li>Linux: ext2ã€ext3(C5)ã€ext4(C6)ã€xfs(C7)</li>
</ul>
</li>
</ul>
<h3 id="æ–‡ä»¶ç³»ç»Ÿåˆ›å»ºå’ŒæŒ‚è½½"><a href="#æ–‡ä»¶ç³»ç»Ÿåˆ›å»ºå’ŒæŒ‚è½½" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿåˆ›å»ºå’ŒæŒ‚è½½"></a>æ–‡ä»¶ç³»ç»Ÿåˆ›å»ºå’ŒæŒ‚è½½</h3><p>mkfs æ ¼å¼åŒ–ï¼ˆçš„æœ¬è´¨åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿï¼‰</p>
<ul>
<li>-t //æŒ‡å®šæ–‡ä»¶ç³»ç»Ÿ</li>
<li>-b //æŒ‡å®šBlockå¤§å°</li>
<li>-I //æŒ‡å®šInodeå¤§å°</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">[root@S1 ~]<span class="comment"># mkfs -t ext4 /dev/sdb1  &lt;==æ ¼å¼åŒ–ext4æ–‡ä»¶ç³»ç»Ÿï¼Œæœ¬è´¨å°±æ˜¯ç”Ÿæˆä¸€å®šæ•°é‡çš„Inodeå’ŒBlockã€‚ç­‰ä»·äºmkfs.exts /dev/sdb1</span></span><br><span class="line">		</span><br><span class="line">mke2fs 1.42.9 (28-Dec-2013)</span><br><span class="line">Filesystem label=</span><br><span class="line">OS <span class="built_in">type</span>: Linux</span><br><span class="line">Block size=1024 (<span class="built_in">log</span>=0)</span><br><span class="line">Fragment size=1024 (<span class="built_in">log</span>=0)</span><br><span class="line">Stride=0 blocks, Stripe width=0 blocks</span><br><span class="line">25688 inodes, 102400 blocks</span><br><span class="line">5120 blocks (5.00%) reserved <span class="keyword">for</span> the super user</span><br><span class="line">First data block=1</span><br><span class="line">Maximum filesystem blocks=33685504</span><br><span class="line">13 block <span class="built_in">groups</span></span><br><span class="line">8192 blocks per group, 8192 fragments per group</span><br><span class="line">1976 inodes per group</span><br><span class="line">Superblock backups stored on blocks: </span><br><span class="line">	8193, 24577, 40961, 57345, 73729</span><br><span class="line"></span><br><span class="line">Allocating group tables: <span class="keyword">done</span>                            </span><br><span class="line">Writing inode tables: <span class="keyword">done</span>                            </span><br><span class="line">Creating journal (4096 blocks): <span class="keyword">done</span></span><br><span class="line">Writing superblocks and filesystem accounting information: <span class="keyword">done</span></span><br><span class="line">-----------------------------------------------------------------------------------</span><br><span class="line">[root@S1 ~]<span class="comment"># mkfs -t ext4 -b 4096 -I 512 /dev/sdb1 &lt;==æŒ‡å®šInodeå’ŒBlockå¤§å°</span></span><br><span class="line">mke2fs 1.42.9 (28-Dec-2013)</span><br><span class="line">Filesystem label=</span><br><span class="line">OS <span class="built_in">type</span>: Linux</span><br><span class="line">Block size=4096 (<span class="built_in">log</span>=2)</span><br><span class="line">Fragment size=4096 (<span class="built_in">log</span>=2)</span><br><span class="line">Stride=0 blocks, Stripe width=0 blocks</span><br><span class="line">25600 inodes, 25600 blocks</span><br><span class="line">1280 blocks (5.00%) reserved <span class="keyword">for</span> the super user</span><br><span class="line">First data block=0</span><br><span class="line">Maximum filesystem blocks=27262976</span><br><span class="line">1 block group</span><br><span class="line">32768 blocks per group, 32768 fragments per group</span><br><span class="line">25600 inodes per group</span><br><span class="line"></span><br><span class="line">Allocating group tables: <span class="keyword">done</span>                            </span><br><span class="line">Writing inode tables: <span class="keyword">done</span>                            </span><br><span class="line">Creating journal (1024 blocks): <span class="keyword">done</span></span><br><span class="line">Writing superblocks and filesystem accounting information: <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">[root@S1 ~]<span class="comment"># dumpe2fs /dev/sdb1 | egrep -i "size" &lt;==æ£€æŸ¥ç»“æœ</span></span><br><span class="line">dumpe2fs 1.42.9 (28-Dec-2013)</span><br><span class="line">Filesystem features:      has_journal ext_attr resize_inode dir_index filetype extent 64bit flex_bg sparse_super large_file huge_file uninit_bg dir_nlink extra_isize</span><br><span class="line">Block size:               4096</span><br><span class="line">Fragment size:            4096</span><br><span class="line">Group descriptor size:    64</span><br><span class="line">Flex block group size:    16</span><br><span class="line">Inode size:	          512</span><br><span class="line">Required extra isize:     28</span><br><span class="line">Desired extra isize:      28</span><br><span class="line">Journal size:             4096k</span><br><span class="line"></span><br><span class="line">-----------------------------------------------------------------------------------</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p>mount </p>
<ul>
<li>-t æŒ‡å®šæ–‡ä»¶ç±»å‹</li>
<li>-o æŒ‚è½½çš„é€‰é¡¹[rw,remount]</li>
<li>-a æŒ‚è½½æ‰€æœ‰ç£ç›˜</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@S1 ~]<span class="comment"># mount -t ext4 /dev/sdb1 /mnt/ &lt;==æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿ</span></span><br><span class="line">[root@S1 ~]<span class="comment"># df -h</span></span><br><span class="line">[root@S1 ~]<span class="comment"># cat /proc/mounts &lt;==æŸ¥çœ‹æŒ‚è½½çŠ¶æ€</span></span><br><span class="line">[root@S1 ~]<span class="comment"># umount -lf /mnt/ &lt;==å¼ºåˆ¶å¸è½½</span></span><br><span class="line"></span><br><span class="line">[root@S1 ~]<span class="comment"># mount  /dev/sdb2 /mnt/  &lt;==æ²¡æœ‰æ ¼å¼åŒ–ï¼Œæ²¡æ³•æŒ‚è½½ã€‚</span></span><br><span class="line">mount: /dev/sdb2 is write-protected, mounting read-only</span><br><span class="line">mount: unknown filesystem <span class="built_in">type</span> <span class="string">'(null)'</span></span><br><span class="line"></span><br><span class="line">xfsæ ¼å¼åŒ–sdb2</span><br><span class="line">[root@S1 ~]<span class="comment"># mkfs.xfs /dev/sdb2</span></span><br><span class="line">meta-data=/dev/sdb2         isize=256    agcount=4, agsize=59072 blks</span><br><span class="line">          =                          sectsz=512   attr=2, projid32bit=1</span><br><span class="line">          =                          crc=0        finobt=0</span><br><span class="line">data    =                          bsize=4096   blocks=236288, imaxpct=25</span><br><span class="line">          =                          sunit=0      swidth=0 blks</span><br><span class="line">naming=version 2              bsize=4096   ascii-ci=0 ftype=0</span><br><span class="line"><span class="built_in">log</span>      =internal <span class="built_in">log</span>           bsize=4096   blocks=853, version=2</span><br><span class="line">           =                         sectsz=512   sunit=0 blks, lazy-count=1</span><br><span class="line">realtime =none                  extsz=4096   blocks=0, rtextents=0</span><br><span class="line">[root@S1 ~]<span class="comment"># mount  /dev/sdb2 /mnt/</span></span><br></pre></td></tr></tbody></table></figure>

<p>å¼€æœºè‡ªåŠ¨æŒ‚è½½</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">æ–¹æ³•ä¸€ï¼š</span><br><span class="line">[root@S1 ~]<span class="comment"># blkid &lt;==æŸ¥çœ‹è®¾å¤‡å±æ€§ UUID fstype</span></span><br><span class="line">/dev/sda1: UUID=<span class="string">"4b292773-2b2d-4f7d-807c-ba025a45dc58"</span> TYPE=<span class="string">"xfs"</span> </span><br><span class="line">/dev/sda2: UUID=<span class="string">"3fc4e794-5e50-437e-87e1-1e692621df3c"</span> TYPE=<span class="string">"swap"</span> </span><br><span class="line">/dev/sda3: UUID=<span class="string">"4664ec93-5655-4d88-80cd-aec984aaf857"</span> TYPE=<span class="string">"xfs"</span> </span><br><span class="line">/dev/sdb1: UUID=<span class="string">"360280b7-4a46-4e11-843d-d97e62cfe3bc"</span> TYPE=<span class="string">"ext4"</span> </span><br><span class="line">/dev/sdb2: UUID=<span class="string">"814731d0-a1ca-48fc-9522-8cf3eae33c8a"</span> TYPE=<span class="string">"xfs"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># /etc/fstab</span></span><br><span class="line"><span class="comment"># Created by anaconda on Wed Oct  9 11:54:43 2019</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Accessible filesystems, by reference, are maintained under '/dev/disk'</span></span><br><span class="line"><span class="comment"># See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">UUID=4664ec93-5655-4d88-80cd-aec984aaf857   /               xfs           defaults           0              0</span><br><span class="line">UUID=4b292773-2b2d-4f7d-807c-ba025a45dc58  /boot         xfs            defaults           0              0</span><br><span class="line">UUID=3fc4e794-5e50-437e-87e1-1e692621df3c   swap         swap         defaults           0              0</span><br><span class="line">è®¾å¤‡				                æŒ‚è½½ç‚¹  æ–‡ä»¶ç³»ç»Ÿç±»å‹  é»˜è®¤æŒ‚è½½é€‰é¡¹   æ˜¯å¦å¤‡ä»½ æ˜¯å¦å¼€æœºç£ç›˜æ£€æŸ¥</span><br><span class="line">defaults</span><br><span class="line">              Use default options: rw, suid, dev, <span class="built_in">exec</span>, auto, nouser, and async.</span><br><span class="line"></span><br><span class="line">UUID=814731d0-a1ca-48fc-9522-8cf3eae33c8a    /mnt         xfs            defaults           0              0  &lt;==å¼€æœºæŒ‚è½½</span><br><span class="line"></span><br><span class="line">mount -a &lt;==å®ç°fstabä¸­çš„é…ç½®æ–‡ä»¶ç«‹åˆ»ç”Ÿæ•ˆ</span><br><span class="line"></span><br><span class="line">æ–¹æ³•äºŒï¼š</span><br><span class="line">/usr/bin/mount -t xfs /dev/sdb2 /mnt &lt;==ä¸ºä¸´æ—¶æŒ‚è½½ï¼Œå¯å°†å…¶æ”¾å…¥/etc/rc.localï¼Œä¹Ÿå¯å®ç°è‡ªåŠ¨æŒ‚è½½ã€‚</span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ–‡ä»¶ç³»ç»Ÿä¿®å¤"><a href="#æ–‡ä»¶ç³»ç»Ÿä¿®å¤" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿä¿®å¤"></a>æ–‡ä»¶ç³»ç»Ÿä¿®å¤</h3><p>æŸ¥çœ‹extæ–‡ä»¶ç³»ç»Ÿçš„å†…éƒ¨ç»†èŠ‚ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@S1 ~]<span class="comment"># dumpe2fs /dev/sdb1</span></span><br><span class="line">Inode count:              25688</span><br><span class="line">Block count:              102400 &lt;==inode blockæ•°é‡</span><br><span class="line">Block size:               1024 &lt;==Blockå¤§å° 1k</span><br><span class="line">Inode size:	          128 &lt;==Inodeå¤§å°</span><br><span class="line"></span><br><span class="line">[root@S1 ~]<span class="comment"># fsck #æ£€æŸ¥å¹¶ä¿®å¤Linuxâ½‚ä»¶ç³»ç»Ÿ</span></span><br><span class="line">fsck         fsck.btrfs   fsck.cramfs  fsck.ext2    fsck.ext3    fsck.ext4    fsck.minix   fsck.xfs</span><br></pre></td></tr></tbody></table></figure>
<p>æ³¨æ„ï¼š</p>
<ol>
<li>æ­£å¸¸çš„ç£ç›˜ä¸èƒ½æ“ä½œ</li>
<li>æ“ä½œæ—¶è¦å¸è½½</li>
</ol>
<p>å‚æ•°:</p>
<ul>
<li>-aéäº’äº¤æ¨¡å¼ï¼Œè‡ªåŠ¨ä¿®å¤</li>
<li>-cæ£€æŸ¥æ˜¯å¦å­˜åœ¨æœ‰æŸåçš„åŒºå—ã€‚</li>
<li>-C fsck.ext3å‘½ä»¤ä¼šæŠŠå…¨éƒ¨çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œéƒ½äº¤ç”±å…¶é€†å‘å™è¿°ï¼Œä¾¿äºç›‘æ§ç¨‹åº</li>
<li>-dè¯¦ç»†æ˜¾ç¤ºå‘½ä»¤æ‰§è¡Œè¿‡ç¨‹</li>
<li>-få¼ºåˆ¶è¿›è¡Œæ£€æŸ¥</li>
<li>-Fæ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿä¹‹å‰ï¼Œå…ˆæ¸…ç†è¯¥ä¿å­˜è®¾å¤‡å—åŒºå†…çš„æ•°æ®</li>
<li>-læŠŠæ–‡ä»¶ä¸­æ‰€åˆ—å‡ºçš„æŸååŒºå—ï¼ŒåŠ å…¥æ ‡è®°</li>
<li>-Læ¸…é™¤æ‰€æœ‰æŸåæ ‡å¿—ï¼Œé‡æ–°æ ‡è®°</li>
<li>-néäº¤äº’æ¨¡å¼,æŠŠæ¬²æ£€æŸ¥çš„æ–‡ä»¶ç³»ç»Ÿè®¾æˆåªè¯»</li>
<li>-P è®¾ç½®fsck.ext2å‘½ä»¤æ‰€èƒ½å¤„ç†çš„inodeå¤§å°ä¸ºå¤šå°‘</li>
<li>-räº¤äº’æ¨¡å¼</li>
<li>-Rå¿½ç•¥ç›®å½•</li>
<li>-sé¡ºåºæ£€æŸ¥</li>
<li>-Sæ•ˆæœå’ŒæŒ‡å®šâ€œ-sâ€å‚æ•°ç±»ä¼¼</li>
<li>-t æ˜¾ç¤ºfsck.ext2å‘½ä»¤çš„æ—¶åºä¿¡æ¯ã€‚</li>
<li>-væ˜¾ç¤ºè¯¦ç»†çš„å¤„ç†è¿‡ç¨‹</li>
<li>-yå…³é—­äº’åŠ¨æ¨¡å¼</li>
</ul>
<p>é€‰æ‹©å‚æ•°:</p>
<ul>
<li>-bæŒ‡å®šåˆ†åŒºçš„ç¬¬ä¸€ä¸ªç£åŒºçš„èµ·å§‹åœ°å€/Super Block</li>
<li>-B è®¾ç½®è¯¥åˆ†åŒºæ¯ä¸ªåŒºå—çš„å¤§å°</li>
<li>-Iè®¾ç½®æ¬²æ£€æŸ¥çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå…¶inodeç¼“å†²åŒºçš„åŒºå—æ•°ç›®</li>
<li>-Væ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯</li>
</ul>
<p><code>[root@S1 ~]# xfs_repair /dev/sdb2</code> æ£€æŸ¥å’Œä¿®å¤xfsæ–‡ä»¶ç³»ç»Ÿ</p>
<h2 id="æ•‘æ´æ¨¡å¼"><a href="#æ•‘æ´æ¨¡å¼" class="headerlink" title="æ•‘æ´æ¨¡å¼"></a>æ•‘æ´æ¨¡å¼</h2><p>å½“ç³»ç»Ÿç£ç›˜æŒ‚è½½é¡¹å†™å…¥fstabä¸­ï¼Œæ­¤æ—¶æœºå™¨é‡å¯äº†ã€‚ä½†æ˜¯ç›˜è¢«æ‹”å‡ºæ¥æˆ–è€…ç£ç›˜çš„æ–‡ä»¶ç³»ç»ŸæŸåæ— æ³•æŒ‚è½½æ—¶ï¼Œç³»ç»Ÿä¼šå¼€ä¸å¼€æœºã€‚è¿™ä¸ªæ—¶å€™å°±è¦è¿›å…¥æ•‘æ´æ¨¡å¼å§fstabä¸­çš„æŒ‚è½½é¡¹æ³¨é‡Šæ‰ã€‚</p>
<ol>
<li>grubèœå•æŒ‰eé”®ï¼Œæ‰¾åˆ°å¦‚ä¸‹ä½ç½®ã€‚</li>
</ol>
<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-251.png" alt="æ•‘æ´æ¨¡å¼1"><br>2. ä¿®æ”¹ä¸ºï¼š</p>
<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-252.png" alt="æ•‘æ´æ¨¡å¼2"><br>3. Ctrl+xæ‰§è¡Œï¼š</p>
<p><img src= "/img/loading.gif" data-lazy-src="/images/pasted-253.png" alt="æ•‘æ´æ¨¡å¼3"><br>æ‰§è¡Œ<code>chroot sysroot</code>è·å–rootæƒé™ã€‚<br>vi ç¼–è¾‘fstab<br>exec /sbin/init é‡å¯OK</p>
<p>åŒæ ·é€‚ç”¨å•ç”¨æˆ·æ¨¡å¼æ‰¾å›rootå¯†ç <br>å¦‚æœå¼€å¯äº†selinux è¿˜éœ€è¦æ‰§è¡Œ<br><code>touch /.autorelabel</code>  &lt;==selinuxåœ¨é‡å¯åæ›´æ–°label(æ—¢selinuxå®‰å…¨ä¸Šä¸‹æ–‡ å…¶ä¸­åŒ…å«ï¼šSELinuxç”¨æˆ·ã€SELinuxè§’è‰²ã€ç±»å‹ã€å®‰å…¨çº§åˆ«)</p>
</article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info">Linux åŸºç¡€çŸ¥è¯† [å·²å®Œç»“]</span></div><div class="post-copyright__url"><span class="post-copyright-info"><a id="post-url" href="https://cakepanit.com/forward/312ec9e0.html">https://cakepanit.com/forward/312ec9e0.html</a><a id="post-url-copy" title="å¤åˆ¶æ–‡ç« é“¾æ¥" onclick="btf.copyFn(&quot;https://cakepanit.com/forward/312ec9e0.html&quot;)"><i class="fas fa-paste copy-button"></i></a></span></div><div class="post-copyright__cc"><span class="post-copyright-info">è½¬è½½å‰è¯·é˜…è¯»æœ¬ç«™ <a href="/protocol/copyright/" title="æœ¬ç«™æ‰€æœ‰åŸåˆ›æ–‡ç« é‡‡ç”¨çŸ¥è¯†å…±äº«(Creative Commons)ç½²åâ€”éå•†ä¸šæ€§ä½¿ç”¨â€”ç›¸åŒæ–¹å¼å…±äº«4.0å›½é™…å…¬å…±è®¸å¯åè®®">ç‰ˆæƒåè®®</a>ï¼Œæ–‡ç« è‘—ä½œæƒå½’ <a href="https://cakepanit.com">é¥¼é“›</a> æ‰€æœ‰ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/OPS/">ğŸŒOPS</a><a class="post-meta__tags" href="/tags/SHELL/">SHELL</a><a class="post-meta__tags" href="/tags/RAID/">RAID</a></div><div class="post_share"><div class="social-share" data-image="/images/img-75.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="/css/fei/share.min.css" media="print" onload="this.media='all'"><script src="/css/fei/share.min.js" defer=""></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> æ‰“èµ</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/DC9cYFtFic5G6JZgktjajza5fVfRJLaXLS.png" target="_blank"><img class="post-qr-code-img" src= "/img/loading.gif" data-lazy-src="/img/DC9cYFtFic5G6JZgktjajza5fVfRJLaXLS.png" alt="ç‹—ç‹—å¸(DogeCoin)"></a><div class="post-qr-code-desc">ç‹—ç‹—å¸(DogeCoin)</div></li><li class="reward-item"><a href="/img/bc1q63xj5a3xgfulv8guate5qxmh6qh8ws7c3casqm.png" target="_blank"><img class="post-qr-code-img" src= "/img/loading.gif" data-lazy-src="/img/bc1q63xj5a3xgfulv8guate5qxmh6qh8ws7c3casqm.png" alt="æ¯”ç‰¹å¸(BitCoin)"></a><div class="post-qr-code-desc">æ¯”ç‰¹å¸(BitCoin)</div></li></ul></div></div><div class="ads-wrap"><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1372389585456420" data-ad-slot="6522729366" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/forward/d6f16b84.html" title="é›†ç¾¤æ­å»ºå‰ä¼˜åŒ–æ–¹æ¡ˆ"><img class="cover" src= "/img/loading.gif" data-lazy-src="/images/img-75.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">é›†ç¾¤æ­å»ºå‰ä¼˜åŒ–æ–¹æ¡ˆ</div><div class="content">åˆ†åŒºæ–¹æ¡ˆæ™®é€šåˆ†åŒºå½¢å¼
/boot å¼•å¯¼åˆ†åŒº 512M-1024M
swap äº¤æ¢åˆ†åŒº   å†…å­˜å¤§äº8Gï¼Œç»™8Gã€‚å†…å­˜å°äº8Gï¼Œç»™åˆ°1.5å€çš„å†…å­˜ã€‚
/   ç»™æ‰€æœ‰ç©ºé—´

ä½¿ç”¨æ¡ä»¶
1ã€æ•°æ®ä¸é‚£ä¹ˆé‡è¦ã€‚
2ã€å¿…é¡»å¿…é¡»è¦æœ‰å¤‡ä»½ç­–ç•¥ï¼šå°±æ˜¯å®æ—¶çš„ã€‚
å†…éƒ¨äººå‘˜å‘å¸ƒæ•°æ®ï¼ŒåŒæ—¶å‘å¸ƒåˆ°ä¸¤å°ä»¥ä¸Šç”Ÿäº§æœåŠ¡å™¨é‡Œã€‚æ˜¯ä¸‰ä¸ªå¤‡ä»½ï¼ŒGITä¸Šï¼Œä»£ç ã€‚
å¤–éƒ¨ç”¨æˆ·å†™å…¥æ•°æ®ï¼ˆå›¾ç‰‡ã€è§†é¢‘ æ–‡å­—ï¼‰ï¼Œ
åŒæ—¶å‘å¸ƒåˆ°ä¸¤å°æœåŠ¡å™¨åé¢å…±äº«çš„æœåŠ¡å™¨ä¸Šï¼ˆå¯¹è¿™ä¸ªå…±äº«æœåŠ¡å™¨åšå¤‡ä»½ï¼‰ï¼Œ
ä¸¤ä¸ªå¤‡ä»½ã€‚



å­˜å‚¨æœåŠ¡å™¨ï¼ˆå«æ•°æ®åº“ï¼‰çš„åˆ†åŒºæ–¹å¼
/boot å¼•å¯¼åˆ†åŒº 512M-1024M
swap äº¤æ¢åˆ†åŒº   å†…å­˜å¤§äº8Gï¼Œç»™8Gã€‚å†…å­˜å°äº8Gï¼Œç»™åˆ°1.5å€çš„å†…å­˜ã€‚
/   ç»™100G
/data  å‰©ä½™ç»™æ•°æ®åˆ†åŒº ï¼Œdataå¯ä»¥æ˜¯ä»»æ„åç§°ã€‚

é—¨æˆ·ç½‘ç«™çš„åˆ†åŒºæ–¹æ¡ˆ
/boot å¼•å¯¼åˆ†åŒº 512M-1024M
swap äº¤æ¢åˆ†åŒº   å†…å­˜å¤§äº8Gï¼Œç»™8Gã€‚å†…å­˜å°äº8Gï¼Œç»™åˆ°1.5å€çš„å†…å­˜ã€‚
/   ç»™100G
å‰©ä½™ä¿ç•™ï¼Œå°†æ¥å“ªä¸ªéƒ¨é—¨ä½¿ç”¨ï¼Œä½¿ç”¨éƒ¨é—¨è‡ªå·±åˆ†å‰©ä½™çš„åˆ†åŒºã€‚

é”™è¯¯åˆ†åŒºæ–¹æ¡ˆ
/boot å¼•å¯¼åˆ†åŒº 512M-1024M
swap äº¤æ¢åˆ†åŒº   å†…å­˜å¤§ ...</div></div></a></div><div class="next-post pull-right"><a href="/forward/d7240237.html" title="LinuxåŸºç¡€-iptablesé˜²ç«å¢™ç›¸å…³é…ç½®"><img class="cover" src= "/img/loading.gif" data-lazy-src="/images/pasted-33.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">LinuxåŸºç¡€-iptablesé˜²ç«å¢™ç›¸å…³é…ç½®</div><div class="content">å®¹å™¨ï¼šç“¶ç“¶ç½ç½ å­˜æ”¾ä¸œè¥¿
è¡¨(table)ï¼šå­˜æ”¾é“¾çš„å®¹å™¨
é“¾(chain)ï¼šå­˜æ”¾è§„åˆ™çš„å®¹å™¨
è§„åˆ™(policy)ï¼š

å‡†è®¸æˆ–æ‹’ç»è§„åˆ™
å‡†è®¸æˆ–æ‹’ç»è§„åˆ™ACCPT DROP policeï¼šè­¦å¯Ÿ




iptablesæ‰§è¡Œè¿‡ç¨‹å·¥ä½œæµç¨‹ï¼š
é˜²ç«å¢™æ˜¯å±‚å±‚è¿‡æ»¤çš„ï¼Œå®é™…æ˜¯æŒ‰ç…§é…ç½®è§„åˆ™çš„é¡ºåºä»ä¸Šåˆ°ä¸‹ï¼Œä»å‰åˆ°åè¿›è¡Œè¿‡æ»¤çš„ã€‚
å¦‚æœåŒ¹é…ä¸Šè§„åˆ™ï¼Œå³æ˜ç¡®è¡¨ç¤ºæ˜¯é˜»æ­¢è¿˜æ˜¯é€šè¿‡ï¼Œæ•°æ®åŒ…å°±ä¸å†å‘ä¸‹åŒ¹é…æ–°çš„è§„åˆ™ã€‚
å¦‚æœè§„åˆ™ä¸­æ²¡æœ‰æ˜ç¡®è¡¨æ˜æ˜¯é˜»æ­¢è¿˜æ˜¯é€šè¿‡çš„ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰åŒ¹é…è§„åˆ™ï¼Œå‘ä¸‹è¿›è¡ŒåŒ¹é…ï¼Œç›´åˆ°åŒ¹é…é»˜è®¤è§„åˆ™å¾—åˆ°æ˜ç¡®çš„é˜»æ­¢è¿˜æ˜¯é€šè¿‡ã€‚
é˜²ç«å¢™çš„é»˜è®¤è§„åˆ™æ˜¯æ‰€æœ‰è§„åˆ™æ‰§è¡Œå®Œæ‰æ‰§è¡Œçš„ã€‚

å››è¡¨ä¸äº”é“¾filter(é»˜è®¤ï¼Œé˜²ç«å¢™åŠŸèƒ½ å‡†è®¸ æ‹’ç»)natè¡¨ natåŠŸèƒ½

å†…ç½‘æœåŠ¡å™¨ä¸Šå¤–ç½‘
ç«¯å£æ˜ å°„

mangleraw
filterè¡¨å¼ºè°ƒï¼šä¸»è¦å’Œä¸»æœºè‡ªèº«ç›¸å…³ï¼ŒçœŸæ­£è´Ÿè´£ä¸»æœºé˜²ç«å¢™åŠŸèƒ½çš„ï¼ˆè¿‡æ»¤æµå…¥æµå‡ºä¸»æœºçš„æ•°æ®åŒ…ï¼‰filterè¡¨ç¤ºiptablesé»˜è®¤ä½¿ç”¨çš„è¡¨ï¼Œè¿™ä¸ªè¡¨å®šä¹‰äº†ä¸‰ä¸ªé“¾ï¼ˆchainsï¼‰ä¼ä¸šå·¥ä½œåœºæ™¯ï¼šä¸»æœºé˜²ç«å¢™ç›¸å…³é“¾ï¼š

INPUTï¼šè´Ÿè´£è¿‡æ»¤æ‰€æœ‰ç›®æ ‡åœ°å€æ˜¯æœ¬æœºåœ°å€çš„æ•°æ®åŒ…ï¼Œäººè¯ï¼šå°±æ˜¯è¿‡æ»¤è¿›å…¥ä¸»æœºçš„æ•°æ®åŒ…(æ£€ç¥¨å‘˜)
FORWARDï¼šè´Ÿè´£è½¬å‘ ...</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/forward/60c1bc2d.html" title="Git-C7ä¸‹Gitlab-12.3.5å®‰è£…"><img class="cover" src= "/img/loading.gif" data-lazy-src="/images/img-160.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2019-06-22</div><div class="title">Git-C7ä¸‹Gitlab-12.3.5å®‰è£…</div><div class="info">GitLab æ¦‚è¿°ï¼šã€€ã€€æ˜¯ä¸€ä¸ªåˆ©ç”¨ Ruby on Rails å¼€å‘çš„å¼€æºåº”ç”¨ç¨‹åºï¼Œå®ç°ä¸€ä¸ªè‡ªæ‰˜ç®¡çš„ Git é¡¹ç›®ä»“åº“ï¼Œå¯é€šè¿‡ Webç•Œé¢è¿›è¡Œè®¿é—®å…¬å¼€çš„æˆ–è€…ç§äººé¡¹ç›®ã€‚Ruby on Rails æ˜¯ä¸€ä¸ªå¯ä»¥ä½¿ä½ å¼€å‘ã€éƒ¨ç½²ã€ç»´æŠ¤ web åº”ç”¨ç¨‹åºå˜å¾—ç®€å•çš„æ¡†æ¶ã€‚
   GitLab æ‹¥æœ‰ä¸ Github ç±»ä¼¼çš„åŠŸèƒ½ï¼Œèƒ½å¤Ÿæµè§ˆæºä»£ç ï¼Œç®¡ç†ç¼ºé™·å’Œæ³¨é‡Šã€‚å¯ä»¥ç®¡ç†å›¢é˜Ÿå¯¹ä»“åº“çš„è®¿é—®ï¼Œå®ƒéå¸¸æ˜“äºæµè§ˆæäº¤è¿‡çš„ç‰ˆæœ¬å¹¶æä¾›ä¸€ä¸ªæ–‡ä»¶å†å²åº“ã€‚å®ƒè¿˜æä¾›ä¸€ä¸ªä»£ç ç‰‡æ®µæ”¶é›†åŠŸèƒ½å¯ä»¥è½»æ¾å®ç°ä»£ç å¤ç”¨ï¼Œä¾¿äºæ—¥åæœ‰éœ€è¦çš„æ—¶å€™è¿›è¡ŒæŸ¥æ‰¾ã€‚GitLab ä¸­æ–‡ç½‘ï¼šhttps://www.gitlab.cc/installation/#centos-7
GitHub å’Œ GitLab çš„åŒºåˆ«:ç›¸åŒç‚¹:
äºŒè€…éƒ½æ˜¯åŸºäº web çš„ Git ä»“åº“ï¼Œåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Š GitLab æ˜¯ä»¿ç…§ GitHub æ¥åšçš„ï¼Œå®ƒä»¬éƒ½æä¾›äº†åˆ†äº«å¼€æºé¡¹ç›®çš„å¹³å°ï¼Œä¸ºå¼€å‘å›¢é˜Ÿæä¾›äº†å­˜å‚¨ã€åˆ†äº«ã€å‘å¸ƒå’Œåˆä½œå¼€å‘é¡¹ç›®çš„ä¸­å¿ƒåŒ–äº‘å­˜å‚¨çš„åœºæ‰€ã€‚

ä¸åŒç‚¹ï¼š
GitHub å¦‚æœè¦ä½¿ç”¨ç§æœ‰ä»“åº“ï¼Œè¶…è¿‡ 3 ä¸ªäººå°±æ”¶è´¹ã€‚GitLab å¯ä»¥åœ¨ä¸Šé¢åˆ›å»ºç§äººçš„å…‹è´¹ä»“åº“ã€‚
GitLab è®©å¼€å‘å›¢é˜Ÿ ...</div></div></a></div><div><a href="/forward/882d9505.html" title="Docker-æ‰‹åŠ¨æ„å»ºdotneté•œåƒ"><img class="cover" src= "/img/loading.gif" data-lazy-src="/images/img-163.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-21</div><div class="title">Docker-æ‰‹åŠ¨æ„å»ºdotneté•œåƒ</div><div class="info">dockerç¯å¢ƒ12345678910111213[root@wikifx2 ~]# docker image lsREPOSITORY          TAG                 IMAGE ID            CREATED             SIZEnginx               latest              0901fa9da894        10 days ago         132MBnginx               latest              0901fa9da894        10 days ago         132MBalpine              latest              a24bb4013296        7 weeks ago         5.57MBcentos              7                   b5b4d78bc90c        2 months ago        203MB[root@wikifx2 ~]# ...</div></div></a></div><div><a href="/forward/408a4bb8.html" title="Docker-å®‰è£…&amp;åŸºç¡€ç®¡ç†"><img class="cover" src= "/img/loading.gif" data-lazy-src="/images/img-163.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-16</div><div class="title">Docker-å®‰è£…&amp;åŸºç¡€ç®¡ç†</div><div class="info">Dockerä»‹ç»ä»€ä¹ˆæ˜¯å®¹å™¨ï¼Ÿå®¹å™¨å°±æ˜¯åœ¨éš”ç¦»çš„ç¯å¢ƒè¿è¡Œçš„ä¸€ä¸ªè¿›ç¨‹ï¼Œå¦‚æœè¿›ç¨‹åœæ­¢ï¼Œå®¹å™¨å°±ä¼šé”€æ¯ã€‚éš”ç¦»çš„ç¯å¢ƒæ‹¥æœ‰è‡ªå·±çš„ç³»ç»Ÿæ–‡ä»¶ï¼Œipåœ°å€ï¼Œ ä¸»æœºåç­‰ã€‚
dockerçš„ä¸»è¦ç»„æˆéƒ¨åˆ†dockeræ˜¯ä¼ ç»Ÿçš„CSæ¶æ„åˆ†ä¸ºdocker clientå’Œdocker server,å‘mysqlä¸€æ ·dockerä¸»è¦ç»„ä»¶æœ‰ï¼šé•œåƒã€å®¹å™¨ã€ä»“åº“ã€ç½‘ç»œã€å­˜å‚¨ 
Dockerå®‰è£…12[root@wikifx2 ~]# uname -r3.10.0-1127.13.1.el7.x86_64

é…ç½®ç½‘å¡è½¬å‘,çœ‹å€¼æ˜¯å¦ä¸º112$ sysctl -a |grep -w net.ipv4.ip_forwardnet.ipv4.ip_forward = 1

è‹¥æœªé…ç½®ï¼Œéœ€è¦æ‰§è¡Œå¦‚ä¸‹123456$ cat &lt;&lt;EOF &gt;  /etc/sysctl.d/docker.confnet.bridge.bridge-nf-call-ip6tables = 1net.bridge.bridge-nf-call-iptables = 1net.ipv4.ip_forward=1EOF$ sysctl -p /etc/sysct ...</div></div></a></div><div><a href="/forward/d063782.html" title="Dockerå®‰è£…Skywalking"><img class="cover" src= "/img/loading.gif" data-lazy-src="/images/pasted-25.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-22</div><div class="title">Dockerå®‰è£…Skywalking</div><div class="info">é‡‡ç”¨H2éƒ¨ç½²oapskywalkingé»˜è®¤çš„æ•°æ®å­˜å‚¨æ–¹å¼å³æ˜¯å†…å­˜æ•°æ®åº“H2ã€‚è¯¥æ–¹å¼ç”¨äºæ–¹ä¾¿ä½“éªŒskywalkingï¼Œä½†ä¸æ¨èä½¿ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒã€‚
è¿è¡Œå®¹å™¨å‘½ä»¤ï¼š
1234567docker run --name oap-h2 --restart always -d \--restart=always \-e TZ=Asia/Shanghai \-p 12800:12800 \-p 11800:11800 \-e SW_STORAGE=h2 \apache/skywalking-oap-server:8.3.0-es7
é‡‡ç”¨MySQLéƒ¨ç½²oapéœ€è¦æ³¨æ„åŸç”Ÿçš„dockeré•œåƒä¸­æ²¡æœ‰mysqlé©±åŠ¨ï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨ä¸Šä¼ mysqlçš„é©±åŠ¨åˆ°/skywalking/oap-libs/ä¸‹ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š
1docker cp mysql-connector-java-8.0.19.jar e2ea45eb7118124cf1d89bdf4eac1e798f857d1a2b6d7b43416bf30a57d2af6b:/skywalking/oap-libs/mysql-connector-java-8.0.19 ...</div></div></a></div><div><a href="/forward/17b35260.html" title="ELK-Elasticsearchä»‹ç»ä¸å®‰è£…"><img class="cover" src= "/img/loading.gif" data-lazy-src="/images/img-156.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2019-05-26</div><div class="title">ELK-Elasticsearchä»‹ç»ä¸å®‰è£…</div><div class="info">ä»€ä¹ˆæ˜¯å€’æ’ç´¢å¼•
ä¿¡æ¯å­˜å‚¨åˆ°esæ—¶ï¼Œé¦–å…ˆæŠŠæ¯æ¡è¯­å¥åˆ†æˆä¸€ä¸ªä¸€ä¸ªçš„è¯è¯­
æ ¹æ®æœç´¢çš„å†…å®¹ï¼Œè¿›è¡Œåˆ†é…ï¼Œæœ‰åŒ¹é…åˆ°çš„æƒé‡+1
æŠŠåŒ¹é…åˆ°çš„è¯­å±€ç»™å‘ˆç°å‡ºæ¥

elasticsearchä»‹ç»elasticsearchåº”ç”¨åœºæ™¯
ç”µå•†å¹³å°
é«˜äº®æ˜¾ç¤ºæœç´¢çš„è¯æ¡ä¿¡æ¯
æ—¥å¿—åˆ†æelk

elasticsearchç‰¹ç‚¹
é«˜æ€§èƒ½ï¼šeså¯ä»¥æ”¯æŒä¸€ä¸»å¤šä»ï¼Œæ°´å¹³æ‰©å±•æ–¹ä¾¿
é«˜å¯ç”¨æ€§ï¼šä¸€ä¸ªä¸»èŠ‚ç‚¹å®•æœºåä¸å½±å“ç”¨æˆ·çš„ä½¿ç”¨ã€‚
ç”¨æˆ·ä½¿ç”¨æ–¹ä¾¿å¿«æ·ï¼šesé‡‡ç”¨Javaå¼€å‘ï¼Œå³ä½¿ä¸æ‡‚Javaä»£ç ï¼Œä¸€æ ·å¯ä»¥ä½¿ç”¨
åŠŸèƒ½ä¸°å¯Œï¼Œé…ç½®ç®€å•
é‡‡ç”¨restfulå°è£…çš„æ¥å£ï¼Œå¯ä»¥é€šè¿‡httpå‘èµ·è¯·æ±‚

elasticsearchéƒ¨ç½²æ–¹æ³•


å®‰è£…æ–¹å¼
ä¼˜ç‚¹
å¯¹è¿ç»´çš„è¦æ±‚



docker
éƒ¨ç½²æ–¹ä¾¿ã€å¼€ç®±å³ç”¨ã€å¯åŠ¨è¿…é€Ÿ
éœ€è¦ä¼šdockerçŸ¥è¯†ã€éœ€è¦åˆ¶ä½œé•œåƒã€ä¿®æ”¹é…ç½®éº»çƒ¦ã€æ•°æ®éœ€è¦æŒ‚è½½ç›®å½•


tar
éƒ¨ç½²çµæ´»ã€å¯¹ç³»ç»Ÿä¾µå æ€§å°
éœ€è¦å†™å¯åŠ¨è„šæœ¬æ–‡ä»¶ã€ç›®å½•éœ€è¦æå‰è§„åˆ’


rpm
éƒ¨ç½²æ–¹ä¾¿ã€å¯åŠ¨è„šæœ¬å®‰è£…å³ç”¨ã€å­˜æ”¾ç›®å½•æ ‡å‡†åŒ–
è½¯ä»¶å„ä¸ªç»„ä»¶åˆ†æ•£åœ¨ä¸åŒçš„ç›®å½•ã€å¸è½½ä¸å½»åº•ã€é»˜è®¤é…ç½®éœ€è¦ä¿®æ”¹


ansible
æå…¶çµæ´»ã€æ‰¹é‡éƒ¨ç½²é€Ÿåº¦å¿«
éœ€è¦å­¦ä¹ ansibleè¯­æ³•ã€éœ€è¦æå‰ ...</div></div></a></div><div><a href="/forward/131c756.html" title="ELK-Filebeat7.4.0å•æœºå¤šå®ä¾‹"><img class="cover" src= "/img/loading.gif" data-lazy-src="/images/img-156.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-06-12</div><div class="title">ELK-Filebeat7.4.0å•æœºå¤šå®ä¾‹</div><div class="info">èµ·å› ä¸šåŠ¡éœ€æ±‚ï¼Œå·²ç»è½¬æˆjsonæ ¼å¼çš„nginxæ—¥å¿—ç›´æ¥é€šè¿‡filebeatä¼ å…¥äº†Elasticsearchä¸­ï¼Œè€Œå…¶ä»–ç¨‹åºæ—¥å¿—éœ€è¦é€šè¿‡filebeatä¼ å…¥logstashè¿›è¡ŒäºŒæ¬¡è¿‡æ»¤ã€‚å°±éœ€è¦è§£å†³å¤šoutputçš„é—®é¢˜ã€‚è€Œæ ¹æ®å®˜æ–¹æ–‡æ¡£:

You configure Filebeat to write to a specific output by setting options in the Outputs section of the filebeat.yml config file. Only a single output may be defined.

å¯çŸ¥filebeat.ymlä¸­outputæœ‰ä¸”åªèƒ½æœ‰ä¸€ä¸ªã€‚å½“ç„¶ä½ å¯ä»¥åœ¨filebeat.ymlinputæ¨¡å—ä¸­æ·»åŠ å¤šä¸ªtagsï¼Œå¹¶ä¼ é€’ç»™logstashï¼Œå¹¶åœ¨logstashä¸Šé€šè¿‡ä¸åŒçš„æ ‡ç­¾åŒºåˆ†åä¼ å…¥ä¸åŒçš„indexä¸­ã€‚
é…ç½®å•æœºå¤šå®ä¾‹filebeatä»‹ç»logstash å’Œfilebeatéƒ½å…·æœ‰æ—¥å¿—æ”¶é›†åŠŸèƒ½ï¼Œå› ä¸ºfilebeatç”±Golangç¼–å†™ç›¸è¾ƒäºlogstashæ›´è½»é‡ï¼Œå ç”¨èµ„æºæ›´å°‘ã€‚æ‰€ä»¥å†³å®šåœ¨åŒä¸€å°æœºå™¨ä¸Šå¯åŠ¨ä¸¤ä¸ªfileb ...</div></div></a></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><a href="/about/"><img src= "/img/loading.gif" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"></a></div><div class="author-info__name">é¥¼é“›</div><div class="author-info__description">Think like a coder</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">104</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">89</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">3</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="/go.html?url=aHR0cHM6Ly90Lm1lL2pvaW5jaGF0L2NfUGFybW9ITW1VNU1ETTk=" target="_blank" title="Telegram" rel="external nofollow noopener noreferrer"><i class="fab fa-telegram-plane"></i></a><a class="social-icon" href="/go.html?url=aHR0cHM6Ly9xbS5xcS5jb20vY2dpLWJpbi9xbS9xcj9rPVExTjlsM2lzazhPX2k1YXdGd08tYmxBb1BIN1BVZWI0Jm5vdmVyaWZ5PTA=" target="_blank" title="QQ" rel="external nofollow noopener noreferrer"><i class="fab fa-qq"></i></a><a class="social-icon" href="mailto:admin@cakepanit.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/go.html?url=aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTMxMzc3NTI4Mg==" target="_blank" title="Netease" rel="external nofollow noopener noreferrer"><i class="fas fa-record-vinyl"></i></a></div></div><div class="card-widget"><div class="item-headline"><i class="fas fa-heartbeat"></i><span>Wishing for world peace</span></div><div class="item-content"><a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?url=aHR0cHM6Ly93d3cudW4ub3JnL3poL29ic2VydmFuY2VzL0ludGVybmF0aW9uYWwtZGF5LW9mLXNvbGlkYXJpdHktd2l0aC10aGUtcGFsZXN0aW5pYW4tcGVvcGxl"><div class="container"><div class="black"></div><div class="white"></div><div class="green"></div><div class="red"></div></div><style>body{margin:0}.container{width:100%;height:15.1vh;position:relative}.black{width:100%;top:0;position:absolute;background-color:black;height:33.3333%}.white{width:100%;top:33.3333%;position:absolute;background-color:white;height:33.3333%}.green{width:100%;bottom:0;position:absolute;background-color:green;height:33.3333%}.red{position:absolute;border-style:solid;border-color:transparent transparent transparent red;border-width:7.6vh;z-index:1}</style></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>æ–‡ç« ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">1.</span> <span class="toc-text">å¯åŠ¨è¿‡ç¨‹</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E8%B0%83%E8%AF%95"><span class="toc-number">2.</span> <span class="toc-text">ç½‘ç»œè°ƒè¯•</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%B4%E6%97%B6%E5%85%B3%E5%90%AF%E7%BD%91%E5%8D%A1"><span class="toc-number">2.1.</span> <span class="toc-text">ä¸´æ—¶å…³å¯ç½‘å¡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%A4%9A%E5%9D%97%E7%BD%91%E5%8D%A1"><span class="toc-number">2.2.</span> <span class="toc-text">æ·»åŠ å¤šå—ç½‘å¡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E4%B8%B4%E6%97%B6IP"><span class="toc-number">2.3.</span> <span class="toc-text">é…ç½®ä¸´æ—¶IP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E7%AB%AF%E5%8F%A3%E7%9B%91%E5%90%AC%E7%8A%B6%E6%80%81"><span class="toc-number">2.4.</span> <span class="toc-text">æŸ¥çœ‹ç«¯å£ç›‘å¬çŠ¶æ€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DNS%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE"><span class="toc-number">2.5.</span> <span class="toc-text">DNSç›¸å…³é…ç½®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E8%B7%AF%E7%94%B1%E4%BF%A1%E6%81%AF"><span class="toc-number">2.6.</span> <span class="toc-text">ç³»ç»Ÿè·¯ç”±ä¿¡æ¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ping%E5%91%BD%E4%BB%A4"><span class="toc-number">2.7.</span> <span class="toc-text">pingå‘½ä»¤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#watch%E5%91%BD%E4%BB%A4"><span class="toc-number">2.8.</span> <span class="toc-text">watchå‘½ä»¤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tcpdump%E6%8A%93%E5%8C%85"><span class="toc-number">2.9.</span> <span class="toc-text">tcpdumpæŠ“åŒ…</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SYN%E6%B4%AA%E6%B0%B4%E6%94%BB%E5%87%BB"><span class="toc-number">2.10.</span> <span class="toc-text">SYNæ´ªæ°´æ”»å‡»</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%9B%B8%E5%85%B3%E5%B1%9E%E6%80%A7"><span class="toc-number">3.</span> <span class="toc-text">æ–‡ä»¶ç›¸å…³å±æ€§</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E8%8A%82%E7%82%B9inode-amp-%E7%A3%81%E7%9B%98%E5%9D%97Block"><span class="toc-number">3.1.</span> <span class="toc-text">ç´¢å¼•èŠ‚ç‚¹inode&amp;ç£ç›˜å—Block</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#inode-amp-block%E7%AE%A1%E7%90%86%EF%BC%9A"><span class="toc-number">3.2.</span> <span class="toc-text">inode&amp;blockç®¡ç†ï¼š</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#linux%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.3.</span> <span class="toc-text">linuxæ–‡ä»¶ç±»å‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E6%9C%BA%E5%88%B6"><span class="toc-number">3.4.</span> <span class="toc-text">æ–‡ä»¶æƒé™æœºåˆ¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SELinux"><span class="toc-number">3.5.</span> <span class="toc-text">SELinux</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux%E8%BD%AF%E7%A1%AC%E9%93%BE%E6%8E%A5"><span class="toc-number">3.6.</span> <span class="toc-text">Linuxè½¯ç¡¬é“¾æ¥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%9A%84%E6%97%B6%E9%97%B4%E6%88%B3"><span class="toc-number">3.7.</span> <span class="toc-text">æ–‡ä»¶çš„æ—¶é—´æˆ³</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6-amp-%E7%9B%AE%E5%BD%95%E6%9D%83%E9%99%90"><span class="toc-number">3.8.</span> <span class="toc-text">æ–‡ä»¶&amp;ç›®å½•æƒé™</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E5%BA%94%E7%94%A8"><span class="toc-number">3.9.</span> <span class="toc-text">ç”Ÿäº§ç¯å¢ƒåº”ç”¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E5%92%8C%E7%94%A8%E6%88%B7%E7%BB%84"><span class="toc-number">3.10.</span> <span class="toc-text">ç”¨æˆ·å’Œç”¨æˆ·ç»„</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#RPM-YUM%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E7%9B%B8%E5%85%B3"><span class="toc-number">4.</span> <span class="toc-text">RPM/YUMè½¯ä»¶å®‰è£…ç›¸å…³</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6-SHELL%E7%9B%B8%E5%85%B3"><span class="toc-number">5.</span> <span class="toc-text">ç‰¹æ®Šå­—ç¬¦/SHELLç›¸å…³</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6"><span class="toc-number">5.1.</span> <span class="toc-text">ç‰¹æ®Šå­—ç¬¦</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%A1%E9%81%93%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">5.2.</span> <span class="toc-text">ç®¡é“é‡å®šå‘</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux%E6%AD%A3%E5%88%99"><span class="toc-number">5.3.</span> <span class="toc-text">Linuxæ­£åˆ™</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#BRE"><span class="toc-number">5.3.1.</span> <span class="toc-text">BRE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ERE"><span class="toc-number">5.3.2.</span> <span class="toc-text">ERE</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux%E5%9B%9B%E5%89%91%E5%AE%A2"><span class="toc-number">5.4.</span> <span class="toc-text">Linuxå››å‰‘å®¢</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#awk"><span class="toc-number">5.4.1.</span> <span class="toc-text">awk</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sed"><span class="toc-number">5.4.2.</span> <span class="toc-text">sed</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#grep"><span class="toc-number">5.4.3.</span> <span class="toc-text">grep</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#find"><span class="toc-number">5.4.4.</span> <span class="toc-text">find</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SHELL%E8%84%9A%E6%9C%AC"><span class="toc-number">5.5.</span> <span class="toc-text">SHELLè„šæœ¬</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F"><span class="toc-number">5.5.1.</span> <span class="toc-text">å˜é‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E5%8F%98%E9%87%8F"><span class="toc-number">5.5.2.</span> <span class="toc-text">ç‰¹æ®Šå˜é‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E5%AD%90%E4%B8%B2"><span class="toc-number">5.5.3.</span> <span class="toc-text">å˜é‡å­ä¸²</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E6%89%A9%E5%B1%95%E5%8F%98%E9%87%8F"><span class="toc-number">5.5.4.</span> <span class="toc-text">ç‰¹æ®Šæ‰©å±•å˜é‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">5.5.5.</span> <span class="toc-text">è¿ç®—ç¬¦</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%84%9A%E6%9C%AC%E4%BC%A0%E5%8F%82"><span class="toc-number">5.5.6.</span> <span class="toc-text">è„šæœ¬ä¼ å‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95"><span class="toc-number">5.5.7.</span> <span class="toc-text">æ¡ä»¶æµ‹è¯•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%B5%8B%E8%AF%95%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">5.5.8.</span> <span class="toc-text">æ–‡ä»¶æµ‹è¯•è¡¨è¾¾å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%B5%8B%E8%AF%95%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">5.5.9.</span> <span class="toc-text">å­—ç¬¦ä¸²æµ‹è¯•è¡¨è¾¾å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%A0%E5%8F%82%E5%92%8C%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95%E7%BB%83%E4%B9%A0"><span class="toc-number">5.5.10.</span> <span class="toc-text">ä¼ å‚å’Œæ¡ä»¶æµ‹è¯•ç»ƒä¹ </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E5%85%83%E6%95%B4%E6%95%B0%E6%AF%94%E8%BE%83"><span class="toc-number">5.5.11.</span> <span class="toc-text">äºŒå…ƒæ•´æ•°æ¯”è¾ƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8F%9C%E5%8D%95%E7%BB%83%E4%B9%A0"><span class="toc-number">5.5.12.</span> <span class="toc-text">èœå•ç»ƒä¹ </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#if%E5%88%A4%E6%96%AD"><span class="toc-number">5.5.13.</span> <span class="toc-text">ifåˆ¤æ–­</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7"><span class="toc-number">5.5.14.</span> <span class="toc-text">æœåŠ¡ç›‘æ§</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E4%BC%A0%E5%8F%82"><span class="toc-number">5.5.15.</span> <span class="toc-text">å‡½æ•°ä¼ å‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E8%87%AA%E5%B8%A6%E5%87%BD%E6%95%B0"><span class="toc-number">5.5.16.</span> <span class="toc-text">ç³»ç»Ÿè‡ªå¸¦å‡½æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#case"><span class="toc-number">5.5.17.</span> <span class="toc-text">case</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%94%E5%9B%9E%E5%80%BC%E4%BC%A0%E9%80%92"><span class="toc-number">5.5.18.</span> <span class="toc-text">è¿”å›å€¼ä¼ é€’</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#C6%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC"><span class="toc-number">5.5.19.</span> <span class="toc-text">C6å¯åŠ¨è„šæœ¬</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#C7%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC"><span class="toc-number">5.5.20.</span> <span class="toc-text">C7å¯åŠ¨è„šæœ¬</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PPTP%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC"><span class="toc-number">5.5.21.</span> <span class="toc-text">PPTPå®‰è£…è„šæœ¬</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#while"><span class="toc-number">5.5.22.</span> <span class="toc-text">while</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E9%9A%8F%E6%9C%BA%E6%95%B0"><span class="toc-number">5.5.23.</span> <span class="toc-text">ç”Ÿæˆéšæœºæ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E7%8A%B6%E6%80%81%E6%8E%A7%E5%88%B6"><span class="toc-number">5.5.24.</span> <span class="toc-text">å¾ªç¯çŠ¶æ€æ§åˆ¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84"><span class="toc-number">5.5.25.</span> <span class="toc-text">æ•°ç»„</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1"><span class="toc-number">6.</span> <span class="toc-text">å®šæ—¶ä»»åŠ¡</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF"><span class="toc-number">6.1.</span> <span class="toc-text">å¸¸è§é”™è¯¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E4%BE%8B%E5%AD%90"><span class="toc-number">6.2.</span> <span class="toc-text">ç¼–å†™ä¾‹å­</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%A3%81%E7%9B%98%E5%92%8C%E5%AD%98%E5%82%A8"><span class="toc-number">7.</span> <span class="toc-text">ç£ç›˜å’Œå­˜å‚¨</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E4%BB%8B%E7%BB%8D"><span class="toc-number">7.1.</span> <span class="toc-text">å­˜å‚¨ä»‹ç»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A3%81%E7%9B%98%E9%80%89%E5%9E%8B"><span class="toc-number">7.2.</span> <span class="toc-text">ç£ç›˜é€‰å‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RAID"><span class="toc-number">7.3.</span> <span class="toc-text">RAID</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#RAID0"><span class="toc-number">7.3.1.</span> <span class="toc-text">RAID0</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RAID1"><span class="toc-number">7.3.2.</span> <span class="toc-text">RAID1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RAID5"><span class="toc-number">7.3.3.</span> <span class="toc-text">RAID5</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RAID10"><span class="toc-number">7.3.4.</span> <span class="toc-text">RAID10</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RAID01"><span class="toc-number">7.3.5.</span> <span class="toc-text">RAID01</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E5%8C%BA"><span class="toc-number">7.4.</span> <span class="toc-text">åˆ†åŒº</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#fdisk"><span class="toc-number">7.4.1.</span> <span class="toc-text">fdisk</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#parted"><span class="toc-number">7.4.2.</span> <span class="toc-text">parted</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="toc-number">7.5.</span> <span class="toc-text">æ–‡ä»¶ç³»ç»Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%88%9B%E5%BB%BA%E5%92%8C%E6%8C%82%E8%BD%BD"><span class="toc-number">7.5.1.</span> <span class="toc-text">æ–‡ä»¶ç³»ç»Ÿåˆ›å»ºå’ŒæŒ‚è½½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E4%BF%AE%E5%A4%8D"><span class="toc-number">7.5.2.</span> <span class="toc-text">æ–‡ä»¶ç³»ç»Ÿä¿®å¤</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%91%E6%8F%B4%E6%A8%A1%E5%BC%8F"><span class="toc-number">7.6.</span> <span class="toc-text">æ•‘æ´æ¨¡å¼</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/forward/a5d41a5c.html" title="Golang-Gin+GORM-Demo"><img src= "/img/loading.gif" data-lazy-src="/images/pasted-335.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Golang-Gin+GORM-Demo"></a><div class="content"><a class="title" href="/forward/a5d41a5c.html" title="Golang-Gin+GORM-Demo">Golang-Gin+GORM-Demo</a><time datetime="2024-10-06T10:57:00.000Z" title="å‘è¡¨äº 2024-10-06 18:57:00">2024-10-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/forward/4e89d84.html" title="Golang-23ç§è®¾è®¡æ¨¡å¼"><img src= "/img/loading.gif" data-lazy-src="/images/pasted-2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Golang-23ç§è®¾è®¡æ¨¡å¼"></a><div class="content"><a class="title" href="/forward/4e89d84.html" title="Golang-23ç§è®¾è®¡æ¨¡å¼">Golang-23ç§è®¾è®¡æ¨¡å¼</a><time datetime="2024-02-06T09:33:00.000Z" title="å‘è¡¨äº 2024-02-06 17:33:00">2024-02-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/forward/d17c8c9b.html" title="Containerdä¸Docker"><img src= "/img/loading.gif" data-lazy-src="/images/pasted-334.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Containerdä¸Docker"></a><div class="content"><a class="title" href="/forward/d17c8c9b.html" title="Containerdä¸Docker">Containerdä¸Docker</a><time datetime="2024-01-11T06:40:00.000Z" title="å‘è¡¨äº 2024-01-11 14:40:00">2024-01-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/forward/82cd681d.html" title="Golang-ç½‘ç»œç¼–ç¨‹"><img src= "/img/loading.gif" data-lazy-src="/images/pasted-2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Golang-ç½‘ç»œç¼–ç¨‹"></a><div class="content"><a class="title" href="/forward/82cd681d.html" title="Golang-ç½‘ç»œç¼–ç¨‹">Golang-ç½‘ç»œç¼–ç¨‹</a><time datetime="2024-01-05T03:30:00.000Z" title="å‘è¡¨äº 2024-01-05 11:30:00">2024-01-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/forward/e94e48aa.html" title="Golang-é¢å‘â€œå¯¹è±¡â€ï¼šé¢å‘æ¥å£"><img src= "/img/loading.gif" data-lazy-src="/images/pasted-2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Golang-é¢å‘â€œå¯¹è±¡â€ï¼šé¢å‘æ¥å£"></a><div class="content"><a class="title" href="/forward/e94e48aa.html" title="Golang-é¢å‘â€œå¯¹è±¡â€ï¼šé¢å‘æ¥å£">Golang-é¢å‘â€œå¯¹è±¡â€ï¼šé¢å‘æ¥å£</a><time datetime="2023-11-10T16:45:00.000Z" title="å‘è¡¨äº 2023-11-11 00:45:00">2023-11-11</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer-group-container"><div class="footer-group"><span class="footer-group-title">å¤–é“¾</span><a class="footer-group-item" target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?url=aHR0cHM6Ly93d3cuYWxpeXVuLmNvbS8=">alibabaCloud</a><a class="footer-group-item" target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?url=aHR0cHM6Ly93d3cudGlvYmUuY29tL3Rpb2JlLWluZGV4Lw==">ç¼–ç¨‹è¯­è¨€æ’å</a><a class="footer-group-item" target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?url=aHR0cHM6Ly9zdG9yZS5zaW1wbGVoYWMuY24v">é»‘è‹¹æœèµ„æºç«™</a><a class="footer-group-item" target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?url=aHR0cHM6Ly9mb3JldmVyYmxvZy5jbi9nby5odG1s">è™«æ´åå¹´ä¹‹çº¦</a></div><div class="footer-group"><span class="footer-group-title">å¯¼èˆª</span><a class="footer-group-item" href="/link/">å‹æƒ…é“¾æ¥</a><a class="footer-group-item" href="https://pan.cakepanit.com/" target="_blank" title="æˆ‘çš„äº‘ç›˜">æˆ‘çš„äº‘ç›˜</a><a class="footer-group-item" href="/music/" target="_blank">å¤©å¤©åŠ¨å¬</a><a class="footer-group-item" href="/bookshelf/">æ”¶è—ä¹¦å•</a></div><div class="footer-group"><span class="footer-group-title">åˆ†ç±»</span><a class="footer-group-item" href="/categories/OPS/">è¿ç»´æ•™ç¨‹</a><a class="footer-group-item" href="/categories/DBA/">DBAæ•™ç¨‹</a><a class="footer-group-item" href="/categories/DEV/">ç¼–ç æ•™ç¨‹</a><a class="footer-group-item" target="_blank" rel="noopener" href="https://cmd.cakepanit.com/">å‘½ä»¤æŸ¥è¯¢</a></div><div class="footer-group"><span class="footer-group-title">å…³äº</span><a class="footer-group-item" href="/notice/">ç½‘ç«™å…¬å‘Š</a><a class="footer-group-item" href="/about/">å…³äºæœ¬ç«™</a><a class="footer-group-item" href="/status/">ç«™ç‚¹ç›‘æ§</a><a class="footer-group-item" target="_blank" rel="noopener" href="https://docs.cakepanit.com/">å¸®åŠ©æ–‡æ¡£</a></div><div class="footer-group" id="footer-group-flink"><span class="footer-group-title">å‹é“¾<i class="fas fa-arrow-rotate-right" title="éšæœºå‹é“¾" onclick="eurkon.footerRandomFlink(flinks, 3);"></i></span><a class="footer-group-item" href="" target="_blank" rel="noopener external nofollow noreferrer">åŠ è½½ä¸­...</a><a class="footer-group-item" href="" target="_blank" rel="noopener external nofollow noreferrer">åŠ è½½ä¸­...</a><a class="footer-group-item" href="" target="_blank" rel="noopener external nofollow noreferrer">åŠ è½½ä¸­...</a><a class="footer-group-item" href="/link/">æ›´å¤šå‹é“¾</a></div><div class="footer-group"><span class="footer-group-title">åè®®</span><a class="footer-group-item" href="/protocol/comment/" title="ç”¨æˆ·å‘è¨€å‰ï¼Œè¯·è®¤çœŸé˜…è¯»æœ¬æ¡ä¾‹ã€‚ä¸€ç»å‘è¨€ï¼Œå³è§†ä¸ºåŒæ„æ¥å—æœ¬æ¡ä¾‹ï¼›å¦‚ä¸åŒæ„ï¼Œè¯·å‹¿å‘è¨€ã€‚">è¯„è®ºåè®®</a><a class="footer-group-item" href="/protocol/copyright/" title="æœ¬ç«™æ‰€æœ‰åŸåˆ›æ–‡ç« é‡‡ç”¨çŸ¥è¯†å…±äº«(Creative Commons)ç½²åâ€”éå•†ä¸šæ€§ä½¿ç”¨â€”ç›¸åŒæ–¹å¼å…±äº«4.0å›½é™…å…¬å…±è®¸å¯åè®®">ç‰ˆæƒåè®®</a></div></div><div id="footer-banner"><div id="footer-banner-container"><div class="footer-banner"><div class="copyright">Copyright Â© 2019 - 2026  Maxbit  All Rights Reserved.</div></div><div class="footer-banner"><a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?url=aHR0cHM6Ly9iZWlhbi5taWl0Lmdvdi5jbg==" title="ICPå¤‡æ¡ˆ" style="display: flex; justify-content: center;"><img class="no-lightbox no-lazy" src="/img/beian.svg" alt="ICPå¤‡æ¡ˆ" style="margin-right: 4px;">çš–ICPå¤‡2021005605å·-1</a><a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?url=aHR0cHM6Ly93d3cudXB5dW4uY29tLz91dG1fc291cmNlPWxpYW5tZW5nJnV0bV9tZWRpdW09cmVmZXJyYWw=" title="UPYUN" style="display: flex; justify-content: center;"><img class="no-lightbox no-lazy" src="/img/upyun.svg" alt="CDNåŠ é€Ÿ" style="margin-right: 4px;">åˆæ‹äº‘æä¾›CDNåŠ é€Ÿ</a></div></div></div></div></footer></div><div class="hidden" id="rightside-mask" onclick="eurkon.switchRightSide();"></div><div class="hidden" id="rightside"><div id="rightside-header"><div id="rightside-back"><i class="fas fa-chevron-left" onclick="eurkon.backRightSide();"></i></div><div id="rightside-title">è®¾ç½®</div><div id="rightside-close" onclick="eurkon.switchRightSide();"><i class="fas fa-xmark"></i></div></div><div id="rightside-content"><div id="card-post-content"><div class="rightside-left-col"><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>åˆ†ç±»</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/DBA/"><span class="card-category-list-name">DBA</span><span class="card-category-list-count">34</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/DEV/"><span class="card-category-list-name">DEV</span><span class="card-category-list-count">15</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/OPS/"><span class="card-category-list-name">OPS</span><span class="card-category-list-count">53</span></a></li>
            </ul></div></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>æ ‡ç­¾</span></div><div class="card-tag-cloud"><a id="tags/Git/" href="/tags/Git/" style="font-size: 1.23em; color: rgb(135, 99, 198)">Git<sup>4</sup></a><a id="tags/GitLab/" href="/tags/GitLab/" style="font-size: 1.23em; color: rgb(71, 187, 145)">GitLab<sup>4</sup></a><a id="tags/OPS/" href="/tags/OPS/" style="font-size: 1.45em; color: rgb(2, 124, 120)">ğŸŒOPS<sup>49</sup></a><a id="tags/Docker/" href="/tags/Docker/" style="font-size: 1.29em; color: rgb(155, 52, 47)">Docker<sup>7</sup></a><a id="tags/Containerd/" href="/tags/Containerd/" style="font-size: 1.15em; color: rgb(73, 15, 54)">Containerd<sup>1</sup></a><a id="tags/Skywalking/" href="/tags/Skywalking/" style="font-size: 1.15em; color: rgb(199, 111, 119)">Skywalking<sup>1</sup></a><a id="tags/é“¾è·¯è¿½è¸ª/" href="/tags/%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA/" style="font-size: 1.15em; color: rgb(20, 83, 143)">é“¾è·¯è¿½è¸ª<sup>1</sup></a><a id="tags/Download/" href="/tags/Download/" style="font-size: 1.15em; color: rgb(88, 193, 42)">â¬Download<sup>1</sup></a><a id="tags/ELK/" href="/tags/ELK/" style="font-size: 1.26em; color: rgb(183, 159, 168)">ELK<sup>5</sup></a><a id="tags/Logstash/" href="/tags/Logstash/" style="font-size: 1.18em; color: rgb(172, 17, 14)">Logstash<sup>2</sup></a><a id="tags/Nginx/" href="/tags/Nginx/" style="font-size: 1.18em; color: rgb(65, 143, 53)">Nginx<sup>2</sup></a><a id="tags/Golang/" href="/tags/Golang/" style="font-size: 1.37em; color: rgb(177, 62, 95)">ğŸ“Golang<sup>13</sup></a><a id="tags/è®¾è®¡æ¨¡å¼/" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 1.15em; color: rgb(66, 14, 79)">è®¾è®¡æ¨¡å¼<sup>1</sup></a><a id="tags/Gin/" href="/tags/Gin/" style="font-size: 1.15em; color: rgb(3, 58, 107)">Gin<sup>1</sup></a><a id="tags/GORM/" href="/tags/GORM/" style="font-size: 1.15em; color: rgb(128, 14, 144)">GORM<sup>1</sup></a><a id="tags/åç¨‹/" href="/tags/%E5%8D%8F%E7%A8%8B/" style="font-size: 1.15em; color: rgb(124, 15, 77)">åç¨‹<sup>1</sup></a><a id="tags/goroutine/" href="/tags/goroutine/" style="font-size: 1.15em; color: rgb(149, 27, 190)">goroutine<sup>1</sup></a><a id="tags/æ•°æ®å¤„ç†/" href="/tags/%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/" style="font-size: 1.15em; color: rgb(10, 55, 139)">æ•°æ®å¤„ç†<sup>1</sup></a><a id="tags/çˆ¬è™«/" href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 1.15em; color: rgb(103, 143, 110)">çˆ¬è™«<sup>1</sup></a><a id="tags/åå°„/" href="/tags/%E5%8F%8D%E5%B0%84/" style="font-size: 1.15em; color: rgb(172, 90, 190)">åå°„<sup>1</sup></a><a id="tags/reflect/" href="/tags/reflect/" style="font-size: 1.15em; color: rgb(41, 174, 195)">reflect<sup>1</sup></a><a id="tags/JumpServer/" href="/tags/JumpServer/" style="font-size: 1.15em; color: rgb(71, 30, 72)">JumpServer<sup>1</sup></a><a id="tags/å ¡å’æœº/" href="/tags/%E5%A0%A1%E5%9E%92%E6%9C%BA/" style="font-size: 1.15em; color: rgb(23, 163, 29)">å ¡å’æœº<sup>1</sup></a><a id="tags/Kong/" href="/tags/Kong/" style="font-size: 1.2em; color: rgb(122, 123, 2)">Kong<sup>3</sup></a><a id="tags/OAuth2-0/" href="/tags/OAuth2-0/" style="font-size: 1.15em; color: rgb(39, 141, 36)">OAuth2.0<sup>1</sup></a><a id="tags/iptables/" href="/tags/iptables/" style="font-size: 1.15em; color: rgb(139, 153, 171)">iptables<sup>1</sup></a><a id="tags/MongoDB/" href="/tags/MongoDB/" style="font-size: 1.2em; color: rgb(127, 200, 11)">MongoDB<sup>3</sup></a><a id="tags/NoSQL/" href="/tags/NoSQL/" style="font-size: 1.29em; color: rgb(73, 55, 67)">NoSQL<sup>7</sup></a><a id="tags/ä¸»ä»å¤åˆ¶/" href="/tags/%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/" style="font-size: 1.34em; color: rgb(177, 56, 157)">ä¸»ä»å¤åˆ¶<sup>12</sup></a><a id="tags/MySQL/" href="/tags/MySQL/" style="font-size: 1.42em; color: rgb(42, 168, 5)">ğŸŒ²MySQL<sup>26</sup></a><a id="tags/è¯»å†™åˆ†ç¦»/" href="/tags/%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB/" style="font-size: 1.23em; color: rgb(169, 162, 17)">è¯»å†™åˆ†ç¦»<sup>4</sup></a><a id="tags/é«˜å¯ç”¨/" href="/tags/%E9%AB%98%E5%8F%AF%E7%94%A8/" style="font-size: 1.31em; color: rgb(162, 188, 140)">é«˜å¯ç”¨<sup>8</sup></a><a id="tags/MHA/" href="/tags/MHA/" style="font-size: 1.18em; color: rgb(126, 77, 48)">MHA<sup>2</sup></a><a id="tags/åˆ†å¸ƒå¼/" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" style="font-size: 1.26em; color: rgb(191, 160, 44)">åˆ†å¸ƒå¼<sup>5</sup></a><a id="tags/MyCAT/" href="/tags/MyCAT/" style="font-size: 1.2em; color: rgb(186, 141, 1)">MyCAT<sup>3</sup></a><a id="tags/å‚ç›´æ‹†åˆ†/" href="/tags/%E5%9E%82%E7%9B%B4%E6%8B%86%E5%88%86/" style="font-size: 1.15em; color: rgb(180, 87, 178)">å‚ç›´æ‹†åˆ†<sup>1</sup></a><a id="tags/é”/" href="/tags/%E9%94%81/" style="font-size: 1.15em; color: rgb(189, 75, 15)">é”<sup>1</sup></a><a id="tags/ACID/" href="/tags/ACID/" style="font-size: 1.15em; color: rgb(113, 67, 86)">ACID<sup>1</sup></a><a id="tags/äº‹åŠ¡/" href="/tags/%E4%BA%8B%E5%8A%A1/" style="font-size: 1.15em; color: rgb(56, 139, 75)">äº‹åŠ¡<sup>1</sup></a><a id="tags/æ—¥å¿—ç®¡ç†/" href="/tags/%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86/" style="font-size: 1.23em; color: rgb(176, 37, 141)">æ—¥å¿—ç®¡ç†<sup>4</sup></a><a id="tags/SQL/" href="/tags/SQL/" style="font-size: 1.2em; color: rgb(80, 38, 149)">SQL<sup>3</sup></a><a id="tags/ä¸€è‡´æ€§hashç®—æ³•/" href="/tags/%E4%B8%80%E8%87%B4%E6%80%A7hash%E7%AE%97%E6%B3%95/" style="font-size: 1.15em; color: rgb(21, 151, 83)">ä¸€è‡´æ€§hashç®—æ³•<sup>1</sup></a><a id="tags/GPU/" href="/tags/GPU/" style="font-size: 1.15em; color: rgb(49, 134, 190)">GPU<sup>1</sup></a><a id="tags/nvidia/" href="/tags/nvidia/" style="font-size: 1.15em; color: rgb(129, 192, 39)">nvidia<sup>1</sup></a><a id="tags/PAM/" href="/tags/PAM/" style="font-size: 1.15em; color: rgb(49, 131, 122)">PAM<sup>1</sup></a><a id="tags/Ansible/" href="/tags/Ansible/" style="font-size: 1.15em; color: rgb(144, 157, 6)">Ansible<sup>1</sup></a><a id="tags/Playbook/" href="/tags/Playbook/" style="font-size: 1.15em; color: rgb(113, 70, 50)">Playbook<sup>1</sup></a><a id="tags/Redis/" href="/tags/Redis/" style="font-size: 1.26em; color: rgb(144, 200, 63)">Redis<sup>5</sup></a><a id="tags/tools/" href="/tags/tools/" style="font-size: 1.15em; color: rgb(166, 185, 46)">tools<sup>1</sup></a><a id="tags/SVN/" href="/tags/SVN/" style="font-size: 1.15em; color: rgb(16, 9, 19)">SVN<sup>1</sup></a><a id="tags/Zabbix/" href="/tags/Zabbix/" style="font-size: 1.23em; color: rgb(0, 120, 134)">Zabbix<sup>4</sup></a><a id="tags/Zookeeper/" href="/tags/Zookeeper/" style="font-size: 1.2em; color: rgb(13, 81, 0)">Zookeeper<sup>3</sup></a><a id="tags/gRPC/" href="/tags/gRPC/" style="font-size: 1.15em; color: rgb(140, 163, 65)">gRPC<sup>1</sup></a><a id="tags/Kubernetes/" href="/tags/Kubernetes/" style="font-size: 1.4em; color: rgb(25, 67, 163)">â›µKubernetes<sup>21</sup></a><a id="tags/place/" href="/tags/place/" style="font-size: 1.15em; color: rgb(42, 197, 57)">place<sup>1</sup></a><a id="tags/mysqlå¤‡ä»½/" href="/tags/mysql%E5%A4%87%E4%BB%BD/" style="font-size: 1.15em; color: rgb(103, 152, 44)">mysqlå¤‡ä»½<sup>1</sup></a><a id="tags/å¼¹æ€§ä¼¸ç¼©/" href="/tags/%E5%BC%B9%E6%80%A7%E4%BC%B8%E7%BC%A9/" style="font-size: 1.15em; color: rgb(21, 35, 28)">å¼¹æ€§ä¼¸ç¼©<sup>1</sup></a><a id="tags/è°ƒåº¦ç­–ç•¥/" href="/tags/%E8%B0%83%E5%BA%A6%E7%AD%96%E7%95%A5/" style="font-size: 1.15em; color: rgb(18, 137, 47)">è°ƒåº¦ç­–ç•¥<sup>1</sup></a><a id="tags/æ•°æ®å¤‡ä»½/" href="/tags/%E6%95%B0%E6%8D%AE%E5%A4%87%E4%BB%BD/" style="font-size: 1.18em; color: rgb(138, 57, 20)">æ•°æ®å¤‡ä»½<sup>2</sup></a><a id="tags/OPENVPN/" href="/tags/OPENVPN/" style="font-size: 1.15em; color: rgb(23, 89, 200)">OPENVPN<sup>1</sup></a><a id="tags/DNS/" href="/tags/DNS/" style="font-size: 1.15em; color: rgb(182, 48, 144)">DNS<sup>1</sup></a><a id="tags/æ ‘è“æ´¾/" href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" style="font-size: 1.15em; color: rgb(124, 61, 199)">æ ‘è“æ´¾<sup>1</sup></a><a id="tags/Minecraft/" href="/tags/Minecraft/" style="font-size: 1.15em; color: rgb(130, 180, 8)">Minecraft<sup>1</sup></a><a id="tags/ä¼˜åŒ–/" href="/tags/%E4%BC%98%E5%8C%96/" style="font-size: 1.15em; color: rgb(54, 159, 108)">ä¼˜åŒ–<sup>1</sup></a><a id="tags/Apollo/" href="/tags/Apollo/" style="font-size: 1.15em; color: rgb(10, 14, 187)">Apollo<sup>1</sup></a><a id="tags/Canal/" href="/tags/Canal/" style="font-size: 1.15em; color: rgb(66, 38, 38)">Canal<sup>1</sup></a><a id="tags/å¤šè¡¨è”æŸ¥/" href="/tags/%E5%A4%9A%E8%A1%A8%E8%81%94%E6%9F%A5/" style="font-size: 1.15em; color: rgb(106, 90, 102)">å¤šè¡¨è”æŸ¥<sup>1</sup></a><a id="tags/CI-CD/" href="/tags/CI-CD/" style="font-size: 1.18em; color: rgb(76, 108, 176)">CI/CD<sup>2</sup></a><a id="tags/ç½‘ç»œç¼–ç¨‹/" href="/tags/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" style="font-size: 1.15em; color: rgb(52, 170, 125)">ç½‘ç»œç¼–ç¨‹<sup>1</sup></a><a id="tags/é¢å‘å¯¹è±¡/" href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" style="font-size: 1.15em; color: rgb(4, 174, 189)">é¢å‘å¯¹è±¡<sup>1</sup></a><a id="tags/æ°´å¹³æ‹†åˆ†/" href="/tags/%E6%B0%B4%E5%B9%B3%E6%8B%86%E5%88%86/" style="font-size: 1.15em; color: rgb(0, 130, 46)">æ°´å¹³æ‹†åˆ†<sup>1</sup></a><a id="tags/ç´¢å¼•/" href="/tags/%E7%B4%A2%E5%BC%95/" style="font-size: 1.15em; color: rgb(145, 126, 20)">ç´¢å¼•<sup>1</sup></a><a id="tags/Rediså“¨å…µ/" href="/tags/Redis%E5%93%A8%E5%85%B5/" style="font-size: 1.15em; color: rgb(146, 103, 149)">Rediså“¨å…µ<sup>1</sup></a><a id="tags/Terraform/" href="/tags/Terraform/" style="font-size: 1.15em; color: rgb(157, 182, 32)">Terraform<sup>1</sup></a><a id="tags/åŸºç¡€è®¾æ–½å³ä»£ç /" href="/tags/%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD%E5%8D%B3%E4%BB%A3%E7%A0%81/" style="font-size: 1.15em; color: rgb(172, 98, 33)">åŸºç¡€è®¾æ–½å³ä»£ç <sup>1</sup></a><a id="tags/å…¬æœ‰äº‘ç¼–æ’/" href="/tags/%E5%85%AC%E6%9C%89%E4%BA%91%E7%BC%96%E6%8E%92/" style="font-size: 1.15em; color: rgb(72, 49, 95)">å…¬æœ‰äº‘ç¼–æ’<sup>1</sup></a><a id="tags/æ•°æ®æŒä¹…åŒ–/" href="/tags/%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96/" style="font-size: 1.15em; color: rgb(169, 57, 65)">æ•°æ®æŒä¹…åŒ–<sup>1</sup></a><a id="tags/Workload/" href="/tags/Workload/" style="font-size: 1.15em; color: rgb(40, 100, 119)">Workload<sup>1</sup></a><a id="tags/CNI/" href="/tags/CNI/" style="font-size: 1.15em; color: rgb(175, 189, 80)">CNI<sup>1</sup></a><a id="tags/æœåŠ¡å‘ç°/" href="/tags/%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0/" style="font-size: 1.15em; color: rgb(112, 174, 163)">æœåŠ¡å‘ç°<sup>1</sup></a><a id="tags/æ— äººåº”ç­”/" href="/tags/%E6%97%A0%E4%BA%BA%E5%BA%94%E7%AD%94/" style="font-size: 1.15em; color: rgb(41, 117, 84)">æ— äººåº”ç­”<sup>1</sup></a><a id="tags/preseed/" href="/tags/preseed/" style="font-size: 1.15em; color: rgb(150, 129, 38)">preseed<sup>1</sup></a><a id="tags/æ•°æ®åº“ä¼˜åŒ–/" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96/" style="font-size: 1.15em; color: rgb(92, 58, 1)">æ•°æ®åº“ä¼˜åŒ–<sup>1</sup></a><a id="tags/å®¹å™¨ç¼–æ’/" href="/tags/%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92/" style="font-size: 1.15em; color: rgb(96, 198, 18)">å®¹å™¨ç¼–æ’<sup>1</sup></a><a id="tags/Prometheus/" href="/tags/Prometheus/" style="font-size: 1.15em; color: rgb(39, 1, 115)">Prometheus<sup>1</sup></a><a id="tags/StatefuSet/" href="/tags/StatefuSet/" style="font-size: 1.15em; color: rgb(19, 43, 135)">StatefuSet<sup>1</sup></a><a id="tags/Helm-v3/" href="/tags/Helm-v3/" style="font-size: 1.15em; color: rgb(8, 39, 161)">Helm v3<sup>1</sup></a><a id="tags/SHELL/" href="/tags/SHELL/" style="font-size: 1.15em; color: rgb(200, 9, 169)">SHELL<sup>1</sup></a><a id="tags/RAID/" href="/tags/RAID/" style="font-size: 1.15em; color: rgb(60, 70, 18)">RAID<sup>1</sup></a></div></div></div></div><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-sun"></i><i class="fas fa-moon"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightmenu"><div class="rightmenu-group rightmenu-small"><div class="rightmenu-item" id="menu-backward" onclick="window.history.back()"><i class="fas fa-arrow-left"></i></div><div class="rightmenu-item" id="menu-forward" onclick="window.history.forward()"><i class="fas fa-arrow-right"></i></div><div class="rightmenu-item" id="menu-refresh" onclick="window.history.reload()"><i class="fas fa-arrow-rotate-right"></i></div><div class="rightmenu-item" id="menu-top" onclick="btf.scrollToDest(0, 500)"><i class="fas fa-arrow-up"></i></div></div><div class="rightmenu-group rightmenu-line" id="rightmenu-text"><div class="rightmenu-item" id="menu-copy"><i class="fas fa-copy"></i><span>å¤åˆ¶å†…å®¹</span></div><div class="rightmenu-item" id="menu-comment"><i class="fas fa-comment"></i><span>å¼•ç”¨è¯„è®º</span></div><div class="rightmenu-item" id="menu-paste"><i class="fas fa-paste"></i><span>ç²˜è´´æ–‡æœ¬</span></div><div class="rightmenu-item" id="menu-search"><i class="fas fa-search"></i><span>åœ¨æœ¬ç«™æœç´¢</span></div><div class="rightmenu-item" id="menu-baidu"><i class="fas fa-search-plus"></i><span>å»ç™¾åº¦æœç´¢</span></div></div><div class="rightmenu-group rightmenu-line" id="rightmenu-href"><div class="rightmenu-item" id="menu-copy-image"><i class="fas fa-copy"></i><span>å¤åˆ¶å›¾ç‰‡</span></div><div class="rightmenu-item" id="menu-download-image"><i class="fas fa-download"></i><span>ä¸‹è½½å›¾ç‰‡</span></div><div class="rightmenu-item" id="menu-link"><i class="fas fa-link"></i><span>åˆ†äº«é“¾æ¥</span></div><div class="rightmenu-item" id="menu-window"><i class="fas fa-window-restore"></i><span>æ–°çª—å£æ‰“å¼€</span></div></div><div class="rightmenu-group rightmenu-line" id="rightmenu-post"><a class="rightmenu-item" id="menu-random" href="/random/"><i class="fas fa-random"></i><span>éšæœºæ–‡ç« </span></a><a class="rightmenu-item" id="menu-categories" href="/categories/"><i class="fas fa-shapes"></i><span>å…¨éƒ¨åˆ†ç±»</span></a><a class="rightmenu-item" id="menu-tags" href="/tags/"><i class="fas fa-tags"></i><span>æ‰€æœ‰æ ‡ç­¾</span></a><div class="rightmenu-item" id="menu-share"><i class="fas fa-share-square"></i><span>åˆ†äº«æœ¬é¡µ</span></div></div><div class="rightmenu-group rightmenu-line" id="rightmenu-site"><a class="rightmenu-item" id="menu-message" href="/message/"><i class="fas fa-envelope"></i><span>ç•™è¨€ä¿¡ç®±</span></a><a class="rightmenu-item" id="menu-about" href="/about/"><i class="fas fa-address-card"></i><span>å…³äºæœ¬ç«™</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/eurkon/color-thief.min.js"></script><script defer="" src="/js/eurkon/eurkon.js"></script><script defer="" data-pjax="" src="/js/eurkon/refresh.js"></script><script src="/js/tw_cn.js"></script><script src="/css/fei/fancybox.umd.min.js"></script><script src="/css/fei/instantpage.min.js" type="module"></script><script src="/css/fei/lazyload.iife.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><script defer="" data-pjax="" async="" src="//at.alicdn.com/t/font_2358265_expoyqe85d4.js"></script><script defer="" data-pjax="" src="/css/fei/danmaku-tags.js"></script><script defer="" data-pjax="" src="/css/fei/tags-fold.js"></script><script defer="" data-pjax="" src="/js/fei/skill-color.js"></script><div class="aplayer no-destroy" data-id="9114857987" data-server="netease" data-type="playlist" data-order="random" data-fixed="true" data-autoplay="false"> </div><link rel="stylesheet" href="/css/fei/APlayer.min.css" media="print" onload="this.media='all'"><script src="/css/fei/APlayer.min.js"></script><script src="/css/fei/Meting.min.js"></script><script src="/css/fei/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: true,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', 'G-0MFDY8HY5K', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-0MFDY8HY5K');

})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async="" data-pjax="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/haru01.model.json"},"bottom":-40,"display":{"position":"right","width":190,"height":380,"hOffset":5},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html><script>var posts=["forward/60c1bc2d.html","forward/882d9505.html","forward/408a4bb8.html","forward/d17c8c9b.html","forward/d063782.html","forward/download.html","forward/17b35260.html","forward/131c756.html","forward/47eea66c.html","forward/eb065b59.html","forward/873540ab.html","forward/4e89d84.html","forward/a5d41a5c.html","forward/d12df344.html","forward/c675163c.html","forward/f61b8e50.html","forward/8f91bfec.html","forward/d5b63f7f.html","forward/f9d199b7.html","forward/420acb0d.html","forward/bac240f7.html","forward/1e56645c.html","forward/d7240237.html","forward/c4bb5371.html","forward/6c0d75ae.html","forward/3053135c.html","forward/74c8159a.html","forward/bbb9c58b.html","forward/c919a25c.html","forward/557ea64b.html","forward/49de8711.html","forward/f34e607d.html","forward/c3e1b71a.html","forward/bc8a646.html","forward/93ea067.html","forward/62bf20bb.html","forward/cb26d424.html","forward/3c4a0863.html","forward/ddc093b3.html","forward/4f3d60c1.html","forward/a7fae6f0.html","forward/ae362167.html","forward/c6f90662.html","forward/36cbf320.html","forward/67af6371.html","forward/fb94f251.html","forward/212d60e3.html","forward/b571ca78.html","forward/fabc6ce1.html","forward/ae26d423.html","forward/f353577b.html","forward/2f09977b.html","forward/3837938a.html","forward/7be7c575.html","forward/48a90e5c.html","forward/4a17b156.html","forward/5234d9e2.html","forward/3ea5fff1.html","forward/2aa52898.html","forward/55d102bd.html","forward/ad8d3f77.html","forward/1758bdeb.html","forward/6cfd7a23.html","forward/8cd3cd17.html","forward/8e9bbd7d.html","forward/2cfbf2d2.html","forward/d4ac701.html","forward/8bd2a16a.html","forward/d6f16b84.html","forward/91db5a91.html","forward/29b0e6a9.html","forward/d36764c1.html","forward/852a3e1.html","forward/13c392b.html","forward/82cd681d.html","forward/e94e48aa.html","forward/40c70ce.html","forward/c3e55136.html","forward/84c0fcc7.html","forward/69e1266e.html","forward/663d93c2.html","forward/68023dec.html","forward/da64184b.html","forward/ae6c7518.html","forward/3df8560c.html","forward/b36ee5af.html","forward/1051b489.html","forward/dc57d8c4.html","forward/8269a7fd.html","forward/61316209.html","forward/503970b4.html","forward/8ed285a0.html","forward/ff7280bd.html","forward/b17eefd4.html","forward/5c41384a.html","forward/14a32ee2.html","forward/58eea07e.html","forward/6b4e4d76.html","forward/dc57d8c5.html","forward/7139bb18.html","forward/649a95fd.html","forward/57e2aa11.html","forward/e9795f03.html","forward/312ec9e0.html"];function toRandomPost(){ window.pjax ? pjax.loadUrl('/'+posts[Math.floor(Math.random()*posts.length)]) : window.open('/'+posts[Math.floor(Math.random()*posts.length)], "_self"); };</script><script>var flinks=[{"name":"Eurkon","link":"https://blog.eurkon.com","avatar":"https://blog.eurkon.com/images/user/avatar.jpg","descr":"ä¸åªæ˜¯ä»£ç çš„æ¬è¿å·¥"},{"name":"è±Œè±†å¤šå¤š","link":"https://wandouduoduo.github.io/","avatar":"/img/link/index.png","descr":"èµ„æ·±æ²ªæ¼‚è¿ç»´å·¥ç¨‹å¸ˆ"},{"name":"ç¼ºç¼º","link":"https://www.quewaner.com/","avatar":"https://q2.qlogo.cn/headimg_dl?dst_uin=3393597524&spec=100","descr":"èµ„æ·±å‰ç«¯å·¥ç¨‹å¸ˆ"},{"name":"yiyun","link":"https://moeci.com/","avatar":"https://q2.qlogo.cn/headimg_dl?dst_uin=2284407619&spec=100","descr":"å…¨æ ˆå¼€å‘"},{"name":"äºŒå“ˆå°çª","link":"https://www.moeeh.cn/","avatar":"https://www.moeeh.cn/eh/eh.png","descr":"è‹¦é…’æŠ˜æŸ³ä»Šç›¸ç¦» æ— é£æ— æœˆä¹Ÿæ— ä½ "},{"name":"Akilarã®ç³–æœå±‹","link":"https://akilar.top/","avatar":"https://unpkg.zhimg.com/akilar-candyassets/image/siteicon/favicon.png","descr":"æœŸå¾…æ‚¨çš„å…‰ä¸´ï¼"},{"name":"APPå–µ","link":"https://www.appmiu.com/","avatar":"https://q2.qlogo.cn/headimg_dl?dst_uin=904037151&spec=100","descr":"é˜¿å–µä¼˜è´¨åº”ç”¨åˆ†äº«"},{"name":"ä¸ƒæ˜Ÿæ¯”ç‰¹","link":"https://www.qixingbit.com","avatar":"https://q2.qlogo.cn/headimg_dl?dst_uin=320406741&spec=100","descr":"ä¿¡æ¯å®‰å…¨,ç½‘ç»œæŠ€æœ¯,äº¤æ¢è·¯ç”±,ç¼–ç¨‹,æ¼æ´æŒ–æ˜,CTF"},{"name":"ä¸€æœµå¤§å‘²èŠ±","link":"https://www.iiemo.com/","avatar":"https://www.iiemo.com/logo.png","descr":"èµ„æ·±NBå‰ç«¯å¤§ä½¬"},{"name":"å‘¨å°é›¨","link":"https://zxyy.me/","avatar":"https://q2.qlogo.cn/headimg_dl?dst_uin=1016673080&spec=100","descr":"PHPç¨‹åºçŒ¿"},{"name":"ACGé£Ÿå ‚","link":"https://canteen.globalacca.top/","avatar":"https://q2.qlogo.cn/headimg_dl?dst_uin=1478030465&spec=100","descr":"æ±‡é›†ACGã€åŠ¨æ¼«å’Œgalgameä¸ºä¸€ä½“çš„ç»¼åˆå°ç«™"},{"name":"æµ·æ‹¥","link":"https://haiyong.site","avatar":"https://haiyong.site/img/favicon.png","descr":"ä¸€æšä¹äºåˆ†äº«æŠ€æœ¯ä¸å¿«ä¹çš„åšä¸»"},{"name":"æ‚çƒ©é¥­","link":"https://zahui.fan","avatar":"https://q2.qlogo.cn/headimg_dl?dst_uin=393991732&spec=100","descr":"è¿ç»´ã€è¿ç»´å¼€å‘æŠ€æœ¯åˆ†äº«"},{"name":"å°é«˜å¯¼èˆª","link":"https://www.dhw22.com/","avatar":"https://www.dhw22.com/wp-content/uploads/2022/01/Favicon.png","descr":"èµ„æºç±»æŠ€æœ¯æ•™ç¨‹æ´»åŠ¨å¯¼èˆªåˆ†ç±»å¹³å°"},{"name":"SimpleHacèµ„æºç¤¾","link":"https://store.simplehac.cn/","avatar":"https://store.simplehac.cn/wp-content/uploads/2024/12/96e7a03a1e20241206225057.png","descr":"æƒ³ä½ æ‰€æƒ³ï¼Œè‡³ä½ æ‰€åŠ"},{"name":"åä¸ºå¼€æºé•œåƒç«™","link":"https://mirrors.huaweicloud.com/","avatar":"/img/link/huawei.png","descr":"æ„å»ºä¸‡ç‰©äº’è”çš„æ™ºèƒ½ä¸–ç•Œ"},{"name":"é˜¿é‡Œå¼€æºé•œåƒç«™","link":"https://mirrors.aliyun.com/","avatar":"/img/link/aliyun.png","descr":"ä¸ºäº†æ— æ³•è®¡ç®—çš„ä»·å€¼"},{"name":"ç½‘æ˜“å¼€æºé•œåƒç«™","link":"https://mirrors.163.com/","avatar":"/img/link/netease.png","descr":"ç½‘èšäººçš„åŠ›é‡"},{"name":"æœç‹å¼€æºé•œåƒç«™","link":"https://mirrors.sohu.com/","avatar":"/img/link/souhu.png","descr":"ä¸Šæœç‹ çŸ¥å¤©ä¸‹"},{"name":"æ¸…åå¼€æºé•œåƒç«™","link":"https://mirrors.tuna.tsinghua.edu.cn/","avatar":"/img/link/qh.png","descr":"è‡ªå¼ºä¸æ¯,åšå¾·è½½ç‰©"},{"name":"æµ™å¤§å¼€æºé•œåƒç«™","link":"https://mirrors.zju.edu.cn/","avatar":"/img/link/zd.png","descr":"å…¼æ€»æ¡è´¯,çŸ¥è‡³çŸ¥ç»ˆ"},{"name":"ä¸­ç§‘å¤§å¼€æºé•œåƒç«™","link":"https://mirrors.ustc.edu.cn/","avatar":"/img/link/zkd.png","descr":"çº¢ä¸“å¹¶è¿›,ç†å®äº¤è"},{"name":"å…°å¤§å¼€æºé•œåƒç«™","link":"https://mirror.lzu.edu.cn/","avatar":"/img/link/ld.png","descr":"ç‹¬æ ‘ä¸€å¸œ,è‡ªå¼ºä¸æ¯"}];function toRandomFlink(){window.open(flinks[Math.floor(Math.random()*flinks.length)].link);};</script>